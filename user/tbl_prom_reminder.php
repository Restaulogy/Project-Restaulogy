<?phpinclude_once(dirname(dirname(__FILE__))."/init.php");include_once("header.php");$active_page = "tbl_prom_reminder";/*if($sesslife==true){*/$prem_id= get_input("prem_id");$prem_promotion= get_input("prem_promotion");$prem_user= get_input("prem_user");$prem_before= get_input("prem_before");$prem_after= get_input("prem_after");$prem_spc_date= get_input("prem_spc_date");$prem_act_send_dt= get_input("prem_act_send_dt");$prem_is_send= get_input("prem_is_send");$prem_start_date= get_input("prem_start_date");$prem_end_date= get_input("prem_end_date");$action = strtoupper(get_input(ACTION_TITLE));$mode = strtoupper(get_input(MODE_TITLE));$offset = get_input(OFFSET_TITLE,OFFSET_VALUE);$limit =  get_input(LIMIT_TITLE,LIMIT_VALUE);$sort_on = get_input(SORT_ON,"prem_id");$sort_by=$new_sort="";biz_set_sorting_var($sort_by,$new_sort);$url = "{$website}/user/tbl_prom_reminder.php";$navigationURL = $url."?".SORT_ON."={$sort_on}&".SORT_BY."={$sort_by}";$isSuccess = "";$objtbl_prom_reminder= new tbl_prom_reminder();if(is_not_empty($action)){	switch($action){		case ACTION_CREATE: 			$isSuccess = $objtbl_prom_reminder->create($prem_promotion, $prem_user, $prem_before, $prem_after, $prem_spc_date, $prem_act_send_dt, $prem_is_send, $prem_start_date, $prem_end_date);			break;		case ACTION_UPDATE: 			$isSuccess = $objtbl_prom_reminder->update($prem_id, $prem_promotion, $prem_user, $prem_before, $prem_after, $prem_spc_date, $prem_act_send_dt, $prem_is_send, $prem_start_date, $prem_end_date);			break;		case ACTION_DELETE: 			$isSuccess = $objtbl_prom_reminder->delete(array(PREM_ID=>$prem_id));			break;		case ACTION_ACTIVATE: 			$isSuccess = $objtbl_prom_reminder->activate($prem_id);			break;		case ACTION_DEACTIVATE: 			$isSuccess = $objtbl_prom_reminder->deactivate($prem_id);			break;	}//..switch}//..ifif(is_not_empty($isSuccess)){	if(is_gt_zero_num($isSuccess)){		$err .= "<div class='info'>".$_lang['tbl_prom_reminder'][$action]['SUCCESS_MSG']."</div>";	}elseif($isSuccess == OPERATION_FAIL){		$err .= "<div class='error'>".$_lang['tbl_prom_reminder'][$action]['FAILURE_MSG']."</div>";	}elseif($isSuccess == OPERATION_DUPLICATE){		$err .= "<div class='error'>".$_lang['tbl_prom_reminder'][$action]['DUPLICATE_MSG']."</div>";	}}//..if	$result_found=0;	$tbl_prom_reminderlist = $objtbl_prom_reminder->readArray(array(OFFSET_TITLE=>$offset,LIMIT_TITLE=>$limit,SORT_BY=>$sort_by,SORT_ON=>$sort_on),$result_found,1);	$allpageCount = 0;	$currentPage = 0;	$smarty->assign('pagination',biz_pagination(array("url"=>$navigationURL,LIMIT_TITLE=>$limit,OFFSET_TITLE=>$offset,"count"=>$result_found),$allpageCount,$currentPage));	$smarty->assign('allpageCount',$allpageCount);	$smarty->assign('currentPage',$currentPage);	$smarty->assign('tbl_prom_reminderlist', $tbl_prom_reminderlist);	$smarty->assign('result_found',$result_found);	$template = "tbl_prom_reminder/tbl_prom_reminder.tpl";	if (is_not_empty($mode)){		if(($mode == MODE_VIEW || $mode==MODE_UPDATE) && is_gt_zero_num($prem_id)){			$tbl_prom_reminderinfo= $objtbl_prom_reminder->GetInfo($prem_id);			$smarty->assign('tbl_prom_reminderinfo',$tbl_prom_reminderinfo);			if($mode==MODE_UPDATE){				$smarty->assign("isUpdate",1);			}			$template = "tbl_prom_reminder/view.tpl";		}elseif($mode == MODE_CREATE){			$template = "tbl_prom_reminder/create.tpl";					}}	$smarty->assign('page_url', $url);	$smarty->assign('navigationURL',$navigationURL);	$smarty->assign('new_sort',$new_sort);	$smarty->assign('active_page',$active_page);/*}else{	$template="index.tpl";}*/include_once("footer.php");?>