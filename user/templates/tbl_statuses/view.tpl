{include file="header.tpl"}<div class="wrapper"><h1>{$_lang.tbl_statuses.title}</h1>{if $error_msg}	<center>{$error_msg}</center>{/if}{include file="tbl_statuses/tabs.tpl"}{if $tbl_statusesinfo.status_hidden eq 1}<div class="info">{$_lang.tbl_statuses.info.status_hidden}</div>{/if}<form name="frmupdatetbl_statuses" id="frmupdatetbl_statuses" onsubmit="return validatetbl_statuses();" method="POST" action="{$page_url}" style="{if $isUpdate eq 1}{else}display:none;{/if}">	<input type="hidden" name="status_id" id="status_id" value="{$tbl_statusesinfo.status_id}"/>	<div style="display:none;" class="error" id="status_id_err"></div>	<div class="field-row">		<label for="status_name">{$_lang.tbl_statuses.label.status_name}</label>		<input type="text" name="status_name" id="status_name" value="{$tbl_statusesinfo.status_name}"/>		<div class="error" id="status_name_err"></div>	</div>	<div class="field-row">		<label for="status_desc">{$_lang.tbl_statuses.label.status_desc}</label>		<input type="text" name="status_desc" id="status_desc" value="{$tbl_statusesinfo.status_desc}"/>		<div class="error" id="status_desc_err"></div>	</div>	<div class="field-row">		<label for="status_event">{$_lang.tbl_statuses.label.status_event}</label>		 <select name="status_event" id="status_event" onclick="getAllStatusByEvent(this.value,{$tbl_statusesinfo.status_prev})">            <option value="ORDER" {if $tbl_statusesinfo.status_event eq "ORDER"} selected='selected'{else}disabled="disabled"{/if}>ORDER</option>            <option value="REQUEST" {if $tbl_statusesinfo.status_event eq "REQUEST"} selected='selected'{else}disabled="disabled"{/if}>REQUEST</option>            <option value="TABLE" {if $tbl_statusesinfo.status_event eq "TABLE"} selected='selected'{else}disabled="disabled"{/if}>TABLE</option>            <option value="PROMOTION" {if $tbl_statusesinfo.status_event eq "PROMOTION"} selected='selected'{else}disabled="disabled"{/if}>PROMOTION</option>		</select> 		<div class="error" id="status_event_err"></div>	</div>	<div class="field-row {if $Global_member.member_role_id neq $smarty.const.ROLE_DEV}biz_hidden{/if}">		<label for="status_control">{$_lang.tbl_statuses.label.status_control}</label>        <select name="status_control" id="status_control">             <option value="AUTO" {if $tbl_statusesinfo.status_control eq "AUTO"} selected='selected'{else}disabled="disabled"{/if}>Automatic</option>			 <option value="MANUAL" {if $tbl_statusesinfo.status_control eq "MANUAL"} selected='selected' {/if}>Manual</option>		</select>		<div class="error" id="status_control_err"></div>	</div>	<div class="field-row">		<label for="status_prev">{$_lang.tbl_statuses.label.status_prev}</label>		 		<select name="status_prev" id="status_prev" onchange="populate_next(this.value);">				<option value="">Select Previous Status</option>		{if $tbl_statusesinfo.status_previnfo.status_hidden eq 1}				<option value="{$tbl_statusesinfo.status_prev}" selected='selected'>After {$tbl_statusesinfo.status_previnfo.status_name}</option>		{/if}        {foreach $lst_drpdwn_status as $_status}              <option value="{$_status.status_id}" {if $tbl_statusesinfo.status_prev eq $_status.status_id} selected='selected' {/if}>{$_status.status_name}</option>							        {/foreach}        </select>		<div class="error" id="status_prev_err"></div>	</div>  <div class="field-row">		<label for="tmp_status_next">{$_lang.tbl_statuses.label.status_next}</label>		<div id='div_tmp_status_next' style='font-weight:bold;font-style:Italic;'>{$tbl_statusesinfo.status_nextinfo.status_name}</div>	</div>	   <div class="field-row">	 <label for="status_next_must">{$_lang.tbl_statuses.label.status_next_must}</label>		<Select name="status_next_must" id="status_next_must" onchange="populate_prev_must(this.value);">		<option value="">Select Next Mandatory Status</option>        {foreach $mandatory_list as $_status}              <option value="{$_status.status_id}" {if $tbl_statusesinfo.status_next_must eq $_status.status_id} selected='selected' {/if}>{$_status.status_name}</option>        {/foreach}        </select>		<div class="error" id="status_next_must_err"></div>	</div>	  <div class="field-row">		<label for="tmp_status_prev_must">{$_lang.tbl_statuses.label.status_prev_must}</label>		<div id='div_tmp_status_prev_must' style='font-weight:bold;font-style:Italic;'>{$tbl_statusesinfo.status_prev_must_info.status_name}</div>		<input id="status_prev_must" type="hidden" name="status_prev_must" value="0"/>	</div> 		<div class="field-row" style="display: none;">		<label for="status_next">{$_lang.tbl_statuses.label.status_next}</label>		<input type="hidden" name="status_next" value="{$_status.status_id}" id="status_next"/>		 		<div class="error" id="status_next_err"></div>	</div>	<div class="field-row">		<label for="status_exp_time">{$_lang.tbl_statuses.label.status_exp_time}</label>		<input type="text" name="status_exp_time" id="status_exp_time" value="{$tbl_statusesinfo.status_exp_time}"/>		<div class="error" id="status_exp_time_err"></div>	</div>	<div class="field-row biz_hidden">		<label for="status_color">{$_lang.tbl_statuses.label.status_color}</label>		<input type="text" name="status_color" id="status_color" value="{$tbl_statusesinfo.status_color}"/>		<div class="error" id="status_color_err"></div>	</div>	<div class="field-row {if $Global_member.member_role_id neq $smarty.const.ROLE_DEV}biz_hidden{/if}">		<label for="status_hidden">{$_lang.tbl_statuses.label.status_hidden}</label> 		<!-- <input type="checkbox" id="status_hidden"  name="status_hidden" value="1" {if $tbl_statusesinfo.status_hidden eq 1}checked="checked"{/if}/> -->        <Select id="status_hidden" name="status_hidden" >            <option value="0" {if $tbl_statusesinfo.status_hidden eq 1}selected="selected"{/if}>ADMIN</option>            <option value="1" {if $tbl_statusesinfo.status_hidden eq 1}selected="selected"{/if}>SYSTEM</option>        </select>		<div class="error" id="status_hidden_err"></div>	</div>	    <div class="field-row">        	<label for="status_trigger" class="select ui-select">{$_lang.tbl_statuses.label.status_trigger}</label>            <select id="status_trigger"  name="status_trigger[]" multiple="multiple" data-native-menu="false"> 				<option value="" data-placeholder="true">Choose Role...</option>                {foreach $member_roles as $member_role}                  <option value="{$member_role.member_role_id}" {if in_array($member_role.member_role_id, $tbl_statusesinfo.status_trigger_list)}selected="selected"{/if}>{$member_role.member_role_name}</option>                {/foreach}        </select>		<div class="error" id="status_trigger_err"></div>	</div>	<div class="field-row">		<label for="status_is_optional">		<input type="checkbox" name="status_is_optional" value="1" id="status_is_optional" {if $tbl_statusesinfo.status_is_optional eq 1}checked="checked"{/if}/>{$_lang.tbl_statuses.label.status_is_optional}		</label> 		<div class="error" id="status_is_optional_err"></div>	</div>	<div class="field-row biz_hidden">		<label for="status_restaurant">{$_lang.tbl_statuses.label.status_restaurant}</label>		<input type="text" name="status_restaurant" id="status_restaurant" value="{$tbl_statusesinfo.status_restaurant}"/>		<div class="error" id="status_restaurant_err"></div>	</div>	<!--	<div class="field-row">		<label for="status_start_date">{$_lang.tbl_statuses.label.status_start_date}</label>		<input type="text" name="status_start_date" id="status_start_date" value="{$tbl_statusesinfo.status_start_date}"/>		<div class="error" id="status_start_date_err"></div>	</div>	-->	<!--	<div class="field-row">		<label for="status_end_date">{$_lang.tbl_statuses.label.status_end_date}</label>		<input type="text" name="status_end_date" id="status_end_date" value="{$tbl_statusesinfo.status_end_date}"/>		<div class="error" id="status_end_date_err"></div>	</div>	--><div class="info">{$_lang.tbl_statuses.info.status_control}</div>	<div class="biz_center">	<input type="hidden" id="status_notifier" value="{$tbl_statusesinfo.status_notifier}"/>    <input type="hidden" id="action" name="action" value="{$smarty.const.ACTION_UPDATE}"/>	{*if ( $tbl_statusesinfo.status_control neq "AUTO" && $tbl_statusesinfo.status_restaurant neq $smarty.const.STS_DFLT_RESTAURANT ) OR ($Global_member.member_role_id eq $smarty.const.ROLE_DEV)*}	{if ( $tbl_statusesinfo.status_control neq "AUTO") OR ($Global_member.member_role_id eq $smarty.const.ROLE_DEV)}        <input  data-inline="true" data-icon="save"  type="submit" value="{$_lang.save_lbl}"/>	    {jqmbutton onclick="{if $tbl_statusesinfo.notification_cnt gt 0}$('#popupDelNotifyCnf').popup('open');{else}deletetbl_statuses({$tbl_statusesinfo.status_id});{/if}" type="delete"}	{/if}        <input data-inline="true" data-icon="chat" type="reset" onclick="window.location.href='{$website}/user/tbl_notifications.php?notify_status={$tbl_statusesinfo.status_id}'" value="{$_lang.tbl_notifications.title}"/>        <input data-inline="true" data-icon="delete" type="reset" onclick="window.location.href='{$page_url}?status_event={$status_event}'" value="{$_lang.cancel_lbl}"/>    </div></form><div id="tbl_statuses_view" class="description" style="{if $isUpdate eq 1}display:none;{/if}">	<table class="listTable">		<tr><th class="fieldItem">{$_lang.field_title}</th><th class="valueItem">{$_lang.value_title}</th></tr>		<tr><td class="fieldItem">{$_lang.tbl_statuses.label.status_id}<i>:</i></td><td class="valueItem">{$tbl_statusesinfo.status_id}</td></tr>		<tr><td class="fieldItem">{$_lang.tbl_statuses.label.status_name}<i>:</i></td><td class="valueItem">{$tbl_statusesinfo.status_name}</td></tr>		<tr><td class="fieldItem">{$_lang.tbl_statuses.label.status_desc}<i>:</i></td><td class="valueItem">{$tbl_statusesinfo.status_desc}</td></tr>		<tr><td class="fieldItem">{$_lang.tbl_statuses.label.status_event}<i>:</i></td><td class="valueItem">{$tbl_statusesinfo.status_event}</td></tr>		<tr><td class="fieldItem">{$_lang.tbl_statuses.label.status_control}<i>:</i></td><td class="valueItem">{$tbl_statusesinfo.status_control}</td></tr>		<tr><td class="fieldItem">{$_lang.tbl_statuses.label.status_prev}<i>:</i></td><td class="valueItem">{$tbl_statusesinfo.status_prev}</td></tr>		<tr><td class="fieldItem">{$_lang.tbl_statuses.label.status_next}<i>:</i></td><td class="valueItem">{$tbl_statusesinfo.status_next}</td></tr>		<tr><td class="fieldItem">{$_lang.tbl_statuses.label.status_exp_time}<i>:</i></td><td class="valueItem">{$tbl_statusesinfo.status_exp_time}</td></tr>		<tr><td class="fieldItem">{$_lang.tbl_statuses.label.status_color}<i>:</i></td><td class="valueItem">{$tbl_statusesinfo.status_color}</td></tr>		<tr><td class="fieldItem">{$_lang.tbl_statuses.label.status_hidden}<i>:</i></td><td class="valueItem">{$tbl_statusesinfo.status_hidden}</td></tr>		<tr><td class="fieldItem">{$_lang.tbl_statuses.label.status_restaurant}<i>:</i></td><td class="valueItem">{$tbl_statusesinfo.status_restaurant}</td></tr>	<!--		<tr><td class="fieldItem">{$_lang.tbl_statuses.label.status_start_date}<i>:</i></td><td class="valueItem">{$tbl_statusesinfo.status_start_date}</td></tr>	-->	<!--		<tr><td class="fieldItem">{$_lang.tbl_statuses.label.status_end_date}<i>:</i></td><td class="valueItem">{$tbl_statusesinfo.status_end_date}</td></tr>	-->	<tr><td class="fieldItem">{$_lang.tbl_statuses.label.isActive}<i>:</i></td><td class="valueItem">{if $tbl_statusesinfo.isActive eq 1}{$_lang.tbl_statuses.label.isActive_yes}{else}{$_lang.tbl_statuses.label.isActive_no}{/if}</td></tr>	</table>	<div class="biz_center">  	<input data-inline="true" data-icon="edit" type="button" value="{$_lang.tbl_statuses.UPDATE.BTN_LBL}" onclick="$('#tbl_statuses_view').hide();$('#frmupdatetbl_statuses').show();"/><input type="button" value="{$_lang.cancel_lbl}" data-inline="true" data-icon="delete" onclick="window.location.href='{$page_url}'"/></div></div><div data-role="popup" id="popupDelNotifyCnf" data-theme="a" data-overlay-theme="g" style="width:270px;">	<div data-role="header">		<h1>Transfer Notification</h1>	</div>	<div data-role="content" style="padding:5px;"> 		<div class="description"><p>There are notification associated with this status.To maintain the process flow you can transfer those notification to any of the statuses or you can click no thanks if you don't need them any more.</p></div> 		<br/>			<label>Transfer Status</label>			<select name="transfer_status" id="transfer_status">				<option value="">Select Status</option>				{foreach $lst_drpdwn_status as $status}				{if $status.status_id neq $tbl_statusesinfo.status_id}				<option value="{$status.status_id}">{$status.status_name}</option>				{/if}				{/foreach}			</select> 			<span class="error" id="transfer_status_err"></span> 				<div class="biz_center">			{jqmbutton onclick="transferNotify({$tbl_statusesinfo.status_id},1);" value="Transfer"}			{jqmbutton onclick="transferNotify({$tbl_statusesinfo.status_id},0);" value="No Thanks"}		</div>	</div>	</div>{include file="tbl_statuses/js.tpl"}</div>{include file="footer.tpl"}