{literal}<script type="text/javascript">function populate_next(curr_prev_sel){    //alert(curr_prev_sel);     //$('#tmp_status_next').html(curr_prev_sel);	var info = {};	info['action']  = 'getNextOfSelNode';	info['var1'] = curr_prev_sel;	ajaxian(info,function(response){        if(response){           // alert(response.status_name);            $('#div_tmp_status_next').html(response.status_name).trigger('refresh');            $('#status_notifier').val(response.status_notifier);         }else{            $('#div_tmp_status_next').html('--').trigger('refresh');            $('#status_notifier').val('');         }	});}function populate_prev_must(curr_next_must){     	var info = {};	info['action']  = 'getPrevMustOfSelNode';	info['var1'] = curr_next_must;	ajaxian(info,function(response){        if(response){           // alert(response.status_name);            $('#div_tmp_status_prev_must').html(response.status_name).trigger('refresh');            $('#status_prev_must').val(response.status_id);         }else{            $('#div_tmp_status_prev_must').html('--').trigger('refresh');            $('#status_prev_must').val('');         }	});}function getErrMsg(){	var str = "{/literal}{$_lang.tbl_statuses.info.trigger_mismatch}{literal}";	var sts_name =  elemById('status_name').value; 	str = sprintf(str,sts_name,sts_name);	return str;}function chkStatusNotification(){    /*var str = $('#status_notifier').val();    if(str){      var arr = biz_explode(',',str);      var arrCnt = notFndCnt = arr.length;       //alert(arr[0]+'---'+arr[1]);      $( "#status_trigger option:selected" ).each(function() {             //alert(arr.indexOf(trim($(this).val())));             if(arr.indexOf(trim($(this).val())) != -1){               //alert( '===ssd==='+notFndCnt);               notFndCnt--;            }      });      if(notFndCnt > 0){         return false;      }     }*/   return true;} function changeTab(tab,isEdit){	if(isEdit){		if(confirm('Would you like to save the changes made?')==false){			window.location.href='{/literal}{$website}{literal}/user/tbl_statuses.php?status_event='+ tab;		}	}else{		window.location.href='{/literal}{$website}{literal}/user/tbl_statuses.php?status_event='+ tab;	}	 return false;}function transferNotify(varId,istransfer){  $('#transfer_status_err').html('');	if(istransfer){				var isErr = true;		transfer_status = 0; 		 		if(IsNonEmpty(elemById("transfer_status").value)==false){			$("#transfer_status_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_id}{literal}");			isErr = false;		}else{			transfer_status = elemById("transfer_status").value;		} 		if(isErr){			deletetbl_statuses(varId,transfer_status);		}else{				alert("{/literal}{$_lang.messages.revise_form}{literal}");		} 	}else{		deletetbl_statuses(varId,0);	}	}function deletetbl_statuses(varId,transfer_status){	if(transfer_status){		transfer_status = transfer_status;	}else{		transfer_status = 0;	}	if(varId > 0){		if(confirm("{/literal}{$_lang.tbl_statuses.DELETE.CONFIRM_MSG}{literal}")==true){			var info ={};			info['action'] 					= 'delete';			info['status_id'] 			= varId;			info['transfer_status'] = transfer_status;			postForm(info,"{/literal}{$website}/user/tbl_statuses.php{literal}"); 		}	}}function getAllStatusByEvent(event,prm){	var objcmb = $('#status_prev'); 	objcmb.empty();	if(IsNonEmpty(event)){		var info = {};		info['action']  = 'getAllStatusByEvent';		info['var2'] = event; 		if(event == 'TABLE'){ 		 event = 	"'TABLE','ORDER'";		}else if(event == 'ORDER'){ 		 event = 	"'TABLE','ORDER'";		}else{ 		 event = 	"'"+event+"'";		}		info['var1'] = event;				ajaxian(info,function(response){			  				$('<option value="">Select Previous Status</option>').appendTo(objcmb); 				for(i in response){				   if(prm  == i){				   	$('<option value="'+ response[i].status_id +'" selected="selected">After '+ response[i].status_name +'</option>').appendTo(objcmb); 				   }else{				   	$('<option value="'+ response[i].status_id +'">After '+ response[i].status_name +'</option>').appendTo(objcmb); 				   } 			  }		});	}else{		$('<option value="">Select Previous Status</option>').appendTo(objcmb); 	}	objcmb.selectmenu('refresh');}function validatetbl_statuses(){	 	$("#status_id_err").html("");	$("#status_name_err").html("");	$("#status_desc_err").html("");	$("#status_event_err").html("");	$("#status_control_err").html("");	$("#status_prev_err").html("");	$("#status_exp_time_err").html("");	/*$("#status_next_err").html("");	$("#status_color_err").html("");*/	$("#status_hidden_err").html("");	$("#status_restaurant_err").html("");	$("#status_start_date_err").html("");	$("#status_end_date_err").html("");		$("#status_trigger_err").html(""); 	var isErr = true;	if(elemById("action").value=="update"){		if(IsNonEmpty(elemById("status_id").value)==false){			$("#status_id_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_id}{literal}");			isErr = false;		}	}	if(IsNonEmpty(elemById("status_name").value)==false){		$("#status_name_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_name}{literal}");		isErr = false;	}	if(IsNonEmpty(elemById("status_desc").value)==false){		$("#status_desc_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_desc}{literal}");		isErr = false;	}	if(IsNonEmpty(elemById("status_event").value)==false){		$("#status_event_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_event}{literal}");		isErr = false;	}	if(IsNonEmpty(elemById("status_control").value)==false){		$("#status_control_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_control}{literal}");		isErr = false;	} {/literal} {if $Global_member.member_role_id neq $smarty.const.ROLE_DEV} {literal}	if(IsNonEmpty(elemById("status_prev").value)==false){		$("#status_prev_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_prev}{literal}");		isErr = false;	}	{/literal} {/if} {literal} 	 	if(IsNonEmpty(elemById("status_trigger").value)==false){		$("#status_trigger_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_trigger}{literal}");		isErr = false;	}else{				         if(chkStatusNotification()==false){			st_err = getErrMsg();            $("#status_trigger_err").html(st_err).trigger('refresh');		  	isErr = false;        }    }	/*if(IsNonEmpty(elemById("status_next").value)==false){		$("#status_next_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_next}{literal}");		isErr = false;	}*/	if(IsNonEmpty(elemById("status_exp_time").value)==false){		$("#status_exp_time_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_exp_time}{literal}");		isErr = false;	}	/*if(IsNonEmpty(elemById("status_color").value)==false){		$("#status_color_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_color}{literal}");		isErr = false;	}*/	if(IsNonEmpty(elemById("status_hidden").value)==false){		$("#status_hidden_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_hidden}{literal}");		isErr = false;	}	if(IsNonEmpty(elemById("status_restaurant").value)==false){		$("#status_restaurant_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_restaurant}{literal}");		isErr = false;	}	 /*	if(IsNonEmpty(elemById("status_start_date").value)==false){		$("#status_start_date_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_start_date}{literal}");		isErr = false;	}*//*	if(IsNonEmpty(elemById("status_end_date").value)==false){		$("#status_end_date_err").html("{/literal}{$_lang.tbl_statuses.not_empty_msg.status_end_date}{literal}");		isErr = false;	}*/ 	if(isErr == false){		alert("{/literal}{$_lang.messages.revise_form}{literal}");	}	return isErr;}//..function</script>{/literal}