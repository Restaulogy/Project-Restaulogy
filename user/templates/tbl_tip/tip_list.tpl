{include file='header.tpl'}<div class="wrapper">{include file="tbl_tip/tabs.tpl"}<a href="#" onclick="$('#tbl_filter').toggle();" data-role="button" data-inline="true" data-transition="pop" data-icon="search" data-iconpos="notext"  data-theme="b" style="float:right;">Search</a><h1>Tip Search</h1><!-- Date Range --> <form method="POST" id="search_tip_list" action="{$website}/user/tbl_tip_list.php"><div style="width:99%;padding:5px;border-bottom:1px dotted #ccc;font-style: italic;"><span class="info">Search results &laquo; </span><span class="notice">{$filter_text}</span><span class="info">&raquo;</span></div><br><table id='tbl_filter' class="listTable" style="display: none;">		<tr>		<th colspan="3">Search</th>  	</tr>	<tr class="no_border">		<td>			<label>From Date</label>							<input type="text" id="from_date" name="from_date" value="{$frm_dt|date_format:$smarty.const.HTML5_DAY_FORMAT}" placeholder="From" readonly="readonly">						</td>		<td >&nbsp;</td>					<td>				<label>To Date</label>						 <input type="text" id="to_date" name="to_date" value="{$to_dt|date_format:$smarty.const.HTML5_DAY_FORMAT}" placeholder="From" readonly="readonly">		</td>	</tr>	<tr class="no_border">		<td>			<label>Type</label>							<select name="type" id="type" onchange="change_field(this.value);">				<option value="server" {if $type eq 'server'}selected="selected"{/if}>Employee</option>				<option value="table" {if $type eq 'table'}selected="selected"{/if}>Table</option>			</select>						</td>		<td >&nbsp;</td>					<td>	 			<label>Particular</label>		<div id="employee_holder" {if $type eq 'server'}{else}style="display: none;"{/if}>						 <select name="employee" id="employee" >				<option value="">Select Employee</option>				{foreach $employeelist as $employee}				<option value="{$employee@key}" {if $smarty.request.employee eq $employee@key}selected="selected"{/if}>{$employee}</option>				{/foreach}			</select>			</div>		<div id="table_holder" {if $type eq 'table'}{else}style="display: none;"{/if}>				<select name="table" id="table" >				<option value="">Select Table</option>				{foreach $tablelist as $table}				<option value="{$table@key}"  {if $smarty.request.table eq $table@key}selected="selected"{/if}>{$table}</option>				{/foreach}			</select>				</div>		</td>	</tr>	<tr>		<td colspan="3" class="biz_center">		  {if $type eq 'table'}				{html_input type="hidden" name="is_distribution" value="0"}			{else}				{html_input type="hidden" name="is_distribution" value="1"}			{/if}			<input data-inline="true"  type="button" onclick="search_submit(0);" value="Show tip collected" data-icon="search"/>			<span id="distribution_btn" {if $type eq 'table'}style="display:none;"{/if}>				<input data-inline="true"  type="button" onclick="search_submit(1);" value="Show tip reports" data-icon="search"/>			</span> 		</td> 	</tr>	 </table> </form> {if $tip_list}  {if $is_distribution gt 0} 	<table class="biz_data_grid">		<tr>			<th>Period</th> 			<th style="text-align: right !important;">Amount</th> 		</tr> 	 {foreach $tip_list as $report}	 		<tr class="customers">				 <td colspan="2" class="biz_center no_hover">				 	<strong>{$report.title}</strong>				 </td>			</tr> 			{assign var=person_tot value="0"}			{foreach $report.period as $period} 				<tr class="{cycle values="odd,even"}"> 						<td class="no_hover">{$period@key}</td>						<td class="no_hover" style="text-align: right !important;">{$period|string_format:"%.2f"}{math assign=person_tot equation='x + y' x=$person_tot y=$period }</td> 				</tr>  		  {/foreach}			<tr>				<th>Total</th>				<th style="text-align:right !important;">{$person_tot|string_format:"%.2f"}</th>			</tr>	 {/foreach}	 </table> {else}  <table class="biz_data_grid"> <thead>	<tr>		<!--<th>{if $type eq 'table'}Table{else}Employee{/if}</th>-->		<th>Date</th> 			<th style="text-align:right !important;">Morning</th>			<th style="text-align:right !important;">Afternoon</th>			<th style="text-align:right !important;">Night</th>	</tr>		  </thead> <tbody> 		{assign var="grp_header" value=""} 		{assign var=grd_tot value=0}		{assign var=tot value=0} 		{assign var=shift1_tot value=0}		{assign var=shift2_tot value=0}		{assign var=shift3_tot value=0}			 {foreach from=$tip_list item=emp_list}			{foreach $emp_list as $lst}				 {if $type eq 'table'}			{assign var="fld_val" value=$lst.table_number} 	 {else}			{assign var="fld_val" value=$lst.employee_name}	 {/if}	 	 {if $grp_header neq $fld_val}	 	{if $tot gt 0}			<tr>							<th>Total</th>							<th style="text-align:right !important;">{$shift1_tot|string_format:"%.2f"}</th>				<th style="text-align:right !important;">{$shift2_tot|string_format:"%.2f"}</th>				<th style="text-align:right !important;">{$shift3_tot|string_format:"%.2f"}</th>	 			</tr>			{/if}				<tr class="customers">							<td  class="no_hover biz_center" colspan="4">		 						<strong>[ {$fld_val} ]</strong>	 				</td>					 			</tr>								 {assign var="tot" value=0}		 {assign var=shift1_tot value=0}		 {assign var=shift2_tot value=0}	   {assign var=shift3_tot value=0}			{/if}			{if $type eq 'table'}			{assign var="grp_header" value=$lst.table_number} 		{else}			{assign var="grp_header" value=$lst.employee_name}		{/if}		<tr class="{cycle values="odd,even"}">			<!--<td style="width:20% !important;">								<strong style="color:GREEN;">					{$fld_val}				</strong>							</td>-->			<td class="no_hover"><strong style="color:GREEN;">{$lst.order_date|date_format:$smarty.const.HTML5_DAY_FORMAT}</strong></td>				 			{for $shift=1 to 3}			<td class="no_hover" style="text-align:right !important;">  					{if $lst.shift[$shift]}						{$lst.shift[$shift]}												{if $shift eq 1}							{math assign="shift1_tot" equation="x + y" x=$shift1_tot y=$lst.shift[$shift]}						{else if $shift eq 2}							{math assign="shift2_tot" equation="x + y" x=$shift2_tot y=$lst.shift[$shift]}						{else if $shift eq 3}							{math assign="shift3_tot" equation="x + y" x=$shift3_tot y=$lst.shift[$shift]}						{/if}								{math assign="tot" equation="x + y" x=$tot y=$lst.shift[$shift]}									{else}--{/if}				 					</td>			 {/for}			 		</tr>		{/foreach}	 {/foreach}		 	<tr>					<th>Total</th>					 				<th style="text-align:right !important;">{$shift1_tot|string_format:"%.2f"}</th>							<th  style="text-align:right !important;">{$shift2_tot|string_format:"%.2f"}</th>		<th  style="text-align:right !important;">{$shift3_tot|string_format:"%.2f"}</th>	</tr>			 </tbody> </table> {/if} 	{else}		<div class="error">No records found.</div>	{/if}  </div>{include file="footercontent.tpl"}{include file="tbl_tip/js.tpl"}</body></html>