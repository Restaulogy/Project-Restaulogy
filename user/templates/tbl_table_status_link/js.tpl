<a id="lnkpopupPendingRequest" href="#popupTablePendingRequest" data-rel="popup" data-position-to="window" data-transition="slideup"  data-role="button" data-inline="true" data-transition="pop" data-icon="delete" data-theme="b" style="display:none;">{$_lang.services_requests.pending_request.title}</a>	<div data-role="popup" id="popupTablePendingRequest" data-overlay-theme="g" data-theme="a1" style="min-width:300px;">         <h1>{$_lang.services_requests.pending_request.title}</h1>    	<div style="max-height:200px !important;overflow-y:auto !important;">		<table id="reqstTable" class="biz_data_grid">			<tr> 				 <th style="width:20px;">#</th>				 <th style="width:60px;">Table</th>				 <th style="width:140px;" >Service Request</th>				 <th style="width:80px;">Posted</th>  			</tr>		<tbody id="tbodyid">					</tbody>		</table>		</div>        <a href="#" data-role="button" data-inline="true" onclick="cancelTablesPendingReqst();" data-theme="b">{$_lang.services_requests.pending_request.cancel_all_btn}</a>		 		<a href="#" data-role="button" data-inline="true" onclick="frmSubmit();"  data-theme="b">{$_lang.no_thanks_lbl}</a>		<input type="hidden" id="newfrm" value=""/>    </div> 	<a id="lnkpopupOrders" href="#popupOrders" data-rel="popup" data-position-to="window" data-transition="slideup"  style="display:none;">{$_lang.services_requests.pending_request.title}</a>	<div data-role="popup" id="popupOrders" data-overlay-theme="g" data-dismissible="false" data-theme="a1" style="width:270px;">	<div data-role="header">		<h1 id="txtOrderHolder"></h1>	</div>	<div data-role="content">		<table id="orderTable" class="biz_data_grid">			<tr> 				 <th style="width:20px;">#</th>				 <th style="width:50px;">Session</th>				 <th style="width:50px;">Created By</th>				 <th style="width:80px;" >Server</th>				 <th style="width:70px;" >Posted</th> 			</tr>		<tbody id="tbodyid">					</tbody>		</table>		<input type="hidden" id="popup_order_table_id" value="0"/>		<div class="biz_center biz_hidden" id="btnConfirmOrder">						<input type="button" data-inline="true" onclick="mkconfirmOrder(1);" data-theme="b" value="Confirm All"/>			<input type="button" data-inline="true" onclick="mkconfirmOrder(-1);" data-theme="b" value="Cancel All"/>			 		</div>		<div class="biz_center biz_hidden" id="btnUnPaidOrder">		<div class="notice">You cannot make status as 'Check-Paid' unless all orders are paid.</div>		<input type="button" data-inline="true" onclick="window.open('{$website}/user/tbl_orders.php');" data-theme="b" value="All Orders"/>		<a data-role="button" data-inline="true" data-rel="back" data-theme="b">{$_lang.close_lbl}</a>		</div>	</div>	</div> {literal} <script type="text/javascript">function resetAllTables(){  	postForm({'action':'{/literal}{$smarty.const.ACTION_RESET}{literal}'}, "{/literal}{$website}/user/tbl_table_status_link.php?latestOnly=1{literal}");}function resetthisTable(table_id){	postForm({'action':'{/literal}{$smarty.const.ACTION_RESET}{literal}','tbl_reset_table':table_id}, "{/literal}{$website}/user/tbl_table_status_link.php?latestOnly=1{literal}");}function frmSubmit(){ if(document.getElementById('newfrm').value != ""){     	document.getElementById(document.getElementById('newfrm').value).submit(); }else{ 	if(validatetbl_table_status_link()){		document.forms.frmcreatetbl_table_status_link.submit(); 	} }  return true;}function mkconfirmOrder(isCancel){table_id = $('#popup_order_table_id').val();if( table_id > 0 && IsNonEmpty(isCancel)){ 	$.ajax({     	    type     : "POST",	    url      : "{/literal}{$website}{literal}/ajax/custom_functions.php" ,	    data     : {'action':'getNonConfirmedOrders','var1':table_id,'var2':isCancel},	    dataType : "json",		async	 : false,	    success  : function(data) {		 			if(data){  					  $('#frmChangeRequestStage').submit();					}  		 	},		error : function (objResponse){			alert(objResponse.responseText);		}	 }); 	  }else{	alert('Please Select Table');}	 } function checkforUnPaidOrders(table_id){	$.ajax({     	    type     : "POST",	    url      : "{/literal}{$website}{literal}/ajax/custom_functions.php" ,	    data     : {'action':'getUnPaidOrders','var1':table_id},	    dataType : "json",		async	 : false,	    success  : function(data) {		 			if(data){ 					  var holder =	$("#orderTable"); 					  $('#popup_order_table_id').val(table_id);					  $("#orderTable tr:not(:first-child)").remove();					  	cnt = 1;					 	strOp = "";					 $.each(data, function(index, result) { 					 	strOp = "";  						strOp  = strOp  + "<tr class='" + ((cnt%2==0)?'even':'odd') + "' onclick=\"window.open('"+ website +"/user/tbl_orders.php?{/literal}{$smarty.const.MODE_TITLE}={$smarty.const.MODE_VIEW}&order_id={literal}"+ result['order_id'] +"');\">";						strOp  = strOp  + "<td><b>" + cnt + "</b></td><td>" + result['order_session_id']+ "</td><td>" + result['order_customer_name']+ " </td><td>" + result['server']+ "</td> <td>"+  result['friendly_created_on'] + "</td>";						strOp  = strOp  + "</tr>";					 	cnt++; 					}); 				 					 if(cnt > 1){ 						 $(strOp).appendTo(holder);						 holder.show();						 holder.trigger('refresh'); 						$('#txtOrderHolder').html('Unpaid Orders').trigger('refresh'); 						$('#btnConfirmOrder').addClass('biz_hidden').trigger('refresh');  						$('#btnUnPaidOrder').removeClass('biz_hidden').trigger('refresh');					  $('#lnkpopupOrders').trigger('click');   					 }else{ 					    $('#frmChangeRequestStage').submit();					 					 }  					}else{					  $('#frmChangeRequestStage').submit();				 }  		 	},		error : function (objResponse){			alert(objResponse.responseText);		}	 }); }  function checkforconfirmOrder(table_id){			$.ajax({     	    type     : "POST",	    url      : "{/literal}{$website}{literal}/ajax/custom_functions.php" ,	    data     : {'action':'getNonConfirmedOrders','var1':table_id},	    dataType : "json",		async	 : false,	    success  : function(data) {		 			if(data){ 					  var holder =	$("#orderTable"); 					  $('#popup_order_table_id').val(table_id);					  $("#orderTable tr:not(:first-child)").remove();					  	cnt = 1;					 	strOp = "";					 $.each(data, function(index, result) { 					 	strOp = "";  						strOp  = strOp  + "<tr class='" + ((cnt%2==0)?'even':'odd') + "' onclick=\"window.open('"+ website +"/user/tbl_orders.php?{/literal}{$smarty.const.MODE_TITLE}={$smarty.const.MODE_VIEW}&order_id={literal}"+ result['order_id'] +"');\">";						strOp  = strOp  + "<td><b>" + cnt + "</b></td><td>" + result['order_session_id']+ "</td><td>" + result['order_customer_name']+ " </td><td>" + result['server']+ "</td> <td>"+  result['friendly_created_on'] + "</td>";						strOp  = strOp  + "</tr>";					 	cnt++; 					}); 				 					 if(cnt > 1){ 						 $(strOp).appendTo(holder);						 holder.show();						 holder.trigger('refresh'); 						$('#txtOrderHolder').html('Non-Confirmed Orders').trigger('refresh');						$('#btnConfirmOrder').removeClass('biz_hidden').trigger('refresh');  						$('#btnUnPaidOrder').addClass('biz_hidden').trigger('refresh');					  $('#lnkpopupOrders').trigger('click');   					 }else{ 					    $('#frmChangeRequestStage').submit();					 					 }  					}else{					  $('#frmChangeRequestStage').submit();				 }  		 	},		error : function (objResponse){			alert(objResponse.responseText);		}	 }); 	 return true; } function checkforcleaning(){  	var status_id = $('#tbl_sts_lnk_status_id').val();	if(status_id == "{/literal}{$smarty.const.TBL_STATUS_AVAILABLE}{literal}"){	 			tablesPendingReqst(); 	}else{		frmSubmit();	}    return true;}function tablesPendingReqst(frmtosubmit,table_id){if(table_id > 0){ 	$('#tbl_sts_lnk_table_id').val(table_id);	document.getElementById('newfrm').value = frmtosubmit;}else{	 table_id = $('#tbl_sts_lnk_table_id').val();}   if(table_id > 0){ 	 $.ajax({     	    type     : "POST",	    url      : "{/literal}{$website}{literal}/ajax/tablesPendingReqst.php" ,	    data     : {'action':'info','table_id':table_id},	    dataType : "json",		async	 : false,	    success  : function(data) {		 			if(data){ 					  var holder =	$("#reqstTable"); 					  					  $("#reqstTable tr:not(:first-child)").remove();					  	cnt = 1;					 	strOp = "";					 $.each(data, function(index, request) { 					 	strOp = "";  						strOp  = strOp  + "<tr class='" + ((cnt%2==0)?'even':'odd') + "'>";						strOp  = strOp  + "<td><b>" + cnt + "</b></td><td>" + request['table']['number']+ " </td><td>" + request['service']['name']+ "</td> <td>"+  request['friendly_created_on'] + "</td>";						strOp  = strOp  + "</tr>";					 	cnt++; 					}); 					 if(cnt > 1){ 						 $(strOp).appendTo(holder);						 holder.show();						 holder.trigger('refresh'); 					  	 $('#popupTablePendingRequest').trigger('refresh');  					  	 $('#lnkpopupPendingRequest').trigger('click');     					 }else{ 					    frmSubmit();					 					 }  					}else{					$('#pendingRequests').html("<div class='error'>{/literal}{$_lang.services_requests.pending_request.no_record_msg}{literal}</div>");				}  		 	},		error : function (objResponse){			alert(objResponse.responseText);		}	 });  }   return true;	  }function cancelTablesPendingReqst(){var table_id = $('#tbl_sts_lnk_table_id').val();  if(is_gt_zero_num(table_id)){ 	 $.ajax({     	    type     : "POST",	    url      : "{/literal}{$website}{literal}/ajax/tablesPendingReqst.php" ,	    data     : {'action':'cancel','table_id':table_id},	    dataType : "json",		async	 : false,	    success  : function(data) {		 			if(data){ 						alert("successfully cancelled"); 						frmSubmit();					}else{					 	alert("Error Occured");					}  		 	},		error : function (objResponse){			alert(objResponse.responseText);		}	 });  }  return true; 	  } function comparedate(){		var isErr = true;		$(".error").html("");		var compare_date = 0;		if(IsNonEmpty(elemById("fts_start_date").value)==false){			/*$("#fts_start_date_err").html("{/literal}{$_lang.messages.validation.not_empty|sprintf:'Start Date'}{literal}");			isErr = false;*/			compare_date = 0;			}		if(IsNonEmpty(elemById("fts_end_date").value)==false){			/*$("#fts_end_date_err").html("{/literal}{$_lang.messages.validation.not_empty|sprintf:'End Date'}{literal}");			isErr = false;*/			compare_date = 0;		}else{			if(new Date(elemById("fts_end_date").value).getTime()  < new Date(elemById("fts_start_date").value).getTime()){				$("#fts_end_date_err").html("{/literal}{$_lang.messages.validation.gt_others_date|sprintf:'End Date':'Start Date'}{literal}");				isErr = false;			}		}				if(isErr == false){			alert("{/literal}{$_lang.messages.revise_form}{literal}");		}		return isErr;		}function deletetbl_table_status_link(varId){	if(varId > 0){		if(confirm("{/literal}{$_lang.tbl_table_status_link.DELETE.CONFIRM_MSG}{literal}")==true){			window.location.href="{/literal}{$page_url}{literal}?action=delete&tbl_sts_lnk_id="+varId;		}	}	 return true;}function validatetbl_table_status_link(){	$("#tbl_sts_lnk_id_err").html("");	$("#tbl_sts_lnk_table_id_err").html("");	$("#tbl_sts_lnk_cust_id_err").html("");	$("#tbl_sts_lnk_status_id_err").html("");	$("#tbl_sts_lnk_emp_id_err").html("");	$("#tbl_sts_lnk_start_time_err").html("");	$("#tbl_sts_lnk_end_time_err").html("");	var isErr = true;	if(elemById("action").value=="update"){		if(IsNonEmpty(elemById("tbl_sts_lnk_id").value)==false){			$("#tbl_sts_lnk_id_err").html("{/literal}{$_lang.tbl_table_status_link.not_empty_msg.tbl_sts_lnk_id}{literal}");			isErr = false;		}	}	if(IsNonEmpty(elemById("tbl_sts_lnk_table_id").value)==false){		$("#tbl_sts_lnk_table_id_err").html("{/literal}{$_lang.tbl_table_status_link.not_empty_msg.tbl_sts_lnk_table_id}{literal}");		isErr = false;	}		if(is_gt_zero_num(elemById("tbl_sts_lnk_party_size").value)==false){		$("#tbl_sts_lnk_party_size_err").html("{/literal}{$_lang.messages.validation.is_gt_zero_num}{literal}");		isErr = false;	} 	/*if(IsNonEmpty(elemById("tbl_sts_lnk_cust_id").value)==false){		$("#tbl_sts_lnk_cust_id_err").html("{/literal}{$_lang.tbl_table_status_link.not_empty_msg.tbl_sts_lnk_cust_id}{literal}");		isErr = false;	}else{		if(isEmail(elemById("tbl_sts_lnk_cust_id").value)==false){			$("#tbl_sts_lnk_cust_id_err").html("{/literal}{$_lang.messages.validation.email}{literal}");			isErr = false;		}	}*/ 	if(IsNonEmpty(elemById("tbl_sts_lnk_status_id").value)==false){		$("#tbl_sts_lnk_status_id_err").html("{/literal}{$_lang.tbl_table_status_link.not_empty_msg.tbl_sts_lnk_status_id}{literal}");		isErr = false;	} /*if(IsNonEmpty(elemById("tbl_sts_lnk_emp_id").value)==false){		$("#tbl_sts_lnk_emp_id_err").html("{/literal}{$_lang.tbl_table_status_link.not_empty_msg.tbl_sts_lnk_emp_id}{literal}");		isErr = false;	}	if(IsNonEmpty(elemById("tbl_sts_lnk_start_time").value)==false){		$("#tbl_sts_lnk_start_time_err").html("{/literal}{$_lang.tbl_table_status_link.not_empty_msg.tbl_sts_lnk_start_time}{literal}");		isErr = false;	}	if(IsNonEmpty(elemById("tbl_sts_lnk_end_time").value)==false){		$("#tbl_sts_lnk_end_time_err").html("{/literal}{$_lang.tbl_table_status_link.not_empty_msg.tbl_sts_lnk_end_time}{literal}");		isErr = false;	}*/	if(isErr == false){		alert("{/literal}{$_lang.messages.revise_form}{literal}");	}	return isErr;}//..function</script>{/literal}