{include file='header.tpl'}<div class="wrapper"><h1>{$_lang.tbl_emp_shift_assignment.table_title}<a href="#" data-role='button' data-iconpos="notext" data-inline='true' data-icon='search' class="fright" onclick="$('#tbl_filter').toggle();">{$_lang.tbl_emp_shift_assignment.filter}</a></h1>{if $error_msg}	<center>{$error_msg}</center>{/if}{if $smarty.request[$smarty.const.MODE_TITLE] eq $smarty.const.MODE_UPDATE}	{include file="tbl_emp_shift_assignment/tabs.tpl"}{else}	{include file="tbl_emp_shift_assignment/tbl_tabs.tpl"}{/if}<!-- cancel employee shifts --><div data-role='controlgroup' data-type='horizontal' style="display: none;">	<a href="#" data-role='button' data-inline='true' data-icon='search' onclick="$('#tbl_filter').toggle();">{$_lang.tbl_emp_shift_assignment.filter}</a>	<a href="#" data-role='button' data-inline='true' data-icon='flag' onclick="$('#tbl_legend').toggle();">{$_lang.tbl_emp_shift_assignment.legend}</a>	{if $smarty.request[$smarty.const.MODE_TITLE] eq $smarty.const.MODE_UPDATE}		<a href="#" data-role='button' data-inline='true' data-icon='delete' onclick="$('#tbl_emp_cancel_sec').toggle();">{$_lang.tbl_emp_shift_assignment.CANCEL.BTN_LBL}</a>	{/if}</div><table id='tbl_legend' class="listTable" style="display:none;" >	<tr>		<th>{$_lang.tbl_emp_shift_assignment.legend}</th>			</tr>		<tr>				<td class="fieldItem">			<span class="ui-icon ui-icon-add-item">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> {$_lang.tbl_emp_shift_assignment.assign_emp_tables}		</td>				</tr>		</table><table id='tbl_emp_cancel_sec' class="listTable" style="display: none;" >	<tr>		<th>Cancel Employee Shifts</th> 		<th>&nbsp;</th>			</tr>	<tr class="no_border">		<td>			<select name="emp_to_cancle_sft" id="emp_to_cancle_sft" >				<option value="">{$_lang.tbl_emp_shift_assignment.select} {$_lang.tbl_emp_shift_assignment.shift}</option>				 {if $emp_lst}					{foreach $emp_lst as $emp}						<option value="{$emp@key}">{$emp.employee_name}</option>					{/foreach}				{/if}  			</select> 		</td>		<td>			<input data-inline="true" onclick='cancel_emp_shifts();' type="button" value="{$_lang.tbl_emp_shift_assignment.CANCEL.BTN_LBL}" data-icon="delete"/>		</td>	</tr>	</table><!-- <form method="GET" action="{$website}/user/tbl_table_shift_assignment.php"> <table id='tbl_filter' class="listTable" >	<tr>		<th>{$_lang.tbl_emp_shift_assignment.dt}</th> 		<th>&nbsp;</th>		<th style="display: none;">{$_lang.tbl_emp_shift_assignment.shift}</th> 		<th>&nbsp;</th> 	</tr>	<tr class="no_border">		<td>							<input type="text" id="emp_sft_date" name="emp_sft_date" value="{$emp_sft_date|date_format:$smarty.const.HTML5_DAY_FORMAT}" placeholder="From" readonly="readonly">						</td>		<td >&nbsp;</td>					<td style="display: none;">						<select name="emp_sft_shift" id="emp_sft_shift" >				<option value="">Select Shift</option>				 {if $shifts}					{foreach $shifts as $shift}						<option value="{$shift.shift_id}" {if $emp_sft_shift eq $shift.shift_id}selected="selected"{/if}>{$shift.shift_name}</option>					{/foreach}				{/if}  			</select> 		</td>		<td>			<input data-inline="true" type="submit" value="{$_lang.tbl_emp_shift_assignment.set}" data-icon="save"/>		</td>				</tr>	</table> </form>-->	<!-- Date Range --><form method="POST" action="{$website}/user/tbl_table_shift_assignment.php" onclick="return validDtRange('emp_sft_from_dt','emp_sft_to_dt');"> <table id='tbl_filter' class="listTable" >	<tr><th colspan="3">Filter</th></tr>	<tr>		<td>Start Date</td> 		<td>&nbsp;</td>		<td>End Date</td>  	</tr>	<tr class="no_border">		<td>							<input type="text" id="emp_sft_from_dt" name="emp_sft_from_dt" value="{$smarty.request.emp_sft_from_dt|date_format:$smarty.const.HTML5_DAY_FORMAT}" placeholder=" From" readonly="readonly"/>						</td>		<td >&nbsp;</td>					<td>							<input type="text" id="emp_sft_to_dt" name="emp_sft_to_dt" value="{$smarty.request.emp_sft_to_dt|date_format:$smarty.const.HTML5_DAY_FORMAT}" placeholder=" To" readonly="readonly"/>						</td> 			</tr>		<tr>		<td>Server</td> 		<td>&nbsp;</td>		<td>Shift</td>  	</tr>	<tr class="no_border">		<td>							 <select name="employee" id="employee">					<option>Select Server</option>				 {foreach $employeelist as $emp} 						<option value="{$emp@key}" {if $smarty.request.employee eq $emp@key}selected="selected"{/if}>{$emp}</option>		 {/foreach}			</select>						</td>		<td>&nbsp;</td>					<td>							<select name="shift" id="shift">				<option>Select shift</option>			 {foreach $shiftlist as $sft} 				<option value="{$sft@key}" {if $smarty.request.shift eq $sft@key}selected="selected"{/if}>{$sft}</option>			 {/foreach}			</select>   		</td> 			</tr>	<tr>				<td colspan="3" class="biz_center">			<input type="hidden" name="{$smarty.const.MODE_TITLE}" value="{$smarty.request[$smarty.const.MODE_TITLE]}"/>			<input data-inline="true" type="submit" value="{$_lang.search_lbl}" data-icon="search"/>		</td>	</tr></table>  </form>	  {if $shifts}	{**if $employeelist**} 	   {if $tablelist}		{if $emp_lst}		 <table class="biz_data_grid"> <thead>	<tr>		<th colspan="2">{$_lang.tbl_emp_shift_assignment.emp}</th>		{foreach $shifts as $shift}			<th>{$shift.shift_name} 			</th>		{/foreach}  	</tr>		  </thead> <tbody>    {math assign="tot_columns" equation="x + y" x=$shifts_cnt y=2}     		{foreach from=$emp_lst key=emp_date item=emp_list}		<tr class="sub_main customers">				{if $smarty.request[$smarty.const.MODE_TITLE] eq $smarty.const.MODE_UPDATE}								<td colspan="2">					{jqmbutton mini="true" icon="edit" onclick="window.open('{$website}/user/tbl_emp_shift_assignment.php?from_date={$emp_date}&to_date={$emp_date}');" value="Create/Edit schedule"}				</td>				<td colspan="3" class="biz_center{if $smarty.request[$smarty.const.MODE_TITLE] neq $smarty.const.MODE_UPDATE} no_hover{/if}" style="font-weight: bold;" > [{$emp_date|date_format:" %A, %m/%d/%Y "}] </td>				{else}					<td colspan="{$tot_columns}" class="biz_center{if $smarty.request[$smarty.const.MODE_TITLE] neq $smarty.const.MODE_UPDATE} no_hover{/if}" style="font-weight: bold;" > [{$emp_date|date_format:" %A, %m/%d/%Y "}]</td>								{/if} 						</tr>		{foreach from=$emp_list key=emp_id item=emp}		<tr class="{cycle values="odd,even"}">			<td style="width:10% !important;" {if $smarty.request[$smarty.const.MODE_TITLE] neq $smarty.const.MODE_UPDATE}class="no_hover"{/if}> <strong style="color:GREEN;">{$emp.employee_name}</strong></td>			<td style="width:6%"{if $smarty.request[$smarty.const.MODE_TITLE] neq $smarty.const.MODE_UPDATE}class="no_hover"{/if}>{if $smarty.request[$smarty.const.MODE_TITLE] eq $smarty.const.MODE_UPDATE}{jqmbutton theme='a1' onclick="deletemultiple_schedule('{$emp.emp_sft_ids}',{$emp_id},'{$emp_date}');" icon='recycle-full' mini='true' iconpos='notext'}{/if}</td>				 			{foreach $shifts as $shift}			<td style="width:28% !important;" {if $smarty.request[$smarty.const.MODE_TITLE] neq $smarty.const.MODE_UPDATE}class="no_hover"{/if}> 				<div {if $smarty.request[$smarty.const.MODE_TITLE] eq $smarty.const.MODE_UPDATE}class="box{if $emp_sft_shift eq $shift@key} active{/if}{if $emp.shift[$shift@key].emp_sft_id}{else} biz_no_pointer{/if}" {if $emp.shift[$shift@key].emp_sft_id}onclick="popuptbl_shift_assignment({$emp.shift[$shift@key].emp_sft_id});"{/if}{else}class="box"{/if}>					{if $emp.shift[$shift@key].table_list}{$emp.shift[$shift@key].table_list}{else}--{/if}						 						</div>												</td>			 {/foreach}   		</tr> 			 {/foreach}  		{/foreach}	 </tbody> </table>				 		 		{else}					<div class="error">{$_lang.tbl_emp_shift_assignment.assign_emp_shift}					<a href='{$website}/user/tbl_emp_shift_assignment.php?dt={$emp_sft_date}'>Click here.</a>					</div>				{/if} 		 {else}		 		<div class="error">Currently there are no tables available in this resatuarant.Please create the table first. <a href='{$website}/user/tbl_dining_table.php'>Click here</a> to craete table.</div> 		 {/if}	{**else**}	<!--<div class="error">Currently there are no employees in this resatuarant. Please create the employees first. <a href='{$website}/user/tbl_staff.php'>Click here</a> to craete employee.</div> -->	{**/if**}		{else}			<div class="error">{$_lang.tbl_shift.no_record_found} Please create the shift first..<a href='{$website}/user/tbl_shift.php'>Click here.</a></div> {/if}	  </div>    <div id="popuptableshift" class="biz_hidden ui-body-a" style="width:250px;position:fixed;z-index:1000;">  <div data-role="header" data-theme="h">		<h4>{$_lang.tbl_emp_shift_assignment.table_select}</h4>	</div>	<div data-role="content" data-theme="a"> 	<br/>	<center>	<div style="height:40px;width:230px;"> 		<select  id="tables" data-native-menu="false" data-mini="true" multiple="multiple"> 	</select>	</div>	<div class="clearfix"></div>				<input type="hidden" id="emp_shift_id" value=""/> 				<input type="button" onclick="updateTablesToEmpShift();" data-icon="save" data-icon="save" value="{$_lang.save_lbl}" data-inline='true'/>	<input type="button" onclick="$('#popuptableshift').addClass('biz_hidden');" value="{$_lang.cancel_lbl}" data-icon="delete" data-inline='true'/>	</center>	</div></div> {include file="footercontent.tpl"}{include file="tbl_emp_shift_assignment/js.tpl"}</body></html>