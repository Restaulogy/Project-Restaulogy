{literal}<script type="text/javascript">$(function(){ 	$("#tip_dis_period_from, #tip_dis_period_to").scroller({ display:'bubble', preset: 'date', dateFormat : '{/literal}{$smarty.const.MOBISCROL_FORMAT}{literal}', timeWheels: 'yyyymmdd', animate: 'slidevertical'});	{/literal}{if $isUpdate}{literal}setTimeout(cal_tip_amt(),3000);{/literal}{/if}{literal}});function detail_distribution(tip_dis_id){	if(tip_dis_id > 0){		postForm({'tip_dis_id':tip_dis_id,'is_distribution':1},'{/literal}{$website}{literal}/user/tbl_tip_list.php','post','_blank');	}else{		alert('Please Select Tip distribution')	}}function detail_distribution_list(emp_id){    from_dt=$('#tip_dis_period_from').val();    to_dt=$('#tip_dis_period_to').val();    //alert(emp_id + ' - ' + from_dt + ' - ' + to_dt);    postForm({'from_date':from_dt,'to_date':to_dt,'employee':emp_id,'is_distribution':1},'{/literal}{$website}{literal}/user/tbl_tip_list.php','post','_blank');}function show_distrution(){	$("#tip_dis_period_from_err ,#tip_dis_period_to_err").html('');	var isErr = true;	if(IsNonEmpty(elemById("tip_dis_period_from").value)==false){		$("#tip_dis_period_from_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_period_from}{literal}");		isErr = false;	} 	if(IsNonEmpty(elemById("tip_dis_period_to").value)==false){		$("#tip_dis_period_to_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_period_to}{literal}");		isErr = false;	} 	if(isErr){		var info = {};	 	info['from_date'] = $('#tip_dis_period_from').val();	 	info['to_date'] = $('#tip_dis_period_to').val();	 	postForm(info, '{/literal}{$website}{literal}/user/tbl_tip_list.php','post','_blank');		return true;	}else{		alert("{/literal}{$_lang.messages.revise_form}{literal}"); 	}   	return false;} function change_distrution(type){	var obj = $('#tip_dis_shared_among');  $('#shared_among_id').hide();	if(type == 'SHARED'){  $('#shared_among_id').show();		obj.attr('multiple','multiple');	}else{		obj.removeAttr('multiple','false');	} 		$("#tip_dis_shared_among option").each(function()	{		  this.selectedIndex = -1;	       	});	obj.selectmenu('refresh');}function save_the_report(){    if($('#popup_tip_dis_name').val()!=''){        $("#tip_dis_name").val($('#popup_tip_dis_name').val());        $('#frmcreatetbl_tip_distribution').submit();    }else{        $("#tip_dis_name_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_name}{literal}");        alert('Please provide the title');    }}function on_save_popup(){  //alert($('#tip_dis_total_amnt').val());  if($('#tip_dis_total_amnt').val() >0){    $('#id_tip_dis_name').popup('open');  }else{    alert('Please select the date range and use calculate before saving the report');  }}	function cal_tip_amt(){    //alert('i am in');	$("#tip_dis_period_from_err ,#tip_dis_period_to_err").html(''); 	var isErr = true;	if(IsNonEmpty(elemById("tip_dis_period_from").value)==false){		$("#tip_dis_period_from_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_period_from}{literal}");		isErr = false;	}	if(IsNonEmpty(elemById("tip_dis_period_to").value)==false){		$("#tip_dis_period_to_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_period_to}{literal}");		isErr = false;	}	//alert('i am below');	 if(isErr){	 	var info = {};		 info['action'] = 'cal_tip_amt';		 info['var1'] = $('#tip_dis_period_from').val();		 info['var2'] = $('#tip_dis_period_to').val();		 info['var3'] = $('#tip_dis_type').val();		 info['var4'] = $('#tip_dis_shared_among').val();		 info['var5'] ={/literal}{if $isUpdate}0{else}1{/if}{literal};		 ajaxian(info,function(res){                  //alert(res.tip_amt);		 		if(res.tip_amt == -1){					alert('Already There');					$('#tip_dis_total_amnt').val('0.00');				}else{                    //$('#div_total_tip').show();					$('#tip_dis_total_amnt').val(res.tip_amt);										$('#div_report_result').show();					if($.isArray(res.output))                    {                        var str_output='<table class="biz_data_grid"><tr><th>Employee</th><th>Tip Collected ($)</th></tr>';                        $.each(res.output, function(i,item){                             //if(item.tip_amt>0){                                str_output = str_output + '<tr class="odd"><td><a href="#" onclick="detail_distribution_list('+item.order_emp_id+');">'+item.server+'</a></td><td>'+item.tip_amt+'</td></tr>';                             //}                        });                       str_output = str_output + '<tr><th>Total</th><th>'+res.tip_amt+'</th></tr>';                       str_output = str_output + '</table> <br> ';                       $('#div_report_result').html(str_output).trigger('refresh');                    }                    					$("#tip_dis_shared_among option").each(function () {  					    $(this).removeAttr('selected'); 					});					 					if($('#tip_dis_type').val()== 'SHARED'){ 						change_distrution($('#tip_dis_type').val());						$("#tip_dis_shared_among option").each(function () { 						   if (res.employees.indexOf($(this).val())!= -1) {						    $(this).attr('selected','selected');						   } 						}); 					}					$("#tip_dis_shared_among").selectmenu('refresh'); 				} 		 });	 } 	 return true; }function deletetbl_tip_distribution(varId){	if(varId > 0){		if(confirm("{/literal}{$_lang.tbl_tip_distribution.DELETE.CONFIRM_MSG}{literal}")==true){			window.location.href="{/literal}{$page_url}{literal}?action=delete&tip_dis_id="+varId;		}	}}function actiontbl_tip_distribution(action){  	var varId = $("input:checked").length;	var isValid = 0;	if(varId > 0){	if(action != ""){		switch (action) {			case '{/literal}{$smarty.const.ACTION_DELETE}{literal}':						if(confirm("{/literal}{$_lang.tbl_tip_distribution.DELETE.CONFIRM_MSG}{literal}")==true){								isValid = 1;						}  			break;						case '{/literal}{$smarty.const.ACTION_DEACTIVATE}{literal}':						isValid = 1;			break;						case '{/literal}{$smarty.const.ACTION_ACTIVATE}{literal}':					isValid = 1; 			break; 		}		if(isValid){		 	$('#action').val(action);		  $('#frm_tbl_tip_distribution').submit();		}				} }else{			alert("{/literal}{$_lang.main.select_ids.empty}{literal}"); }	}function validatetbl_tip_distribution(){	$("#tip_dis_id_err, #tip_dis_name_err, #tip_dis_total_amnt_err, #tip_dis_type_err, #tip_dis_shared_among_err, #tip_dis_period_from_err, #tip_dis_period_to_err, #tip_dis_start_date_err, #tip_dis_end_date_err").html("");	var isErr = true;	if(elemById("action").value=="update"){		if(IsNonEmpty(elemById("tip_dis_id").value)==false){			$("#tip_dis_id_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_id}{literal}");			isErr = false;		}	}	 	if(IsNonEmpty(elemById("tip_dis_name").value)==false){		$("#tip_dis_name_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_name}{literal}");		isErr = false;	}	if(IsNonEmpty(elemById("tip_dis_total_amnt").value)==false){		$("#tip_dis_total_amnt_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_total_amnt}{literal}");		isErr = false;	}	if(IsNonEmpty(elemById("tip_dis_type").value)==false){		$("#tip_dis_type_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_type}{literal}");		isErr = false;	} 		/*if(IsNonEmpty(elemById("tip_dis_shared_among").value)==false){		$("#tip_dis_shared_among_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_shared_among}{literal}");		isErr = false;	}*/	if(IsNonEmpty(elemById("tip_dis_period_from").value)==false){		$("#tip_dis_period_from_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_period_from}{literal}");		isErr = false;	}	if(IsNonEmpty(elemById("tip_dis_period_to").value)==false){		$("#tip_dis_period_to_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_period_to}{literal}");		isErr = false;	}/*	if(IsNonEmpty(elemById("tip_dis_start_date").value)==false){		$("#tip_dis_start_date_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_start_date}{literal}");		isErr = false;	}*//*	if(IsNonEmpty(elemById("tip_dis_end_date").value)==false){		$("#tip_dis_end_date_err").html("{/literal}{$_lang.tbl_tip_distribution.not_empty_msg.tip_dis_end_date}{literal}");		isErr = false;	}*/	if(isErr == false){		alert("{/literal}{$_lang.messages.revise_form}{literal}");	}	return isErr;}//..function</script>{/literal}