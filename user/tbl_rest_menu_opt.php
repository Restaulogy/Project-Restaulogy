<?phpinclude_once(dirname(dirname(__FILE__))."/init.php");include_once("header.php");$active_page = "tbl_rest_menu_opt";/*if($sesslife==true){*/$rst_mnu_id= get_input("rst_mnu_id");$rst_mnu_restaurant= get_input("rst_mnu_restaurant");$rst_mnu_add_order= get_input("rst_mnu_add_order",0);$rst_mnu_add_prom= get_input("rst_mnu_add_prom",0);$rst_mnu_serv_req= get_input("rst_mnu_serv_req",0);$rst_mnu_orders= get_input("rst_mnu_orders",0);$rst_mnu_tbl_statuses= get_input("rst_mnu_tbl_statuses",0);$rst_mnu_prom_claimed= get_input("rst_mnu_prom_claimed",0);$rst_mnu_complaints= get_input("rst_mnu_complaints",0);$rst_mnu_transfer_tbl= get_input("rst_mnu_transfer_tbl",0);$rst_mnu_online_users= get_input("rst_mnu_online_users",0);$rst_mnu_loyalty_rewards= get_input("rst_mnu_loyalty_rewards",0);$rst_mnu_configuration= get_input("rst_mnu_configuration",0);$rst_mnu_allergy= get_input("rst_mnu_allergy",0);$rst_mnu_reward_conf= get_input("rst_mnu_reward_conf",'CUSTOMER');$rst_mnu_start_date= get_input("rst_mnu_start_date");$rst_mnu_end_date= get_input("rst_mnu_end_date");$action = strtoupper(get_input(ACTION_TITLE));$mode = strtoupper(get_input(MODE_TITLE));$offset = get_input(OFFSET_TITLE,OFFSET_VALUE);$limit =  get_input(LIMIT_TITLE,LIMIT_VALUE);$sort_on = get_input(SORT_ON,"rst_mnu_id");$sort_by=$new_sort="";biz_set_sorting_var($sort_by,$new_sort);$url = "{$website}/user/tbl_rest_menu_opt.php";$navigationURL = $url."?".SORT_ON."={$sort_on}&".SORT_BY."={$sort_by}";$isSuccess = "";$objtbl_rest_menu_opt= new tbl_rest_menu_opt();if(is_not_empty($action)){	switch($action){		case ACTION_CREATE: 			$isSuccess = $objtbl_rest_menu_opt->create($rst_mnu_restaurant, $rst_mnu_add_order, $rst_mnu_add_prom, $rst_mnu_serv_req, $rst_mnu_orders, $rst_mnu_tbl_statuses, $rst_mnu_prom_claimed, $rst_mnu_complaints, $rst_mnu_transfer_tbl, $rst_mnu_online_users, $rst_mnu_loyalty_rewards, $rst_mnu_configuration,$rst_mnu_reward_conf, $rst_mnu_start_date, $rst_mnu_end_date,$rst_mnu_allergy);			break;		case ACTION_UPDATE: 			$isSuccess = $objtbl_rest_menu_opt->update($rst_mnu_id, $rst_mnu_restaurant, $rst_mnu_add_order, $rst_mnu_add_prom, $rst_mnu_serv_req, $rst_mnu_orders, $rst_mnu_tbl_statuses, $rst_mnu_prom_claimed, $rst_mnu_complaints, $rst_mnu_transfer_tbl, $rst_mnu_online_users, $rst_mnu_loyalty_rewards, $rst_mnu_configuration,$rst_mnu_reward_conf, $rst_mnu_start_date, $rst_mnu_end_date,$rst_mnu_allergy);			break;		case ACTION_DELETE: 			$isSuccess = $objtbl_rest_menu_opt->delete(array(RST_MNU_ID=>$rst_mnu_id));			break;		case ACTION_ACTIVATE: 			$isSuccess = $objtbl_rest_menu_opt->activate($rst_mnu_id);			break;		case ACTION_DEACTIVATE: 			$isSuccess = $objtbl_rest_menu_opt->deactivate($rst_mnu_id);			break;	}//..switch}//..ifif(is_not_empty($isSuccess)){	if(is_gt_zero_num($isSuccess)){		$err .= "<div class='info'>".$_lang['tbl_rest_menu_opt'][$action]['SUCCESS_MSG']."</div>";	}elseif($isSuccess == OPERATION_FAIL){		$err .= "<div class='error'>".$_lang['tbl_rest_menu_opt'][$action]['FAILURE_MSG']."</div>";	}elseif($isSuccess == OPERATION_DUPLICATE){		$err .= "<div class='error'>".$_lang['tbl_rest_menu_opt'][$action]['DUPLICATE_MSG']."</div>";	}}//..if	$result_found=0;	$tbl_rest_menu_optlist = $objtbl_rest_menu_opt->readArray(array(OFFSET_TITLE=>$offset,LIMIT_TITLE=>$limit,SORT_BY=>$sort_by,SORT_ON=>$sort_on),$result_found,1);	$allpageCount = 0;	$currentPage = 0;	$smarty->assign('pagination',biz_pagination(array("url"=>$navigationURL,LIMIT_TITLE=>$limit,OFFSET_TITLE=>$offset,"count"=>$result_found),$allpageCount,$currentPage));	$smarty->assign('allpageCount',$allpageCount);	$smarty->assign('currentPage',$currentPage);	$smarty->assign('tbl_rest_menu_optlist', $tbl_rest_menu_optlist);	$smarty->assign('result_found',$result_found);	//$template = "tbl_rest_menu_opt/tbl_rest_menu_opt.tpl";	$template = "tbl_rest_menu_opt/grid.tpl";		$breadcrumbs[] = array(				 	'link'=>$website.'/user/pref_mng_cntrols.php',					'title'=>$_lang['main']['pref_mng_cntrls']); 	$breadcrumbs[] = array(				 	'link'=>$website.'/user/tbl_rest_menu_opt.php',					'title'=>$_lang['tbl_rest_menu_opt']['title']);	if (is_not_empty($mode)){		if(($mode == MODE_VIEW || $mode==MODE_UPDATE) && is_gt_zero_num($rst_mnu_id)){						$tbl_rest_menu_optinfo= $objtbl_rest_menu_opt->GetInfo($rst_mnu_id,0);			$smarty->assign('tbl_rest_menu_optinfo',$tbl_rest_menu_optinfo);			if($mode==MODE_UPDATE){				$smarty->assign("isUpdate",1);			}			$template = "tbl_rest_menu_opt/view.tpl";		}elseif($mode == MODE_CREATE){			$template = "tbl_rest_menu_opt/create.tpl";		}}	//..for rest list	$lst_restants=tbl_restaurent::GetFields(array('key_field'=>RESTAURENT_ID,'value_field'=>RESTAURENT_NAME,'isActive'=>1));	$smarty->assign('lst_restants', $lst_restants);	$smarty->assign('lst_reward_types', tbl_rest_menu_opt::getRewardTypes());			$smarty->assign('page_url', $url);	$smarty->assign('navigationURL',$navigationURL);	$smarty->assign('new_sort',$new_sort);	$smarty->assign('active_page',$active_page);/*}else{	$template="index.tpl";}*/include_once("footer.php");?>