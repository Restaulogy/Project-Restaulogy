<?phpinclude_once(dirname(dirname(__FILE__))."/init.php");include_once("header.php"); if($sesslife==true){ $srvc_cat_id= get_input("srvc_cat_id");$srvc_cat_code= get_input("srvc_cat_code");$srvc_cat_desc= get_input("srvc_cat_desc");$srvc_cat_start_date= get_input("srvc_cat_start_date");$srvc_cat_end_date= get_input("srvc_cat_end_date");$action = strtoupper(get_input(ACTION_TITLE));$mode = strtoupper(get_input(MODE_TITLE));$offset = get_input(OFFSET_TITLE,OFFSET_VALUE);$limit =  get_input(LIMIT_TITLE,LIMIT_VALUE);$url = "{$website}/user/tbl_service_category.php";$isSuccess = "";$objtbl_service_category= new tbl_service_category();if(is_not_empty($action)){	switch($action){		case ACTION_CREATE: 			$isSuccess = $objtbl_service_category->create($srvc_cat_code, $srvc_cat_desc, $srvc_cat_start_date, $srvc_cat_end_date);			break;		case ACTION_UPDATE: 			$isSuccess = $objtbl_service_category->update($srvc_cat_id, $srvc_cat_code, $srvc_cat_desc, $srvc_cat_start_date, $srvc_cat_end_date);			break;		case ACTION_DELETE: 			$isSuccess = $objtbl_service_category->delete(array(SRVC_CAT_ID=>$srvc_cat_id));			break;		case ACTION_ACTIVATE: 			$isSuccess = $objtbl_service_category->activate($srvc_cat_id);			break;		case ACTION_DEACTIVATE: 			$isSuccess = $objtbl_service_category->deactivate($srvc_cat_id);			break;	}//..switch}//..ifif(is_not_empty($isSuccess)){	if(is_gt_zero_num($isSuccess)){		$err .= "<div class='info'>".$_lang['tbl_service_category'][$action]['SUCCESS_MSG']."</div>";	}elseif($isSuccess == OPERATION_FAIL){		$err .= "<div class='error'>".$_lang['tbl_service_category'][$action]['FAILURE_MSG']."</div>";	}elseif($isSuccess == OPERATION_DUPLICATE){		$err .= "<div class='error'>".$_lang['tbl_service_category'][$action]['DUPLICATE_MSG']."</div>";	}}//..if	$result_found=0;		$tbl_service_categorylist = $objtbl_service_category->readArray(array(OFFSET_TITLE=>$offset,LIMIT_TITLE=>$limit),$result_found,1);	 	$smarty->assign('pagination',biz_pagination(array("url"=>$url,LIMIT_TITLE=>$limit,OFFSET_TITLE=>$offset,"count"=>$result_found)));	$smarty->assign('tbl_service_categorylist', $tbl_service_categorylist);	$smarty->assign('result_found',$result_found);	$template = "tbl_service_category/tbl_service_category.tpl";	$breadcrumbs[] = array("link"=>$website."/user/pref_mng_cntrols.php", "title"=>$_lang['main']['navbar']['controls']);	$breadcrumbs[] = array("link"=>$website."/user/tbl_services_code.php", "title"=>$_lang['tbl_services_code']['listing_title']);	$breadcrumbs[] = array("link"=>$url, "title"=>$_lang['tbl_service_category']['listing_title']);					if (is_not_empty($mode)){		if(($mode == MODE_VIEW || $mode==MODE_UPDATE) && is_gt_zero_num($srvc_cat_id)){			$tbl_service_categoryinfo= $objtbl_service_category->GetInfo($srvc_cat_id);			if(is_not_empty($tbl_service_categoryinfo)){   	$breadcrumbs[] = array("link"=>$url."?srvc_cat_id=".$tbl_service_categoryinfo['srvc_cat_id']."&".MODE_TITLE."=".$mode, "title"=>$tbl_service_categoryinfo['srvc_cat_code'].getModeSubTitle($mode));  }			$smarty->assign('tbl_service_categoryinfo',$tbl_service_categoryinfo);			if($mode==MODE_UPDATE){				$smarty->assign("isUpdate",1);			}			$template = "tbl_service_category/view.tpl";		}elseif($mode == MODE_CREATE){		$breadcrumbs[] = array("link"=>$url."?".MODE_TITLE."=".$mode, "title"=>$_lang['tbl_service_category']['create_title']); 			$template = "tbl_service_category/create.tpl";		}}		 	$smarty->assign('page_url', $url); }else{	$template="index.tpl";} include_once("footer.php");?>