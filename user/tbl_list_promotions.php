<?phpinclude_once(dirname(dirname(__FILE__))."/init.php");include_once("header.php");/*if($sesslife==true){*/$id= get_input("id");$list_id= get_input("list_id");$title= get_input("title");$pdf= get_input("pdf");$comments= get_input("comments");$start_date= get_input("start_date");$end_date= get_input("end_date");$states= get_input("states");$metro_area= get_input("metro_area");$promotion_id= get_input("promotion_id");$img_ext= get_input("img_ext");$views_count= get_input("views_count");$is_pdf_uploaded= get_input("is_pdf_uploaded");$cupon_type= get_input("cupon_type");$allowed_cupons= get_input("allowed_cupons");$redimed_cupons= get_input("redimed_cupons");$action = strtoupper(get_input(ACTION_TITLE));$mode = strtoupper(get_input(MODE_TITLE));$offset = get_input(OFFSET_TITLE,OFFSET_VALUE);$limit =  get_input(LIMIT_TITLE,LIMIT_VALUE);$url = "{$website}/user/tbl_list_promotions.php";$isSuccess = "";$objtbl_list_promotions= new tbl_list_promotions();if(is_not_empty($action)){	switch($action){		case ACTION_CREATE: 			$isSuccess = $objtbl_list_promotions->create($list_id, $title, $pdf, $comments, $start_date, $end_date, $states, $metro_area, $promotion_id, $img_ext, $views_count, $is_pdf_uploaded, $cupon_type, $allowed_cupons, $redimed_cupons);			break;		case ACTION_UPDATE: 			$isSuccess = $objtbl_list_promotions->update($id, $list_id, $title, $pdf, $comments, $start_date, $end_date, $states, $metro_area, $promotion_id, $img_ext, $views_count, $is_pdf_uploaded, $cupon_type, $allowed_cupons, $redimed_cupons);			break;		case ACTION_DELETE: 			$isSuccess = $objtbl_list_promotions->delete(array(ID=>$id));			break;		case ACTION_ACTIVATE: 			$isSuccess = $objtbl_list_promotions->activate($id);			break;		case ACTION_DEACTIVATE: 			$isSuccess = $objtbl_list_promotions->deactivate($id);			break;	}//..switch}//..ifif(is_not_empty($isSuccess)){	if(is_gt_zero_num($isSuccess)){		$err .= "<div class='info'>".$_lang['tbl_list_promotions'][$action]['SUCCESS_MSG']."</div>";	}elseif($isSuccess == OPERATION_FAIL){		$err .= "<div class='error'>".$_lang['tbl_list_promotions'][$action]['FAILURE_MSG']."</div>";	}elseif($isSuccess == OPERATION_DUPLICATE){		$err .= "<div class='error'>".$_lang['tbl_list_promotions'][$action]['DUPLICATE_MSG']."</div>";	}}//..if	$result_found=0;	$tbl_list_promotionslist = $objtbl_list_promotions->readArray(array(OFFSET_TITLE=>$offset,LIMIT_TITLE=>$limit),$result_found,1);	$smarty->assign('pagination',biz_pagination(array("url"=>$url,LIMIT_TITLE=>$limit,OFFSET_TITLE=>$offset,"count"=>$result_found)));	$smarty->assign('tbl_list_promotionslist', $tbl_list_promotionslist);	$smarty->assign('result_found',$result_found);	$template = "tbl_list_promotions/tbl_list_promotions.tpl";	if (is_not_empty($mode)){		if(($mode == MODE_VIEW || $mode==MODE_UPDATE) && is_gt_zero_num($id)){			$tbl_list_promotionsinfo= $objtbl_list_promotions->GetInfo($id);			$smarty->assign('tbl_list_promotionsinfo',$tbl_list_promotionsinfo);			if($mode==MODE_UPDATE){				$smarty->assign("isUpdate",1);			}			$template = "tbl_list_promotions/view.tpl";		}elseif($mode == MODE_CREATE){			$template = "tbl_list_promotions/create.tpl";					}}	$smarty->assign('state_list',getStates()); 	$smarty->assign('coupon_types',$objtbl_list_promotions->cupon_types());	$smarty->assign('page_url', $url);/*}else{	$template="index.tpl";}*/include_once("footer.php");?>