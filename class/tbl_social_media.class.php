<?php/**********************************************************************tbl_social_media.class.phpGenerated by STRUCTY 2014.07.05 08:02:39.Copyright 2011 Structy, Frédéric Aebi. All rights reserved.**********************************************************************/define("TBL_SOCIAL_MEDIA", "tbl_social_media"); define('SOCIAL_ID', 'social_id'); define('SOCIAL_RESTARANT', 'social_restarant'); define('SOCIAL_FACEBOOK', 'social_facebook'); define('SOCIAL_TWITTER', 'social_twitter'); define('SOCIAL_INSTAGRAM', 'social_instagram'); define('SOCIAL_LINKEDIN', 'social_linkedin'); define('SOCIAL_START_DATE', 'social_start_date'); define('SOCIAL_END_DATE', 'social_end_date'); define("TBL_SOCIAL_MEDIA_ACTIVE_DATE",  SOCIAL_START_DATE);define("TBL_SOCIAL_MEDIA_DEACTIVE_DATE",  SOCIAL_END_DATE);$tbl_social_media_active_condition= " (".TBL_SOCIAL_MEDIA_DEACTIVE_DATE." is NULL OR ".TBL_SOCIAL_MEDIA_DEACTIVE_DATE." = 0 OR ".TBL_SOCIAL_MEDIA_DEACTIVE_DATE." > CURDATE( )) ";class tbl_social_media {	private $social_id;	private $social_restarant;	private $social_facebook;	private $social_twitter;	private $social_instagram;	private $social_linkedin;	private $social_start_date;	private $social_end_date;	private $tbl_social_media_active_date;	private $tbl_social_media_deactive_date;	public function setsocial_id($pArg="0") {$this->social_id=$pArg;}	public function setsocial_restarant($pArg="0") {$this->social_restarant=$pArg;}	public function setsocial_facebook($pArg="0") {$this->social_facebook=$pArg;}	public function setsocial_twitter($pArg="0") {$this->social_twitter=$pArg;}	public function setsocial_instagram($pArg="0") {$this->social_instagram=$pArg;}	public function setsocial_linkedin($pArg="0") {$this->social_linkedin=$pArg;}	public function setsocial_start_date($pArg="0") {$this->social_start_date=$pArg;}	public function setsocial_end_date($pArg="0") {$this->social_end_date=$pArg;}	public function settbl_social_media_active_date($pArg="0") {$this->tbl_social_media_active_date=$pArg;}	public function settbl_social_media_deactive_date($pArg="0") {$this->tbl_social_media_deactive_date=$pArg;}	public function getsocial_id() {return $this->social_id;}	public function getsocial_restarant() {return $this->social_restarant;}	public function getsocial_facebook() {return $this->social_facebook;}	public function getsocial_twitter() {return $this->social_twitter;}	public function getsocial_instagram() {return $this->social_instagram;}	public function getsocial_linkedin() {return $this->social_linkedin;}	public function getsocial_start_date() {return $this->social_start_date;}	public function getsocial_end_date() {return $this->social_end_date;}	public function gettbl_social_media_active_date($pArg="0") {return $this->tbl_social_media_active_date;}	public function gettbl_social_media_deactive_date($pArg="0") {return $this->tbl_social_media_deactive_date;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_SOCIAL_MEDIA.RET;		$and = "WHERE".RET;		if($array[SOCIAL_ID] != "") {			$qry .= $and.SOCIAL_ID." = '".$array[SOCIAL_ID]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_RESTARANT] != "") {			$qry .= $and.SOCIAL_RESTARANT." = '".$array[SOCIAL_RESTARANT]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_FACEBOOK] != "") {			$qry .= $and.SOCIAL_FACEBOOK." = '".$array[SOCIAL_FACEBOOK]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_TWITTER] != "") {			$qry .= $and.SOCIAL_TWITTER." = '".$array[SOCIAL_TWITTER]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_INSTAGRAM] != "") {			$qry .= $and.SOCIAL_INSTAGRAM." = '".$array[SOCIAL_INSTAGRAM]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_LINKEDIN] != "") {			$qry .= $and.SOCIAL_LINKEDIN." = '".$array[SOCIAL_LINKEDIN]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_START_DATE] != "") {			$qry .= $and.SOCIAL_START_DATE." = '".$array[SOCIAL_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_END_DATE] != "") {			$qry .= $and.SOCIAL_END_DATE." = '".$array[SOCIAL_END_DATE]."'".RET;			$and = "AND".RET;		}	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setsocial_id($record[SOCIAL_ID]);				$this->setsocial_restarant($record[SOCIAL_RESTARANT]);				$this->setsocial_facebook($record[SOCIAL_FACEBOOK]);				$this->setsocial_twitter($record[SOCIAL_TWITTER]);				$this->setsocial_instagram($record[SOCIAL_INSTAGRAM]);				$this->setsocial_linkedin($record[SOCIAL_LINKEDIN]);				$this->setsocial_start_date($record[SOCIAL_START_DATE]);				$this->setsocial_end_date($record[SOCIAL_END_DATE]);				$this->settbl_social_media_active_date($record[TBL_SOCIAL_MEDIA_ACTIVE_DATE]);				$this->settbl_social_media_deactive_date($record[TBL_SOCIAL_MEDIA_DEACTIVE_DATE]);				return true;			}		}	}	public static function readArray($array = array(),&$result_found=0,$isArray=1) {		global $tbl_social_media_active_condition;		$qry = "SELECT *".RET."FROM ".TBL_SOCIAL_MEDIA.RET;		$and = "WHERE".RET;		if($array[SOCIAL_ID] != "") {			$qry .= $and.SOCIAL_ID." = '".$array[SOCIAL_ID]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_RESTARANT] != "") {			$qry .= $and.SOCIAL_RESTARANT." = '".$array[SOCIAL_RESTARANT]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_FACEBOOK] != "") {			$qry .= $and.SOCIAL_FACEBOOK." = '".$array[SOCIAL_FACEBOOK]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_TWITTER] != "") {			$qry .= $and.SOCIAL_TWITTER." = '".$array[SOCIAL_TWITTER]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_INSTAGRAM] != "") {			$qry .= $and.SOCIAL_INSTAGRAM." = '".$array[SOCIAL_INSTAGRAM]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_LINKEDIN] != "") {			$qry .= $and.SOCIAL_LINKEDIN." = '".$array[SOCIAL_LINKEDIN]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_START_DATE] != "") {			$qry .= $and.SOCIAL_START_DATE." = '".$array[SOCIAL_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_END_DATE] != "") {			$qry .= $and.SOCIAL_END_DATE." = '".$array[SOCIAL_END_DATE]."'".RET;			$and = "AND".RET;		}		if(is_gt_zero_num($array["isActive"])) {			$qry .= $and.$tbl_social_media_active_condition;;			$and = "AND".RET;		}		if(is_not_empty($array[SORT_ON]) && is_not_empty($array[SORT_BY])) {		$qry .=" ORDER BY ".$array[SORT_ON]." ".$array[SORT_BY];		}		if(is_not_empty($array[OFFSET_TITLE]) && is_not_empty($array[LIMIT_TITLE])) {			$qry_with_limit  = $qry." LIMIT ".$array[OFFSET_TITLE].",".$array[LIMIT_TITLE];		}else{			$qry_with_limit  = $qry;		}		$result = mysql_query ($qry_with_limit);		$r1 = mysql_query($qry);		if($r1){			$result_found = mysql_num_rows($r1);		}		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$isActive= 0;				//..check deactive date is not set or 0				if((is_not_empty($record[TBL_SOCIAL_MEDIA_DEACTIVE_DATE])==false) || (is_gt_zero_num(strtotime($record[TBL_SOCIAL_MEDIA_DEACTIVE_DATE]))== false)){					$isActive = 1; 				}else{					//..check the deactive date is greater than todays date					if(strtotime($record[TBL_SOCIAL_MEDIA_DEACTIVE_DATE]) > strtotime(date(DATE_FORMAT))){						$isActive = 1;					}				}				if($isArray){					$class_object = array();					$class_object["social_id"]=$record[SOCIAL_ID];					$class_object["social_restarant"]=$record[SOCIAL_RESTARANT];					$class_object["social_facebook"]=$record[SOCIAL_FACEBOOK];					$class_object["social_twitter"]=$record[SOCIAL_TWITTER];					$class_object["social_instagram"]=$record[SOCIAL_INSTAGRAM];					$class_object["social_linkedin"]=$record[SOCIAL_LINKEDIN];					$class_object["social_start_date"]=$record[SOCIAL_START_DATE];					$class_object["social_end_date"]=$record[SOCIAL_END_DATE];					$class_object["isActive"]=$isActive;				}else{					$class_object = new tbl_social_media();					$class_object->setsocial_id($record[SOCIAL_ID]);					$class_object->setsocial_restarant($record[SOCIAL_RESTARANT]);					$class_object->setsocial_facebook($record[SOCIAL_FACEBOOK]);					$class_object->setsocial_twitter($record[SOCIAL_TWITTER]);					$class_object->setsocial_instagram($record[SOCIAL_INSTAGRAM]);					$class_object->setsocial_linkedin($record[SOCIAL_LINKEDIN]);					$class_object->setsocial_start_date($record[SOCIAL_START_DATE]);					$class_object->setsocial_end_date($record[SOCIAL_END_DATE]);				}				$class_objects[$record[SOCIAL_ID]] = $class_object;			}		}		return $class_objects;	}//..End readArray	public function insert($update = FALSE) {		if($update == TRUE) {			$qry  = "UPDATE ".TBL_SOCIAL_MEDIA.RET."SET".RET."			".SOCIAL_ID." = '".$this->getsocial_id()."',".RET."			".SOCIAL_RESTARANT." = '".$this->getsocial_restarant()."',".RET."			".SOCIAL_FACEBOOK." = '".$this->getsocial_facebook()."',".RET."			".SOCIAL_TWITTER." = '".$this->getsocial_twitter()."',".RET."			".SOCIAL_INSTAGRAM." = '".$this->getsocial_instagram()."',".RET."			".SOCIAL_LINKEDIN." = '".$this->getsocial_linkedin()."',".RET."			".SOCIAL_START_DATE." = '".$this->getsocial_start_date()."',".RET."			".SOCIAL_END_DATE." = '".$this->getsocial_end_date()."'".RET.			"WHERE ".SOCIAL_ID." = ".$this->getsocial_id().RET;			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".TBL_SOCIAL_MEDIA." (".RET.			"".SOCIAL_ID.", ".SOCIAL_RESTARANT.", ".SOCIAL_FACEBOOK.", ".SOCIAL_TWITTER.", ".SOCIAL_INSTAGRAM.", ".SOCIAL_LINKEDIN.", ".SOCIAL_START_DATE.", ".SOCIAL_END_DATE.RET.			") VALUES (".RET.			"'".$this->getsocial_id()."',".RET.			"'".$this->getsocial_restarant()."',".RET.			"'".$this->getsocial_facebook()."',".RET.			"'".$this->getsocial_twitter()."',".RET.			"'".$this->getsocial_instagram()."',".RET.			"'".$this->getsocial_linkedin()."',".RET.			"'".$this->getsocial_start_date()."',".RET.			"'".$this->getsocial_end_date()."'".RET.			")".RET;			mysql_query($qry);		}	}//..End Insert	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".TBL_SOCIAL_MEDIA.RET;		$and = "WHERE".RET;		if($array[SOCIAL_ID] != "") {			$qry .= $and.SOCIAL_ID." = '".$array[SOCIAL_ID]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_RESTARANT] != "") {			$qry .= $and.SOCIAL_RESTARANT." = '".$array[SOCIAL_RESTARANT]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_FACEBOOK] != "") {			$qry .= $and.SOCIAL_FACEBOOK." = '".$array[SOCIAL_FACEBOOK]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_TWITTER] != "") {			$qry .= $and.SOCIAL_TWITTER." = '".$array[SOCIAL_TWITTER]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_INSTAGRAM] != "") {			$qry .= $and.SOCIAL_INSTAGRAM." = '".$array[SOCIAL_INSTAGRAM]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_LINKEDIN] != "") {			$qry .= $and.SOCIAL_LINKEDIN." = '".$array[SOCIAL_LINKEDIN]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_START_DATE] != "") {			$qry .= $and.SOCIAL_START_DATE." = '".$array[SOCIAL_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[SOCIAL_END_DATE] != "") {			$qry .= $and.SOCIAL_END_DATE." = '".$array[SOCIAL_END_DATE]."'".RET;			$and = "AND".RET;		}		$res = mysql_query($qry);		if($res){			return OPERATION_SUCCESS;		};		return OPERATION_FAIL;	}//..End Delete	public function isAlreadyThere($social_restarant ,$social_facebook ,$social_twitter ,$social_instagram ,$social_linkedin ,$social_start_date ,$social_end_date) {		$unique_arr = array();			//$unique_arr[SOCIAL_ID]=$social_id;			//$unique_arr[SOCIAL_RESTARANT]=$social_restarant;			//$unique_arr[SOCIAL_FACEBOOK]=$social_facebook;			//$unique_arr[SOCIAL_TWITTER]=$social_twitter;			//$unique_arr[SOCIAL_INSTAGRAM]=$social_instagram;			//$unique_arr[SOCIAL_LINKEDIN]=$social_linkedin;			//$unique_arr[SOCIAL_START_DATE]=$social_start_date;			//$unique_arr[SOCIAL_END_DATE]=$social_end_date;		if(is_not_empty($unique_arr)){			return $this->readObject($unique_arr);		}		return false;	}//..isAlreadyThere	public function create($social_restarant ,$social_facebook ,$social_twitter ,$social_instagram ,$social_linkedin ,$social_start_date ,$social_end_date) {		if(is_not_empty($social_restarant)){			if($this->isAlreadyThere($social_restarant ,$social_facebook ,$social_twitter ,$social_instagram ,$social_linkedin ,$social_start_date ,$social_end_date)){				return OPERATION_DUPLICATE;			}else{				$this->setsocial_id("");				$this->setsocial_restarant($social_restarant);				$this->setsocial_facebook($social_facebook);				$this->setsocial_twitter($social_twitter);				$this->setsocial_instagram($social_instagram);				$this->setsocial_linkedin($social_linkedin);				$this->setsocial_start_date(date(DATE_FORMAT));				$this->insert();				return $this->getsocial_id();			}		}		return OPERATION_FAIL;	}//..create	public function update($social_id, $social_restarant, $social_facebook, $social_twitter, $social_instagram, $social_linkedin, $social_start_date, $social_end_date) {		if(is_gt_zero_num($social_id)){			if ($this->readObject(array(SOCIAL_ID=>$social_id))){				$this->setsocial_restarant($social_restarant);				$this->setsocial_facebook($social_facebook);				$this->setsocial_twitter($social_twitter);				$this->setsocial_instagram($social_instagram);				$this->setsocial_linkedin($social_linkedin);				$this->insert();				return OPERATION_SUCCESS;			}		}		return OPERATION_FAIL;	}//..update	public function activate($social_id){		if(is_gt_zero_num($social_id)){			if ($this->readObject(array(SOCIAL_ID=>$social_id))){				$qry  = "UPDATE ".TBL_SOCIAL_MEDIA.RET."SET".RET."			".TBL_SOCIAL_MEDIA_DEACTIVE_DATE." = '".date(EMPTY_DATE_FORMAT)."' WHERE ".SOCIAL_ID."={$social_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end activate	public function deactivate($social_id){		if(is_gt_zero_num($social_id)){			if ($this->readObject(array(SOCIAL_ID=>$social_id))){				$qry  = "UPDATE ".TBL_SOCIAL_MEDIA.RET."SET".RET."			".TBL_SOCIAL_MEDIA_DEACTIVE_DATE." = '".date(DATE_FORMAT)."' WHERE ".SOCIAL_ID."={$social_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end deactivate	public static function GetInfo($social_id) {		$info = array();		if($social_id != ""){			$obj_tbl_social_media = new tbl_social_media();			if($obj_tbl_social_media->readObject(array("social_id"=>$social_id))){				$info["social_id"]=$obj_tbl_social_media->getsocial_id();				$info["social_restarant"]=$obj_tbl_social_media->getsocial_restarant();				$info["social_facebook"]=$obj_tbl_social_media->getsocial_facebook();				$info["social_twitter"]=$obj_tbl_social_media->getsocial_twitter();				$info["social_instagram"]=$obj_tbl_social_media->getsocial_instagram();				$info["social_linkedin"]=$obj_tbl_social_media->getsocial_linkedin();				$info["social_start_date"]=$obj_tbl_social_media->getsocial_start_date();				$info["social_end_date"]=$obj_tbl_social_media->getsocial_end_date();				$info["isActive"] = 0;				//..check deactive date is not set or 0				if((is_not_empty($obj_tbl_social_media->gettbl_social_media_deactive_date())==false)  || (is_gt_zero_num(strtotime($obj_tbl_social_media->gettbl_social_media_deactive_date()))== false)){					$info["isActive"] = 1;				}else{					//..check the deactive date is greater than todays date					if(strtotime($obj_tbl_social_media->gettbl_social_media_deactive_date()) > strtotime(date(DATE_FORMAT))){						$info["isActive"] = 1;					}				}			}		unset($obj_tbl_social_media);		return $info;		}	}//..End GetInfo	public static function GetFields($data){		global $tbl_social_media_active_condition;		$arr = array();		if(is_not_empty($data)){			$qry ="SELECT ".$data['key_field'].",".$data['value_field']." FROM ".TBL_SOCIAL_MEDIA."";			if(is_gt_zero_num($data['isActive'])){				$qry .= " WHERE ".$tbl_social_media_active_condition;			}			$res = mysql_query($qry); 			if($res){				while($row=mysql_fetch_assoc($res)){					$arr[$row[$data['key_field']]] = $row[$data['value_field']];				}			}		}		return $arr;	}//.. End of GetFields}//..End tbl_social_media?>