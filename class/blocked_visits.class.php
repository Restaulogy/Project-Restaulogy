<?php/**********************************************************************blocked_visits.class.phpGenerated by STRUCTY 2012.12.06 10:42:54.Copyright 2011 Structy, Frdric Aebi. All rights reserved.**********************************************************************/define("BLOCKED_VISITS", "blocked_visits"); class blocked_visits {	private $id;	private $ip_adr;	private $visit_date;	private $time;	private $on_page;	public function setid($pArg="0") {$this->id=$pArg;}	public function setip_adr($pArg="0") {$this->ip_adr=$pArg;}	public function setvisit_date($pArg="0") {$this->visit_date=$pArg;}	public function settime($pArg="0") {$this->time=$pArg;}	public function seton_page($pArg="0") {$this->on_page=$pArg;}	public function getid() {return $this->id;}	public function getip_adr() {return $this->ip_adr;}	public function getvisit_date() {return $this->visit_date;}	public function gettime() {return $this->time;}	public function geton_page() {return $this->on_page;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".BLOCKED_VISITS.RET;		$and = "WHERE".RET;		if($array['id'] != "") {			$qry .= $and."id = '".$array['id']."'".RET;			$and = "AND".RET;		}		if($array['ip_adr'] != "") {			$qry .= $and."ip_adr = '".$array['ip_adr']."'".RET;			$and = "AND".RET;		}		if($array['visit_date'] != "") {			$qry .= $and."visit_date = '".$array['visit_date']."'".RET;			$and = "AND".RET;		}		if($array['time'] != "") {			$qry .= $and."time = '".$array['time']."'".RET;			$and = "AND".RET;		}		if($array['on_page'] != "") {			$qry .= $and."on_page = '".$array['on_page']."'".RET;			$and = "AND".RET;		}		$record = mysql_query($qry);		if(count($record[0]) == 0) {			return array();		} else {			$record = $record[0];			$this->setid($record['id']);			$this->setip_adr($record['ip_adr']);			$this->setvisit_date($record['visit_date']);			$this->settime($record['time']);			$this->seton_page($record['on_page']);			return true;		}	}	public static function readArray($array = array()) {		$qry = "SELECT *".RET."FROM ".BLOCKED_VISITS.RET;		$and = "WHERE".RET;		if($array['id'] != "") {			$qry .= $and."id = '".$array['id']."'".RET;			$and = "AND".RET;		}		if($array['ip_adr'] != "") {			$qry .= $and."ip_adr = '".$array['ip_adr']."'".RET;			$and = "AND".RET;		}		if($array['visit_date'] != "") {			$qry .= $and."visit_date = '".$array['visit_date']."'".RET;			$and = "AND".RET;		}		if($array['time'] != "") {			$qry .= $and."time = '".$array['time']."'".RET;			$and = "AND".RET;		}		if($array['on_page'] != "") {			$qry .= $and."on_page = '".$array['on_page']."'".RET;			$and = "AND".RET;		}		$recordset = mysql_query($qry);		$class_objects = array();		if(is_array($recordset) == true) {			while(list($i, $record) = each($recordset)) {				$class_object = new blocked_visits();				$class_object->setid($record['id']);				$class_object->setip_adr($record['ip_adr']);				$class_object->setvisit_date($record['visit_date']);				$class_object->settime($record['time']);				$class_object->seton_page($record['on_page']);				$class_objects[$class_object->getid()] = $class_object;			}		}		return $class_objects;	}	public function insert() {		if($this->getid() != '') {			$qry  = "UPDATE ".BLOCKED_VISITS.RET."SET".RET.			"id = '".$this->getid()."',".RET.			"ip_adr = '".$this->getip_adr()."',".RET.			"visit_date = '".$this->getvisit_date()."',".RET.			"time = '".$this->gettime()."',".RET.			"on_page = '".$this->geton_page()."'".RET.			"WHERE id = ".$this->getid().RET;			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".BLOCKED_VISITS." (".RET.			"ip_adr, visit_date, time, on_page".RET.				") VALUES (".RET.			"'".$this->getip_adr()."',".RET.			"'".$this->getvisit_date()."',".RET.			"'".$this->gettime()."',".RET.			"'".$this->geton_page()."'".RET.			")".RET;			$res = mysql_query($qry);			$this->setid(mysql_insert_id($res));		}	}	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".BLOCKED_VISITS.RET;		$and = "WHERE".RET;		if($array['id'] != "") {			$qry .= $and."id = '".$array['id']."'".RET;			$and = "AND".RET;		}		if($array['ip_adr'] != "") {			$qry .= $and."ip_adr = '".$array['ip_adr']."'".RET;			$and = "AND".RET;		}		if($array['visit_date'] != "") {			$qry .= $and."visit_date = '".$array['visit_date']."'".RET;			$and = "AND".RET;		}		if($array['time'] != "") {			$qry .= $and."time = '".$array['time']."'".RET;			$and = "AND".RET;		}		if($array['on_page'] != "") {			$qry .= $and."on_page = '".$array['on_page']."'".RET;			$and = "AND".RET;		}		mysql_query($qry);	}}?>