<?php/**********************************************************************hm_log.class.phpGenerated by STRUCTY 2012.12.14 11:55:06.Copyright 2011 Structy, Frdric Aebi. All rights reserved.**********************************************************************/define("HM_LOG", "hm_log"); class hm_log {	private $log_id;	private $log_member_id;	private $log_in_time;	private $log_out_time;	private $log_tbl_id;		public function setlog_id($pArg="0") {$this->log_id=$pArg;}	public function setlog_member_id($pArg="0") {$this->log_member_id=$pArg;}	public function setlog_in_time($pArg="0") {$this->log_in_time=$pArg;}	public function setlog_out_time($pArg="0") {$this->log_out_time=$pArg;}	public function setlog_tbl_id($pArg="0") {$this->log_tbl_id=$pArg;}	public function getlog_id() {return $this->log_id;}	public function getlog_member_id() {return $this->log_member_id;}	public function getlog_in_time() {return $this->log_in_time;}	public function getlog_out_time() {return $this->log_out_time;}	public function getlog_tbl_id() {return $this->log_tbl_id;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".HM_LOG.RET;		$and = "WHERE".RET;		if($array['log_id'] != "") {			$qry .= $and."log_id = '".$array['log_id']."'".RET;			$and = "AND".RET;		}		if($array['log_member_id'] != "") {			$qry .= $and."log_member_id = '".$array['log_member_id']."'".RET;			$and = "AND".RET;		}		if($array['log_in_time'] != "") {			$qry .= $and."log_in_time = '".$array['log_in_time']."'".RET;			$and = "AND".RET;		}		if($array['log_out_time'] != "") {			$qry .= $and."log_out_time = '".$array['log_out_time']."'".RET;			$and = "AND".RET;		}				if($array['log_tbl_id'] != "") {			$qry .= $and."log_tbl_id = '".$array['log_tbl_id']."'".RET;			$and = "AND".RET;		}			$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setlog_id($record['log_id']);				$this->setlog_member_id($record['log_member_id']);				$this->setlog_in_time($record['log_in_time']);				$this->setlog_out_time($record['log_out_time']);				$this->setlog_tbl_id($record['log_tbl_id']);				return true;			}		}	}	public static function readArray($array = array(), $isArray=0,&$result_found=0) {		$qry = "SELECT *".RET."FROM ".HM_LOG.RET;		$and = "WHERE".RET;		if($array['log_id'] != "") {			$qry .= $and."log_id = '".$array['log_id']."'".RET;			$and = "AND".RET;		}		if($array['log_member_id'] != "") {			$qry .= $and."log_member_id = '".$array['log_member_id']."'".RET;			$and = "AND".RET;		}		if($array['log_in_time'] != "") {			$qry .= $and."log_in_time = '".$array['log_in_time']."'".RET;			$and = "AND".RET;		}		if($array['log_out_time'] != "") {			$qry .= $and."log_out_time = '".$array['log_out_time']."'".RET;			$and = "AND".RET;		}				if($array['log_tbl_id'] != "") {			$qry .= $and."log_tbl_id = '".$array['log_tbl_id']."'".RET;			$and = "AND".RET;		}				if(is_not_empty($array['offset']) && is_not_empty($array['limit'])) {			$qry_with_limit  = $qry." order by log_id desc LIMIT {$array['offset']},{$array['limit']}";		}else{            $qry_with_limit  = $qry;        }         //echo $qry;        $result = mysql_query ($qry_with_limit);        $r1 = mysql_query($qry);        $result_found = mysql_num_rows($r1);		  		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$class_object = new hm_log();				if($isArray){					$class_objects[$record['log_id']]= $record;				}else{									$class_object->setlog_id($record['log_id']);					$class_object->setlog_member_id($record['log_member_id']);					$class_object->setlog_in_time($record['log_in_time']);					$class_object->setlog_out_time($record['log_out_time']);					$class_object->setlog_tbl_id($record['log_tbl_id']);					$class_objects[$class_object->getlog_id()] = $class_object;				}			}		}		return $class_objects;	}	public function insert() {		if($this->getlog_id() != '') {			$qry  = "UPDATE ".HM_LOG.RET."SET".RET.			"log_id = '".$this->getlog_id()."',".RET.			"log_member_id = '".$this->getlog_member_id()."',".RET.			"log_tbl_id = '".$this->getlog_tbl_id()."',".RET.			"log_in_time = '".$this->getlog_in_time()."',".RET.			"log_out_time = '".$this->getlog_out_time()."'".RET.			"WHERE log_id = ".$this->getlog_id().RET;			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".HM_LOG." (".RET.			"log_member_id,log_tbl_id,log_in_time, log_out_time".RET.				") VALUES (".RET.			"'".$this->getlog_member_id()."',".RET.			"'".$this->getlog_tbl_id()."',".RET.			"'".$this->getlog_in_time()."',".RET.			"'".$this->getlog_out_time()."'".RET.			")".RET;			$res = mysql_query($qry);						$this->setlog_id(mysql_insert_id());		}	}	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".HM_LOG.RET;		$and = "WHERE".RET;		if($array['log_id'] != "") {			$qry .= $and."log_id = '".$array['log_id']."'".RET;			$and = "AND".RET;		}		if($array['log_member_id'] != "") {			$qry .= $and."log_member_id = '".$array['log_member_id']."'".RET;			$and = "AND".RET;		}		if($array['log_in_time'] != "") {			$qry .= $and."log_in_time = '".$array['log_in_time']."'".RET;			$and = "AND".RET;		}		if($array['log_out_time'] != "") {			$qry .= $and."log_out_time = '".$array['log_out_time']."'".RET;			$and = "AND".RET;		}				if($array['log_tbl_id'] != "") {			$qry .= $and."log_tbl_id = '".$array['log_tbl_id']."'".RET;			$and = "AND".RET;		}		mysql_query($qry);	}		public function create($usermail,$date,$log_tbl_id=NULL){		 $new = new members();		 if($new->readObject(array('email'=> $usermail))){		 	if(is_gt_zero_num($new->getid())){				$this->setlog_id("");				$this->setlog_member_id($new->getid());				$this->setlog_in_time($date);				$this->setlog_tbl_id($log_tbl_id);				$this->insert(); 				return $this->getlog_id();			}		 } 		 return 0;	}		public function GetLogDetails($member_id,$limit=5,$offset=0){	   $arr = array();	   $log_counts =0;	   if(is_gt_zero_num($member_id)){	   $arr = $this->readArray(array("log_member_id"=>$member_id,"limit"=>$limit, "offset"=>$offset),1,$log_counts);	   }		return $arr;	}		}?>