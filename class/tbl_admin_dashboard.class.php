<?php/**********************************************************************tbl_admin_dashboard.class.phpGenerated by STRUCTY 2016.12.30 03:58:23.Copyright 2011 Structy, Frdric Aebi. All rights reserved.**********************************************************************/define("TBL_ADMIN_DASHBOARD", "tbl_admin_dashboard"); define('ADMDASH_ID', 'admdash_id'); define('ADMDASH_NAME', 'admdash_name'); define('ADMDASH_LNK', 'admdash_lnk'); define('ADMDASH_IMG', 'admdash_img'); define('ADMDASH_FOR_ADMIN', 'admdash_for_admin'); define('ADMDASH_FOR_MNGR', 'admdash_for_mngr'); define('ADMDASH_START_DATE', 'admdash_start_date'); define('ADMDASH_END_DATE', 'admdash_end_date'); define("TBL_ADMIN_DASHBOARD_ACTIVE_DATE",  ADMDASH_START_DATE);define("TBL_ADMIN_DASHBOARD_DEACTIVE_DATE",  ADMDASH_END_DATE);$tbl_admin_dashboard_active_condition= " (".TBL_ADMIN_DASHBOARD_DEACTIVE_DATE." is NULL OR ".TBL_ADMIN_DASHBOARD_DEACTIVE_DATE." = 0 OR ".TBL_ADMIN_DASHBOARD_DEACTIVE_DATE." > CURDATE( )) ";class tbl_admin_dashboard {	private $admdash_id;	private $admdash_name;	private $admdash_lnk;	private $admdash_img;	private $admdash_for_admin;	private $admdash_for_mngr;	private $admdash_start_date;	private $admdash_end_date;	private $tbl_admin_dashboard_active_date;	private $tbl_admin_dashboard_deactive_date;	public function setadmdash_id($pArg="0") {$this->admdash_id=$pArg;}	public function setadmdash_name($pArg="0") {$this->admdash_name=$pArg;}	public function setadmdash_lnk($pArg="0") {$this->admdash_lnk=$pArg;}	public function setadmdash_img($pArg="0") {$this->admdash_img=$pArg;}	public function setadmdash_for_admin($pArg="0") {$this->admdash_for_admin=$pArg;}	public function setadmdash_for_mngr($pArg="0") {$this->admdash_for_mngr=$pArg;}	public function setadmdash_start_date($pArg="0") {$this->admdash_start_date=$pArg;}	public function setadmdash_end_date($pArg="0") {$this->admdash_end_date=$pArg;}	public function settbl_admin_dashboard_active_date($pArg="0") {$this->tbl_admin_dashboard_active_date=$pArg;}	public function settbl_admin_dashboard_deactive_date($pArg="0") {$this->tbl_admin_dashboard_deactive_date=$pArg;}	public function getadmdash_id() {return $this->admdash_id;}	public function getadmdash_name() {return $this->admdash_name;}	public function getadmdash_lnk() {return $this->admdash_lnk;}	public function getadmdash_img() {return $this->admdash_img;}	public function getadmdash_for_admin() {return $this->admdash_for_admin;}	public function getadmdash_for_mngr() {return $this->admdash_for_mngr;}	public function getadmdash_start_date() {return $this->admdash_start_date;}	public function getadmdash_end_date() {return $this->admdash_end_date;}	public function gettbl_admin_dashboard_active_date($pArg="0") {return $this->tbl_admin_dashboard_active_date;}	public function gettbl_admin_dashboard_deactive_date($pArg="0") {return $this->tbl_admin_dashboard_deactive_date;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_ADMIN_DASHBOARD.RET;		$and = "WHERE".RET;		if($array[ADMDASH_ID] != "") {			$qry .= $and.ADMDASH_ID." = '".$array[ADMDASH_ID]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_NAME] != "") {			$qry .= $and.ADMDASH_NAME." = '".$array[ADMDASH_NAME]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_LNK] != "") {			$qry .= $and.ADMDASH_LNK." = '".$array[ADMDASH_LNK]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_IMG] != "") {			$qry .= $and.ADMDASH_IMG." = '".$array[ADMDASH_IMG]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_FOR_ADMIN] != "") {			$qry .= $and.ADMDASH_FOR_ADMIN." = '".$array[ADMDASH_FOR_ADMIN]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_FOR_MNGR] != "") {			$qry .= $and.ADMDASH_FOR_MNGR." = '".$array[ADMDASH_FOR_MNGR]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_START_DATE] != "") {			$qry .= $and.ADMDASH_START_DATE." = '".$array[ADMDASH_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_END_DATE] != "") {			$qry .= $and.ADMDASH_END_DATE." = '".$array[ADMDASH_END_DATE]."'".RET;			$and = "AND".RET;		}	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setadmdash_id($record[ADMDASH_ID]);				$this->setadmdash_name($record[ADMDASH_NAME]);				$this->setadmdash_lnk($record[ADMDASH_LNK]);				$this->setadmdash_img($record[ADMDASH_IMG]);				$this->setadmdash_for_admin($record[ADMDASH_FOR_ADMIN]);				$this->setadmdash_for_mngr($record[ADMDASH_FOR_MNGR]);				$this->setadmdash_start_date($record[ADMDASH_START_DATE]);				$this->setadmdash_end_date($record[ADMDASH_END_DATE]);				$this->settbl_admin_dashboard_active_date($record[TBL_ADMIN_DASHBOARD_ACTIVE_DATE]);				$this->settbl_admin_dashboard_deactive_date($record[TBL_ADMIN_DASHBOARD_DEACTIVE_DATE]);				return true;			}		}	}	public static function readArray($array = array(),&$result_found=0,$isArray=1) {		global $tbl_admin_dashboard_active_condition;		$qry = "SELECT *".RET."FROM ".TBL_ADMIN_DASHBOARD.RET;		$and = "WHERE".RET;		if($array[ADMDASH_ID] != "") {			$qry .= $and.ADMDASH_ID." = '".$array[ADMDASH_ID]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_NAME] != "") {			$qry .= $and.ADMDASH_NAME." = '".$array[ADMDASH_NAME]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_LNK] != "") {			$qry .= $and.ADMDASH_LNK." = '".$array[ADMDASH_LNK]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_IMG] != "") {			$qry .= $and.ADMDASH_IMG." = '".$array[ADMDASH_IMG]."'".RET;			$and = "AND".RET;		}		if(is_gt_zero_num($array[ADMDASH_FOR_ADMIN])) {			$qry .= $and.ADMDASH_FOR_ADMIN." = ".$array[ADMDASH_FOR_ADMIN]."".RET;			$and = "AND".RET;		}		if(is_gt_zero_num($array[ADMDASH_FOR_MNGR])) {			$qry .= $and.ADMDASH_FOR_MNGR." = ".$array[ADMDASH_FOR_MNGR]."".RET;			$and = "AND".RET;		}		if($array[ADMDASH_START_DATE] != "") {			$qry .= $and.ADMDASH_START_DATE." = '".$array[ADMDASH_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_END_DATE] != "") {			$qry .= $and.ADMDASH_END_DATE." = '".$array[ADMDASH_END_DATE]."'".RET;			$and = "AND".RET;		}		if(is_gt_zero_num($array["isActive"])) {			$qry .= $and.$tbl_admin_dashboard_active_condition;;			$and = "AND".RET;		}		if(is_not_empty($array[SORT_ON]) && is_not_empty($array[SORT_BY])) {		$qry .=" ORDER BY ".$array[SORT_ON]." ".$array[SORT_BY];		}		if(is_not_empty($array[OFFSET_TITLE]) && is_not_empty($array[LIMIT_TITLE])) {			$qry_with_limit  = $qry." LIMIT ".$array[OFFSET_TITLE].",".$array[LIMIT_TITLE];		}else{			$qry_with_limit  = $qry;		}		//echo $qry_with_limit;		$result = mysql_query ($qry_with_limit);		$r1 = mysql_query($qry);		if($r1){			$result_found = mysql_num_rows($r1);		}		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$isActive= 0;				//..check deactive date is not set or 0				if((is_not_empty($record[TBL_ADMIN_DASHBOARD_DEACTIVE_DATE])==false) || (is_gt_zero_num(strtotime($record[TBL_ADMIN_DASHBOARD_DEACTIVE_DATE]))== false)){					$isActive = 1; 				}else{					//..check the deactive date is greater than todays date					if(strtotime($record[TBL_ADMIN_DASHBOARD_DEACTIVE_DATE]) > strtotime(date(DATE_FORMAT))){						$isActive = 1;					}				}				if($isArray){					$class_object = array();					$class_object["admdash_id"]=$record[ADMDASH_ID];					$class_object["admdash_name"]=$record[ADMDASH_NAME];					$class_object["admdash_lnk"]=$record[ADMDASH_LNK];					$class_object["admdash_img"]=$record[ADMDASH_IMG];					$class_object["admdash_for_admin"]=$record[ADMDASH_FOR_ADMIN];					$class_object["admdash_for_mngr"]=$record[ADMDASH_FOR_MNGR];					$class_object["admdash_start_date"]=$record[ADMDASH_START_DATE];					$class_object["admdash_end_date"]=$record[ADMDASH_END_DATE];					$class_object["isActive"]=$isActive;				}else{					$class_object = new tbl_admin_dashboard();					$class_object->setadmdash_id($record[ADMDASH_ID]);					$class_object->setadmdash_name($record[ADMDASH_NAME]);					$class_object->setadmdash_lnk($record[ADMDASH_LNK]);					$class_object->setadmdash_img($record[ADMDASH_IMG]);					$class_object->setadmdash_for_admin($record[ADMDASH_FOR_ADMIN]);					$class_object->setadmdash_for_mngr($record[ADMDASH_FOR_MNGR]);					$class_object->setadmdash_start_date($record[ADMDASH_START_DATE]);					$class_object->setadmdash_end_date($record[ADMDASH_END_DATE]);				}				$class_objects[$record[ADMDASH_ID]] = $class_object;			}		}		return $class_objects;	}//..End readArray	public function insert() {		if($this->getadmdash_id() != '') {			$qry  = "UPDATE ".TBL_ADMIN_DASHBOARD.RET."SET".RET."			".ADMDASH_ID." = '".$this->getadmdash_id()."',".RET."			".ADMDASH_NAME." = '".$this->getadmdash_name()."',".RET."			".ADMDASH_LNK." = '".$this->getadmdash_lnk()."',".RET."			".ADMDASH_IMG." = '".$this->getadmdash_img()."',".RET."			".ADMDASH_FOR_ADMIN." = '".$this->getadmdash_for_admin()."',".RET."			".ADMDASH_FOR_MNGR." = '".$this->getadmdash_for_mngr()."',".RET."			".ADMDASH_START_DATE." = '".$this->getadmdash_start_date()."',".RET."			".ADMDASH_END_DATE." = '".$this->getadmdash_end_date()."'".RET.			"WHERE ".ADMDASH_ID." = ".$this->getadmdash_id().RET;			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".TBL_ADMIN_DASHBOARD." (".RET.			"".ADMDASH_NAME.", ".ADMDASH_LNK.", ".ADMDASH_IMG.", ".ADMDASH_FOR_ADMIN.", ".ADMDASH_FOR_MNGR.", ".ADMDASH_START_DATE.", ".ADMDASH_END_DATE.RET.				") VALUES (".RET.			"'".$this->getadmdash_name()."',".RET.			"'".$this->getadmdash_lnk()."',".RET.			"'".$this->getadmdash_img()."',".RET.			"'".$this->getadmdash_for_admin()."',".RET.			"'".$this->getadmdash_for_mngr()."',".RET.			"'".$this->getadmdash_start_date()."',".RET.			"'".$this->getadmdash_end_date()."'".RET.			")".RET;			$res = mysql_query($qry);			$this->setadmdash_id(mysql_insert_id());		}	}//..End Insert	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".TBL_ADMIN_DASHBOARD.RET;		$and = "WHERE".RET;		if($array[ADMDASH_ID] != "") {			$qry .= $and.ADMDASH_ID." = '".$array[ADMDASH_ID]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_NAME] != "") {			$qry .= $and.ADMDASH_NAME." = '".$array[ADMDASH_NAME]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_LNK] != "") {			$qry .= $and.ADMDASH_LNK." = '".$array[ADMDASH_LNK]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_IMG] != "") {			$qry .= $and.ADMDASH_IMG." = '".$array[ADMDASH_IMG]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_FOR_ADMIN] != "") {			$qry .= $and.ADMDASH_FOR_ADMIN." = '".$array[ADMDASH_FOR_ADMIN]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_FOR_MNGR] != "") {			$qry .= $and.ADMDASH_FOR_MNGR." = '".$array[ADMDASH_FOR_MNGR]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_START_DATE] != "") {			$qry .= $and.ADMDASH_START_DATE." = '".$array[ADMDASH_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[ADMDASH_END_DATE] != "") {			$qry .= $and.ADMDASH_END_DATE." = '".$array[ADMDASH_END_DATE]."'".RET;			$and = "AND".RET;		}		$res = mysql_query($qry);		if($res){			return OPERATION_SUCCESS;		};		return OPERATION_FAIL;	}//..End Delete	public function isAlreadyThere($admdash_name ,$admdash_lnk ,$admdash_img ,$admdash_for_admin ,$admdash_for_mngr ,$admdash_start_date ,$admdash_end_date) {		$unique_arr = array();			//$unique_arr[ADMDASH_ID]=$admdash_id;			//$unique_arr[ADMDASH_NAME]=$admdash_name;			//$unique_arr[ADMDASH_LNK]=$admdash_lnk;			//$unique_arr[ADMDASH_IMG]=$admdash_img;			//$unique_arr[ADMDASH_FOR_ADMIN]=$admdash_for_admin;			//$unique_arr[ADMDASH_FOR_MNGR]=$admdash_for_mngr;			//$unique_arr[ADMDASH_START_DATE]=$admdash_start_date;			//$unique_arr[ADMDASH_END_DATE]=$admdash_end_date;		if(is_not_empty($unique_arr)){			return $this->readObject($unique_arr);		}		return false;	}//..isAlreadyThere	public function create($admdash_name ,$admdash_lnk ,$admdash_img ,$admdash_for_admin ,$admdash_for_mngr ,$admdash_start_date ,$admdash_end_date) {		if(is_not_empty($admdash_name)){			if($this->isAlreadyThere($admdash_name ,$admdash_lnk ,$admdash_img ,$admdash_for_admin ,$admdash_for_mngr ,$admdash_start_date ,$admdash_end_date)){				return OPERATION_DUPLICATE;			}else{				$this->setadmdash_id("");				$this->setadmdash_name($admdash_name);				$this->setadmdash_lnk($admdash_lnk);				$this->setadmdash_img($admdash_img);				$this->setadmdash_for_admin($admdash_for_admin);				$this->setadmdash_for_mngr($admdash_for_mngr);				$this->setadmdash_start_date(date(DATE_FORMAT));				$this->insert();				return $this->getadmdash_id();			}		}		return OPERATION_FAIL;	}//..create	public function update($admdash_id, $admdash_name, $admdash_lnk, $admdash_img, $admdash_for_admin, $admdash_for_mngr, $admdash_start_date, $admdash_end_date) {		if(is_gt_zero_num($admdash_id)){			if ($this->readObject(array(ADMDASH_ID=>$admdash_id))){				$this->setadmdash_name($admdash_name);				$this->setadmdash_lnk($admdash_lnk);				$this->setadmdash_img($admdash_img);				$this->setadmdash_for_admin($admdash_for_admin);				$this->setadmdash_for_mngr($admdash_for_mngr);				$this->insert();				return OPERATION_SUCCESS;			}		}		return OPERATION_FAIL;	}//..update	public function activate($admdash_id){		if(is_gt_zero_num($admdash_id)){			if ($this->readObject(array(ADMDASH_ID=>$admdash_id))){				$qry  = "UPDATE ".TBL_ADMIN_DASHBOARD.RET."SET".RET."			".TBL_ADMIN_DASHBOARD_DEACTIVE_DATE." = '".date(EMPTY_DATE_FORMAT)."' WHERE ".ADMDASH_ID."={$admdash_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end activate	public function deactivate($admdash_id){		if(is_gt_zero_num($admdash_id)){			if ($this->readObject(array(ADMDASH_ID=>$admdash_id))){				$qry  = "UPDATE ".TBL_ADMIN_DASHBOARD.RET."SET".RET."			".TBL_ADMIN_DASHBOARD_DEACTIVE_DATE." = '".date(DATE_FORMAT)."' WHERE ".ADMDASH_ID."={$admdash_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end deactivate	public static function GetInfo($admdash_id) {		$info = array();		if($admdash_id != ""){			$obj_tbl_admin_dashboard = new tbl_admin_dashboard();			if($obj_tbl_admin_dashboard->readObject(array("admdash_id"=>$admdash_id))){				$info["admdash_id"]=$obj_tbl_admin_dashboard->getadmdash_id();				$info["admdash_name"]=$obj_tbl_admin_dashboard->getadmdash_name();				$info["admdash_lnk"]=$obj_tbl_admin_dashboard->getadmdash_lnk();				$info["admdash_img"]=$obj_tbl_admin_dashboard->getadmdash_img();				$info["admdash_for_admin"]=$obj_tbl_admin_dashboard->getadmdash_for_admin();				$info["admdash_for_mngr"]=$obj_tbl_admin_dashboard->getadmdash_for_mngr();				$info["admdash_start_date"]=$obj_tbl_admin_dashboard->getadmdash_start_date();				$info["admdash_end_date"]=$obj_tbl_admin_dashboard->getadmdash_end_date();				$info["isActive"] = 0;				//..check deactive date is not set or 0				if((is_not_empty($obj_tbl_admin_dashboard->gettbl_admin_dashboard_deactive_date())==false)  || (is_gt_zero_num(strtotime($obj_tbl_admin_dashboard->gettbl_admin_dashboard_deactive_date()))== false)){					$info["isActive"] = 1;				}else{					//..check the deactive date is greater than todays date					if(strtotime($obj_tbl_admin_dashboard->gettbl_admin_dashboard_deactive_date()) > strtotime(date(DATE_FORMAT))){						$info["isActive"] = 1;					}				}			}		unset($obj_tbl_admin_dashboard);		return $info;		}	}//..End GetInfo	public static function GetFields($data){		global $tbl_admin_dashboard_active_condition;		$arr = array();		if(is_not_empty($data)){			$qry ="SELECT ".$data['key_field'].",".$data['value_field']." FROM ".TBL_ADMIN_DASHBOARD."";			if(is_gt_zero_num($data['isActive'])){				$qry .= " WHERE ".$tbl_admin_dashboard_active_condition;			}			$res = mysql_query($qry); 			if($res){				while($row=mysql_fetch_assoc($res)){					$arr[$row[$data['key_field']]] = $row[$data['value_field']];				}			}		}		return $arr;	}//.. End of GetFields}//..End tbl_admin_dashboard?>