<?php/**********************************************************************tbl_rest_menu_opt.class.phpGenerated by STRUCTY 2014.04.22 05:28:31.Copyright 2011 Structy, Frédéric Aebi. All rights reserved.**********************************************************************/define("TBL_REST_MENU_OPT", "tbl_rest_menu_opt"); define('RST_MNU_ID', 'rst_mnu_id'); define('RST_MNU_RESTAURANT', 'rst_mnu_restaurant'); define('RST_MNU_ADD_ORDER', 'rst_mnu_add_order'); define('RST_MNU_ADD_PROM', 'rst_mnu_add_prom'); define('RST_MNU_SERV_REQ', 'rst_mnu_serv_req'); define('RST_MNU_ORDERS', 'rst_mnu_orders'); define('RST_MNU_TBL_STATUSES', 'rst_mnu_tbl_statuses'); define('RST_MNU_PROM_CLAIMED', 'rst_mnu_prom_claimed'); define('RST_MNU_COMPLAINTS', 'rst_mnu_complaints'); define('RST_MNU_TRANSFER_TBL', 'rst_mnu_transfer_tbl'); define('RST_MNU_ONLINE_USERS', 'rst_mnu_online_users'); define('RST_MNU_LOYALTY_REWARDS', 'rst_mnu_loyalty_rewards'); define('RST_MNU_CONFIGURATION', 'rst_mnu_configuration'); define('RST_MNU_REWARD_CONF', 'rst_mnu_reward_conf');define('RST_MNU_ALLERGY', 'rst_mnu_allergy');define('RST_MNU_START_DATE', 'rst_mnu_start_date'); define('RST_MNU_END_DATE', 'rst_mnu_end_date'); define("TBL_REST_MENU_OPT_ACTIVE_DATE",  RST_MNU_START_DATE);define("TBL_REST_MENU_OPT_DEACTIVE_DATE",  RST_MNU_END_DATE);$tbl_rest_menu_opt_active_condition= " (".TBL_REST_MENU_OPT_DEACTIVE_DATE." is NULL OR ".TBL_REST_MENU_OPT_DEACTIVE_DATE." = 0 OR ".TBL_REST_MENU_OPT_DEACTIVE_DATE." > CURDATE( )) ";class tbl_rest_menu_opt {	private $rst_mnu_id;	private $rst_mnu_restaurant;	private $rst_mnu_add_order;	private $rst_mnu_add_prom;	private $rst_mnu_serv_req;	private $rst_mnu_orders;	private $rst_mnu_tbl_statuses;	private $rst_mnu_prom_claimed;	private $rst_mnu_complaints;	private $rst_mnu_transfer_tbl;	private $rst_mnu_online_users;	private $rst_mnu_loyalty_rewards;	private $rst_mnu_configuration;		private $rst_mnu_reward_conf;	private $rst_mnu_allergy;		private $rst_mnu_start_date;	private $rst_mnu_end_date;	private $tbl_rest_menu_opt_active_date;	private $tbl_rest_menu_opt_deactive_date;		private $rst_mnu_restaurant_nm;	public function setrst_mnu_id($pArg="0") {$this->rst_mnu_id=$pArg;}	public function setrst_mnu_restaurant($pArg="0") {$this->rst_mnu_restaurant=$pArg;}	public function setrst_mnu_add_order($pArg="0") {$this->rst_mnu_add_order=$pArg;}	public function setrst_mnu_add_prom($pArg="0") {$this->rst_mnu_add_prom=$pArg;}	public function setrst_mnu_serv_req($pArg="0") {$this->rst_mnu_serv_req=$pArg;}	public function setrst_mnu_orders($pArg="0") {$this->rst_mnu_orders=$pArg;}	public function setrst_mnu_tbl_statuses($pArg="0") {$this->rst_mnu_tbl_statuses=$pArg;}	public function setrst_mnu_prom_claimed($pArg="0") {$this->rst_mnu_prom_claimed=$pArg;}	public function setrst_mnu_complaints($pArg="0") {$this->rst_mnu_complaints=$pArg;}	public function setrst_mnu_transfer_tbl($pArg="0") {$this->rst_mnu_transfer_tbl=$pArg;}	public function setrst_mnu_online_users($pArg="0") {$this->rst_mnu_online_users=$pArg;}	public function setrst_mnu_loyalty_rewards($pArg="0") {$this->rst_mnu_loyalty_rewards=$pArg;}	public function setrst_mnu_configuration($pArg="0") {$this->rst_mnu_configuration=$pArg;}		public function setrst_mnu_reward_conf($pArg="0") {$this->rst_mnu_reward_conf=$pArg;}	public function setrst_mnu_allergy($pArg="0") {$this->rst_mnu_allergy=$pArg;}			public function setrst_mnu_start_date($pArg="0") {$this->rst_mnu_start_date=$pArg;}	public function setrst_mnu_end_date($pArg="0") {$this->rst_mnu_end_date=$pArg;}	public function settbl_rest_menu_opt_active_date($pArg="0") {$this->tbl_rest_menu_opt_active_date=$pArg;}	public function settbl_rest_menu_opt_deactive_date($pArg="0") {$this->tbl_rest_menu_opt_deactive_date=$pArg;}	public function setrst_mnu_restaurant_nm($pArg="0") {$this->rst_mnu_restaurant_nm=$pArg;}		public function getrst_mnu_id() {return $this->rst_mnu_id;}	public function getrst_mnu_restaurant() {return $this->rst_mnu_restaurant;}	public function getrst_mnu_add_order() {return $this->rst_mnu_add_order;}	public function getrst_mnu_add_prom() {return $this->rst_mnu_add_prom;}	public function getrst_mnu_serv_req() {return $this->rst_mnu_serv_req;}	public function getrst_mnu_orders() {return $this->rst_mnu_orders;}	public function getrst_mnu_tbl_statuses() {return $this->rst_mnu_tbl_statuses;}	public function getrst_mnu_prom_claimed() {return $this->rst_mnu_prom_claimed;}	public function getrst_mnu_complaints() {return $this->rst_mnu_complaints;}	public function getrst_mnu_transfer_tbl() {return $this->rst_mnu_transfer_tbl;}	public function getrst_mnu_online_users() {return $this->rst_mnu_online_users;}	public function getrst_mnu_loyalty_rewards() {return $this->rst_mnu_loyalty_rewards;}	public function getrst_mnu_configuration() {return $this->rst_mnu_configuration;}		public function getrst_mnu_reward_conf() {return $this->rst_mnu_reward_conf;}	public function getrst_mnu_allergy() {return $this->rst_mnu_allergy;}		public function getrst_mnu_start_date() {return $this->rst_mnu_start_date;}	public function getrst_mnu_end_date() {return $this->rst_mnu_end_date;}	public function gettbl_rest_menu_opt_active_date($pArg="0") {return $this->tbl_rest_menu_opt_active_date;}	public function gettbl_rest_menu_opt_deactive_date($pArg="0") {return $this->tbl_rest_menu_opt_deactive_date;}		public function getrst_mnu_restaurant_nm() {return $this->rst_mnu_restaurant_nm;}	public function readObject($array = array()) {		//$qry = "SELECT *".RET."FROM ".TBL_REST_MENU_OPT.RET;		$qry = "SELECT `opt`.*,`r`.`".RESTAURENT_NAME."` FROM `".TBL_REST_MENU_OPT."` `opt` 						INNER JOIN `".TBL_RESTAURENT."` `r`  ON 						`r`.`".RESTAURENT_ID."`=`opt`.`".RST_MNU_RESTAURANT."`";		$and = "WHERE".RET;		if($array[RST_MNU_ID] != "") {			$qry .= $and.RST_MNU_ID." = '".$array[RST_MNU_ID]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_RESTAURANT] != "") {			$qry .= $and.RST_MNU_RESTAURANT." = '".$array[RST_MNU_RESTAURANT]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_ADD_ORDER] != "") {			$qry .= $and.RST_MNU_ADD_ORDER." = '".$array[RST_MNU_ADD_ORDER]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_ADD_PROM] != "") {			$qry .= $and.RST_MNU_ADD_PROM." = '".$array[RST_MNU_ADD_PROM]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_SERV_REQ] != "") {			$qry .= $and.RST_MNU_SERV_REQ." = '".$array[RST_MNU_SERV_REQ]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_ORDERS] != "") {			$qry .= $and.RST_MNU_ORDERS." = '".$array[RST_MNU_ORDERS]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_TBL_STATUSES] != "") {			$qry .= $and.RST_MNU_TBL_STATUSES." = '".$array[RST_MNU_TBL_STATUSES]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_PROM_CLAIMED] != "") {			$qry .= $and.RST_MNU_PROM_CLAIMED." = '".$array[RST_MNU_PROM_CLAIMED]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_COMPLAINTS] != "") {			$qry .= $and.RST_MNU_COMPLAINTS." = '".$array[RST_MNU_COMPLAINTS]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_TRANSFER_TBL] != "") {			$qry .= $and.RST_MNU_TRANSFER_TBL." = '".$array[RST_MNU_TRANSFER_TBL]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_ONLINE_USERS] != "") {			$qry .= $and.RST_MNU_ONLINE_USERS." = '".$array[RST_MNU_ONLINE_USERS]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_LOYALTY_REWARDS] != "") {			$qry .= $and.RST_MNU_LOYALTY_REWARDS." = '".$array[RST_MNU_LOYALTY_REWARDS]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_CONFIGURATION] != "") {			$qry .= $and.RST_MNU_CONFIGURATION." = '".$array[RST_MNU_CONFIGURATION]."'".RET;			$and = "AND".RET;		}				if($array[RST_MNU_REWARD_CONF] != "") {			$qry .= $and.RST_MNU_CONFIGURATION." = '".$array[RST_MNU_CONFIGURATION]."'".RET;			$and = "AND".RET;		}				if($array[RST_MNU_ALLERGY] != "") {			$qry .= $and.RST_MNU_ALLERGY." = '".$array[RST_MNU_ALLERGY]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_START_DATE] != "") {			$qry .= $and.RST_MNU_START_DATE." = '".$array[RST_MNU_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_END_DATE] != "") {			$qry .= $and.RST_MNU_END_DATE." = '".$array[RST_MNU_END_DATE]."'".RET;			$and = "AND".RET;		}	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setrst_mnu_id($record[RST_MNU_ID]);				$this->setrst_mnu_restaurant($record[RST_MNU_RESTAURANT]);				$this->setrst_mnu_add_order($record[RST_MNU_ADD_ORDER]);				$this->setrst_mnu_add_prom($record[RST_MNU_ADD_PROM]);				$this->setrst_mnu_serv_req($record[RST_MNU_SERV_REQ]);				$this->setrst_mnu_orders($record[RST_MNU_ORDERS]);				$this->setrst_mnu_tbl_statuses($record[RST_MNU_TBL_STATUSES]);				$this->setrst_mnu_prom_claimed($record[RST_MNU_PROM_CLAIMED]);				$this->setrst_mnu_complaints($record[RST_MNU_COMPLAINTS]);				$this->setrst_mnu_transfer_tbl($record[RST_MNU_TRANSFER_TBL]);				$this->setrst_mnu_online_users($record[RST_MNU_ONLINE_USERS]);				$this->setrst_mnu_loyalty_rewards($record[RST_MNU_LOYALTY_REWARDS]);				$this->setrst_mnu_configuration($record[RST_MNU_CONFIGURATION]);								$this->setrst_mnu_reward_conf($record[RST_MNU_REWARD_CONF]);				$this->setrst_mnu_allergy($record[RST_MNU_ALLERGY]);								$this->setrst_mnu_start_date($record[RST_MNU_START_DATE]);				$this->setrst_mnu_end_date($record[RST_MNU_END_DATE]);				$this->settbl_rest_menu_opt_active_date($record[TBL_REST_MENU_OPT_ACTIVE_DATE]);				$this->settbl_rest_menu_opt_deactive_date($record[TBL_REST_MENU_OPT_DEACTIVE_DATE]);				$this->setrst_mnu_restaurant_nm($record[RESTAURENT_NAME]);				return true;			}		}	}	public static function readArray($array = array(),&$result_found=0,$isArray=1) {		global $tbl_rest_menu_opt_active_condition;		$qry = "SELECT `opt`.*,`r`.`".RESTAURENT_NAME."` FROM `".TBL_REST_MENU_OPT."` `opt` 						INNER JOIN `".TBL_RESTAURENT."` `r`  ON 						`r`.`".RESTAURENT_ID."`=`opt`.`".RST_MNU_RESTAURANT."`";		$and = "WHERE".RET;		if($array[RST_MNU_ID] != "") {			$qry .= $and.RST_MNU_ID." = '".$array[RST_MNU_ID]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_RESTAURANT] != "") {			$qry .= $and.RST_MNU_RESTAURANT." = '".$array[RST_MNU_RESTAURANT]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_ADD_ORDER] != "") {			$qry .= $and.RST_MNU_ADD_ORDER." = '".$array[RST_MNU_ADD_ORDER]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_ADD_PROM] != "") {			$qry .= $and.RST_MNU_ADD_PROM." = '".$array[RST_MNU_ADD_PROM]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_SERV_REQ] != "") {			$qry .= $and.RST_MNU_SERV_REQ." = '".$array[RST_MNU_SERV_REQ]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_ORDERS] != "") {			$qry .= $and.RST_MNU_ORDERS." = '".$array[RST_MNU_ORDERS]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_TBL_STATUSES] != "") {			$qry .= $and.RST_MNU_TBL_STATUSES." = '".$array[RST_MNU_TBL_STATUSES]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_PROM_CLAIMED] != "") {			$qry .= $and.RST_MNU_PROM_CLAIMED." = '".$array[RST_MNU_PROM_CLAIMED]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_COMPLAINTS] != "") {			$qry .= $and.RST_MNU_COMPLAINTS." = '".$array[RST_MNU_COMPLAINTS]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_TRANSFER_TBL] != "") {			$qry .= $and.RST_MNU_TRANSFER_TBL." = '".$array[RST_MNU_TRANSFER_TBL]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_ONLINE_USERS] != "") {			$qry .= $and.RST_MNU_ONLINE_USERS." = '".$array[RST_MNU_ONLINE_USERS]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_LOYALTY_REWARDS] != "") {			$qry .= $and.RST_MNU_LOYALTY_REWARDS." = '".$array[RST_MNU_LOYALTY_REWARDS]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_CONFIGURATION] != "") {			$qry .= $and.RST_MNU_CONFIGURATION." = '".$array[RST_MNU_CONFIGURATION]."'".RET;			$and = "AND".RET;		}				if($array[RST_MNU_ALLERGY] != "") {			$qry .= $and.RST_MNU_ALLERGY." = '".$array[RST_MNU_ALLERGY]."'".RET;			$and = "AND".RET;		}				if($array[RST_MNU_START_DATE] != "") {			$qry .= $and.RST_MNU_START_DATE." = '".$array[RST_MNU_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_START_DATE] != "") {			$qry .= $and.RST_MNU_START_DATE." = '".$array[RST_MNU_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_END_DATE] != "") {			$qry .= $and.RST_MNU_END_DATE." = '".$array[RST_MNU_END_DATE]."'".RET;			$and = "AND".RET;		}		if(is_gt_zero_num($array["isActive"])) {			$qry .= $and.$tbl_rest_menu_opt_active_condition;;			$and = "AND".RET;		}		if(is_not_empty($array[SORT_ON]) && is_not_empty($array[SORT_BY])) {		$qry .=" ORDER BY ".$array[SORT_ON]." ".$array[SORT_BY];		}		if(is_not_empty($array[OFFSET_TITLE]) && is_not_empty($array[LIMIT_TITLE])) {			$qry_with_limit  = $qry." LIMIT ".$array[OFFSET_TITLE].",".$array[LIMIT_TITLE];		}else{			$qry_with_limit  = $qry;		}		$result = mysql_query ($qry_with_limit);		$r1 = mysql_query($qry);				//echo $qry_with_limit;				if($r1){			$result_found = mysql_num_rows($r1);		}		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$isActive= 0;				//..check deactive date is not set or 0				if((is_not_empty($record[TBL_REST_MENU_OPT_DEACTIVE_DATE])==false) || (is_gt_zero_num(strtotime($record[TBL_REST_MENU_OPT_DEACTIVE_DATE]))== false)){					$isActive = 1; 				}else{					//..check the deactive date is greater than todays date					if(strtotime($record[TBL_REST_MENU_OPT_DEACTIVE_DATE]) > strtotime(date(DATE_FORMAT))){						$isActive = 1;					}				}				if($isArray){					$class_object = array();					$class_object["rst_mnu_id"]=$record[RST_MNU_ID];					$class_object["rst_mnu_restaurant"]=$record[RST_MNU_RESTAURANT];					$class_object["rst_mnu_add_order"]=$record[RST_MNU_ADD_ORDER];					$class_object["rst_mnu_add_prom"]=$record[RST_MNU_ADD_PROM];					$class_object["rst_mnu_serv_req"]=$record[RST_MNU_SERV_REQ];					$class_object["rst_mnu_orders"]=$record[RST_MNU_ORDERS];					$class_object["rst_mnu_tbl_statuses"]=$record[RST_MNU_TBL_STATUSES];					$class_object["rst_mnu_prom_claimed"]=$record[RST_MNU_PROM_CLAIMED];					$class_object["rst_mnu_complaints"]=$record[RST_MNU_COMPLAINTS];					$class_object["rst_mnu_transfer_tbl"]=$record[RST_MNU_TRANSFER_TBL];					$class_object["rst_mnu_online_users"]=$record[RST_MNU_ONLINE_USERS];					$class_object["rst_mnu_loyalty_rewards"]=$record[RST_MNU_LOYALTY_REWARDS];					$class_object["rst_mnu_configuration"]=$record[RST_MNU_CONFIGURATION];										$class_object["rst_mnu_reward_conf"]=$record[RST_MNU_REWARD_CONF];					$class_object["rst_mnu_allergy"]=$record[RST_MNU_ALLERGY];										$class_object["rst_mnu_start_date"]=$record[RST_MNU_START_DATE];					$class_object["rst_mnu_end_date"]=$record[RST_MNU_END_DATE];					$class_object["rst_mnu_restaurant_nm"]=$record[RESTAURENT_NAME];										$class_object["isActive"]=$isActive;				}else{					$class_object = new tbl_rest_menu_opt();					$class_object->setrst_mnu_id($record[RST_MNU_ID]);					$class_object->setrst_mnu_restaurant($record[RST_MNU_RESTAURANT]);					$class_object->setrst_mnu_add_order($record[RST_MNU_ADD_ORDER]);					$class_object->setrst_mnu_add_prom($record[RST_MNU_ADD_PROM]);					$class_object->setrst_mnu_serv_req($record[RST_MNU_SERV_REQ]);					$class_object->setrst_mnu_orders($record[RST_MNU_ORDERS]);					$class_object->setrst_mnu_tbl_statuses($record[RST_MNU_TBL_STATUSES]);					$class_object->setrst_mnu_prom_claimed($record[RST_MNU_PROM_CLAIMED]);					$class_object->setrst_mnu_complaints($record[RST_MNU_COMPLAINTS]);					$class_object->setrst_mnu_transfer_tbl($record[RST_MNU_TRANSFER_TBL]);					$class_object->setrst_mnu_online_users($record[RST_MNU_ONLINE_USERS]);					$class_object->setrst_mnu_loyalty_rewards($record[RST_MNU_LOYALTY_REWARDS]);					$class_object->setrst_mnu_configuration($record[RST_MNU_CONFIGURATION]);										$class_object->setrst_mnu_reward_conf($record[RST_MNU_REWARD_CONF]);					$class_object->setrst_mnu_allergy($record[RST_MNU_ALLERGY]);										$class_object->setrst_mnu_start_date($record[RST_MNU_START_DATE]);					$class_object->setrst_mnu_end_date($record[RST_MNU_END_DATE]);				}				$class_objects[$record[RST_MNU_ID]] = $class_object;			}		}		return $class_objects;	}//..End readArray	public function insert() {		if($this->getrst_mnu_id() != '') {			$qry  = "UPDATE ".TBL_REST_MENU_OPT.RET."SET".RET."			".RST_MNU_ID." = '".$this->getrst_mnu_id()."',".RET."			".RST_MNU_RESTAURANT." = '".$this->getrst_mnu_restaurant()."',".RET."			".RST_MNU_ADD_ORDER." = '".$this->getrst_mnu_add_order()."',".RET."			".RST_MNU_ADD_PROM." = '".$this->getrst_mnu_add_prom()."',".RET."			".RST_MNU_SERV_REQ." = '".$this->getrst_mnu_serv_req()."',".RET."			".RST_MNU_ORDERS." = '".$this->getrst_mnu_orders()."',".RET."			".RST_MNU_TBL_STATUSES." = '".$this->getrst_mnu_tbl_statuses()."',".RET."			".RST_MNU_PROM_CLAIMED." = '".$this->getrst_mnu_prom_claimed()."',".RET."			".RST_MNU_COMPLAINTS." = '".$this->getrst_mnu_complaints()."',".RET."			".RST_MNU_TRANSFER_TBL." = '".$this->getrst_mnu_transfer_tbl()."',".RET."			".RST_MNU_ONLINE_USERS." = '".$this->getrst_mnu_online_users()."',".RET."			".RST_MNU_LOYALTY_REWARDS." = '".$this->getrst_mnu_loyalty_rewards()."',".RET."			".RST_MNU_CONFIGURATION." = '".$this->getrst_mnu_configuration()."',".RET."						".RST_MNU_REWARD_CONF." = '".$this->getrst_mnu_reward_conf()."',".RET."			".RST_MNU_ALLERGY." = '".$this->getrst_mnu_allergy()."',".RET."						".RST_MNU_START_DATE." = '".$this->getrst_mnu_start_date()."',".RET."			".RST_MNU_END_DATE." = '".$this->getrst_mnu_end_date()."'".RET.			"WHERE ".RST_MNU_ID." = ".$this->getrst_mnu_id().RET;			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".TBL_REST_MENU_OPT." (".RET.			"".RST_MNU_RESTAURANT.", ".RST_MNU_ADD_ORDER.", ".RST_MNU_ADD_PROM.", ".RST_MNU_SERV_REQ.", ".RST_MNU_ORDERS.", ".RST_MNU_TBL_STATUSES.", ".RST_MNU_PROM_CLAIMED.", ".RST_MNU_COMPLAINTS.", ".RST_MNU_TRANSFER_TBL.", ".RST_MNU_ONLINE_USERS.", ".RST_MNU_LOYALTY_REWARDS.", ".RST_MNU_CONFIGURATION.", ".RST_MNU_REWARD_CONF.", ".RST_MNU_ALLERGY.", ".RST_MNU_START_DATE.", ".RST_MNU_END_DATE.RET.				") VALUES (".RET.			"'".$this->getrst_mnu_restaurant()."',".RET.			"'".$this->getrst_mnu_add_order()."',".RET.			"'".$this->getrst_mnu_add_prom()."',".RET.			"'".$this->getrst_mnu_serv_req()."',".RET.			"'".$this->getrst_mnu_orders()."',".RET.			"'".$this->getrst_mnu_tbl_statuses()."',".RET.			"'".$this->getrst_mnu_prom_claimed()."',".RET.			"'".$this->getrst_mnu_complaints()."',".RET.			"'".$this->getrst_mnu_transfer_tbl()."',".RET.			"'".$this->getrst_mnu_online_users()."',".RET.			"'".$this->getrst_mnu_loyalty_rewards()."',".RET.			"'".$this->getrst_mnu_configuration()."',".RET.						"'".$this->getrst_mnu_reward_conf()."',".RET.			"'".$this->getrst_mnu_allergy()."',".RET.						"'".$this->getrst_mnu_start_date()."',".RET.			"'".$this->getrst_mnu_end_date()."'".RET.			")".RET;			$res = mysql_query($qry);			$this->setrst_mnu_id(mysql_insert_id());		}	}//..End Insert	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".TBL_REST_MENU_OPT.RET;		$and = "WHERE".RET;		if($array[RST_MNU_ID] != "") {			$qry .= $and.RST_MNU_ID." = '".$array[RST_MNU_ID]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_RESTAURANT] != "") {			$qry .= $and.RST_MNU_RESTAURANT." = '".$array[RST_MNU_RESTAURANT]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_ADD_ORDER] != "") {			$qry .= $and.RST_MNU_ADD_ORDER." = '".$array[RST_MNU_ADD_ORDER]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_ADD_PROM] != "") {			$qry .= $and.RST_MNU_ADD_PROM." = '".$array[RST_MNU_ADD_PROM]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_SERV_REQ] != "") {			$qry .= $and.RST_MNU_SERV_REQ." = '".$array[RST_MNU_SERV_REQ]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_ORDERS] != "") {			$qry .= $and.RST_MNU_ORDERS." = '".$array[RST_MNU_ORDERS]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_TBL_STATUSES] != "") {			$qry .= $and.RST_MNU_TBL_STATUSES." = '".$array[RST_MNU_TBL_STATUSES]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_PROM_CLAIMED] != "") {			$qry .= $and.RST_MNU_PROM_CLAIMED." = '".$array[RST_MNU_PROM_CLAIMED]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_COMPLAINTS] != "") {			$qry .= $and.RST_MNU_COMPLAINTS." = '".$array[RST_MNU_COMPLAINTS]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_TRANSFER_TBL] != "") {			$qry .= $and.RST_MNU_TRANSFER_TBL." = '".$array[RST_MNU_TRANSFER_TBL]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_ONLINE_USERS] != "") {			$qry .= $and.RST_MNU_ONLINE_USERS." = '".$array[RST_MNU_ONLINE_USERS]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_LOYALTY_REWARDS] != "") {			$qry .= $and.RST_MNU_LOYALTY_REWARDS." = '".$array[RST_MNU_LOYALTY_REWARDS]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_CONFIGURATION] != "") {			$qry .= $and.RST_MNU_CONFIGURATION." = '".$array[RST_MNU_CONFIGURATION]."'".RET;			$and = "AND".RET;		}				if($array[RST_MNU_START_DATE] != "") {			$qry .= $and.RST_MNU_START_DATE." = '".$array[RST_MNU_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_START_DATE] != "") {			$qry .= $and.RST_MNU_START_DATE." = '".$array[RST_MNU_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[RST_MNU_END_DATE] != "") {			$qry .= $and.RST_MNU_END_DATE." = '".$array[RST_MNU_END_DATE]."'".RET;			$and = "AND".RET;		}		$res = mysql_query($qry);		if($res){			return OPERATION_SUCCESS;		};		return OPERATION_FAIL;	}//..End Delete	public function isAlreadyThere($rst_mnu_restaurant ,$rst_mnu_add_order ,$rst_mnu_add_prom ,$rst_mnu_serv_req ,$rst_mnu_orders ,$rst_mnu_tbl_statuses ,$rst_mnu_prom_claimed ,$rst_mnu_complaints ,$rst_mnu_transfer_tbl ,$rst_mnu_online_users ,$rst_mnu_loyalty_rewards ,$rst_mnu_configuration ,$rst_mnu_start_date ,$rst_mnu_end_date) {		$unique_arr = array();			//$unique_arr[RST_MNU_ID]=$rst_mnu_id;			$unique_arr[RST_MNU_RESTAURANT]=$rst_mnu_restaurant;			//$unique_arr[RST_MNU_ADD_ORDER]=$rst_mnu_add_order;			//$unique_arr[RST_MNU_ADD_PROM]=$rst_mnu_add_prom;			//$unique_arr[RST_MNU_SERV_REQ]=$rst_mnu_serv_req;			//$unique_arr[RST_MNU_ORDERS]=$rst_mnu_orders;			//$unique_arr[RST_MNU_TBL_STATUSES]=$rst_mnu_tbl_statuses;			//$unique_arr[RST_MNU_PROM_CLAIMED]=$rst_mnu_prom_claimed;			//$unique_arr[RST_MNU_COMPLAINTS]=$rst_mnu_complaints;			//$unique_arr[RST_MNU_TRANSFER_TBL]=$rst_mnu_transfer_tbl;			//$unique_arr[RST_MNU_ONLINE_USERS]=$rst_mnu_online_users;			//$unique_arr[RST_MNU_LOYALTY_REWARDS]=$rst_mnu_loyalty_rewards;			//$unique_arr[RST_MNU_CONFIGURATION]=$rst_mnu_configuration;			//$unique_arr[RST_MNU_START_DATE]=$rst_mnu_start_date;			//$unique_arr[RST_MNU_END_DATE]=$rst_mnu_end_date;		if(is_not_empty($unique_arr)){			return $this->readObject($unique_arr);		}		return false;	}//..isAlreadyThere	public function create($rst_mnu_restaurant ,$rst_mnu_add_order ,$rst_mnu_add_prom ,$rst_mnu_serv_req ,$rst_mnu_orders ,$rst_mnu_tbl_statuses ,$rst_mnu_prom_claimed ,$rst_mnu_complaints ,$rst_mnu_transfer_tbl ,$rst_mnu_online_users ,$rst_mnu_loyalty_rewards ,$rst_mnu_configuration ,$rst_mnu_reward_conf,$rst_mnu_start_date ,$rst_mnu_end_date,$rst_mnu_allergy=1) {		if(is_not_empty($rst_mnu_restaurant)){			if($this->isAlreadyThere($rst_mnu_restaurant ,$rst_mnu_add_order ,$rst_mnu_add_prom ,$rst_mnu_serv_req ,$rst_mnu_orders ,$rst_mnu_tbl_statuses ,$rst_mnu_prom_claimed ,$rst_mnu_complaints ,$rst_mnu_transfer_tbl ,$rst_mnu_online_users ,$rst_mnu_loyalty_rewards ,$rst_mnu_configuration ,$rst_mnu_start_date ,$rst_mnu_end_date)){				return OPERATION_DUPLICATE;			}else{				$this->setrst_mnu_id("");				$this->setrst_mnu_restaurant($rst_mnu_restaurant);				$this->setrst_mnu_add_order($rst_mnu_add_order);				$this->setrst_mnu_add_prom($rst_mnu_add_prom);				$this->setrst_mnu_serv_req($rst_mnu_serv_req);				$this->setrst_mnu_orders($rst_mnu_orders);				$this->setrst_mnu_tbl_statuses($rst_mnu_tbl_statuses);				$this->setrst_mnu_prom_claimed($rst_mnu_prom_claimed);				$this->setrst_mnu_complaints($rst_mnu_complaints);				$this->setrst_mnu_transfer_tbl($rst_mnu_transfer_tbl);				$this->setrst_mnu_online_users($rst_mnu_online_users);				$this->setrst_mnu_loyalty_rewards($rst_mnu_loyalty_rewards);				$this->setrst_mnu_configuration($rst_mnu_configuration);				$this->setrst_mnu_reward_conf($rst_mnu_reward_conf);								$this->setrst_mnu_allergy($rst_mnu_allergy);								$this->setrst_mnu_start_date(date(DATE_FORMAT));				$this->insert();				return $this->getrst_mnu_id();			}		}		return OPERATION_FAIL;	}//..create	public function update($rst_mnu_id, $rst_mnu_restaurant, $rst_mnu_add_order, $rst_mnu_add_prom, $rst_mnu_serv_req, $rst_mnu_orders, $rst_mnu_tbl_statuses, $rst_mnu_prom_claimed, $rst_mnu_complaints, $rst_mnu_transfer_tbl, $rst_mnu_online_users, $rst_mnu_loyalty_rewards, $rst_mnu_configuration,$rst_mnu_reward_conf, $rst_mnu_start_date, $rst_mnu_end_date,$rst_mnu_allergy=1) {		if(is_gt_zero_num($rst_mnu_id)){			if ($this->readObject(array(RST_MNU_ID=>$rst_mnu_id))){				$this->setrst_mnu_restaurant($rst_mnu_restaurant);				$this->setrst_mnu_add_order($rst_mnu_add_order);				$this->setrst_mnu_add_prom($rst_mnu_add_prom);				$this->setrst_mnu_serv_req($rst_mnu_serv_req);				$this->setrst_mnu_orders($rst_mnu_orders);				$this->setrst_mnu_tbl_statuses($rst_mnu_tbl_statuses);				$this->setrst_mnu_prom_claimed($rst_mnu_prom_claimed);				$this->setrst_mnu_complaints($rst_mnu_complaints);				$this->setrst_mnu_transfer_tbl($rst_mnu_transfer_tbl);				$this->setrst_mnu_online_users($rst_mnu_online_users);				$this->setrst_mnu_loyalty_rewards($rst_mnu_loyalty_rewards);				$this->setrst_mnu_configuration($rst_mnu_configuration);								$this->setrst_mnu_allergy($rst_mnu_allergy);								$this->setrst_mnu_reward_conf($rst_mnu_reward_conf);				$this->insert();				return OPERATION_SUCCESS;			}		}		return OPERATION_FAIL;	}//..update	public function activate($rst_mnu_id){		if(is_gt_zero_num($rst_mnu_id)){			if ($this->readObject(array(RST_MNU_ID=>$rst_mnu_id))){				$qry  = "UPDATE ".TBL_REST_MENU_OPT.RET."SET".RET."			".TBL_REST_MENU_OPT_DEACTIVE_DATE." = '".date(EMPTY_DATE_FORMAT)."' WHERE ".RST_MNU_ID."={$rst_mnu_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end activate	public function deactivate($rst_mnu_id){		if(is_gt_zero_num($rst_mnu_id)){			if ($this->readObject(array(RST_MNU_ID=>$rst_mnu_id))){				$qry  = "UPDATE ".TBL_REST_MENU_OPT.RET."SET".RET."			".TBL_REST_MENU_OPT_DEACTIVE_DATE." = '".date(DATE_FORMAT)."' WHERE ".RST_MNU_ID."={$rst_mnu_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end deactivate		public static function dev_all_mnu_GetInfo() {			$info = array();			$info["rst_mnu_add_order"]=1;			$info["rst_mnu_add_prom"]=1;			$info["rst_mnu_serv_req"]=1;			$info["rst_mnu_orders"]=1;			$info["rst_mnu_tbl_statuses"]=1;			$info["rst_mnu_prom_claimed"]=1;			$info["rst_mnu_complaints"]=1;			$info["rst_mnu_transfer_tbl"]=1;			$info["rst_mnu_online_users"]=1;			$info["rst_mnu_loyalty_rewards"]=1;			$info["rst_mnu_configuration"]=1;			$info["rst_mnu_allergy"]=1;			$info["rst_mnu_reward_conf"]="CUSTOMER";			$info["isActive"] = 1;			return $info;	}	public static function GetInfo($rst_mnu_id=0,$rst_mnu_restaurant=0) {		$info = array();		//..fectch based on the '$rl_fn_id' or role id '$rl_fn_id'		if(is_gt_zero_num($rst_mnu_id)){			 $arr[RST_MNU_ID] = $rst_mnu_id;				}		if(is_gt_zero_num($rst_mnu_restaurant)){			 $arr[RST_MNU_RESTAURANT] = $rst_mnu_restaurant;				}				if(is_not_empty($arr)){			$obj_tbl_rest_menu_opt = new tbl_rest_menu_opt();			if($obj_tbl_rest_menu_opt->readObject($arr)){				$info["rst_mnu_id"]=$obj_tbl_rest_menu_opt->getrst_mnu_id();				$info["rst_mnu_restaurant"]=$obj_tbl_rest_menu_opt->getrst_mnu_restaurant();				$info["rst_mnu_add_order"]=$obj_tbl_rest_menu_opt->getrst_mnu_add_order();				$info["rst_mnu_add_prom"]=$obj_tbl_rest_menu_opt->getrst_mnu_add_prom();				$info["rst_mnu_serv_req"]=$obj_tbl_rest_menu_opt->getrst_mnu_serv_req();				$info["rst_mnu_orders"]=$obj_tbl_rest_menu_opt->getrst_mnu_orders();				$info["rst_mnu_tbl_statuses"]=$obj_tbl_rest_menu_opt->getrst_mnu_tbl_statuses();				$info["rst_mnu_prom_claimed"]=$obj_tbl_rest_menu_opt->getrst_mnu_prom_claimed();				$info["rst_mnu_complaints"]=$obj_tbl_rest_menu_opt->getrst_mnu_complaints();				$info["rst_mnu_transfer_tbl"]=$obj_tbl_rest_menu_opt->getrst_mnu_transfer_tbl();				$info["rst_mnu_online_users"]=$obj_tbl_rest_menu_opt->getrst_mnu_online_users();				$info["rst_mnu_loyalty_rewards"]=$obj_tbl_rest_menu_opt->getrst_mnu_loyalty_rewards();				$info["rst_mnu_configuration"]=$obj_tbl_rest_menu_opt->getrst_mnu_configuration();				$info["rst_mnu_reward_conf"]=$obj_tbl_rest_menu_opt->getrst_mnu_reward_conf();				$info["rst_mnu_allergy"]=$obj_tbl_rest_menu_opt->getrst_mnu_allergy();								$info["rst_mnu_start_date"]=$obj_tbl_rest_menu_opt->getrst_mnu_start_date();				$info["rst_mnu_end_date"]=$obj_tbl_rest_menu_opt->getrst_mnu_end_date();								$info["rst_mnu_restaurant_nm"]=$obj_tbl_rest_menu_opt->getrst_mnu_restaurant_nm();				$info["isActive"] = 0;				//..check deactive date is not set or 0				if((is_not_empty($obj_tbl_rest_menu_opt->gettbl_rest_menu_opt_deactive_date())==false)  || (is_gt_zero_num(strtotime($obj_tbl_rest_menu_opt->gettbl_rest_menu_opt_deactive_date()))== false)){					$info["isActive"] = 1;				}else{					//..check the deactive date is greater than todays date					if(strtotime($obj_tbl_rest_menu_opt->gettbl_rest_menu_opt_deactive_date()) > strtotime(date(DATE_FORMAT))){						$info["isActive"] = 1;					}				}			}		unset($obj_tbl_rest_menu_opt);		return $info;		}	}//..End GetInfo	public static function GetFields($data){		global $tbl_rest_menu_opt_active_condition;		$arr = array();		if(is_not_empty($data)){			$qry ="SELECT ".$data['key_field'].",".$data['value_field']." FROM ".TBL_REST_MENU_OPT."";			if(is_gt_zero_num($data['isActive'])){				$qry .= " WHERE ".$tbl_rest_menu_opt_active_condition;			}			$res = mysql_query($qry); 			if($res){				while($row=mysql_fetch_assoc($res)){					$arr[$row[$data['key_field']]] = $row[$data['value_field']];				}			}		}		return $arr;	}//.. End of GetFields		public static function getRewardTypes(){		return array('CUSTOMER'=>'CUSTOMER','RESTAURANT'=>'RESTAURANT');	}	}//..End tbl_rest_menu_opt?>