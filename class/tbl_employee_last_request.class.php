<?php/**********************************************************************tbl_employee_last_request.class.phpGenerated by STRUCTY 2013.03.09 06:46:23.Copyright 2011 Structy, Frdric Aebi. All rights reserved.**********************************************************************/define("TBL_EMPLOYEE_LAST_REQUEST", "tbl_employee_last_request"); class tbl_employee_last_request {		private $emp_request_id;	private $emp_id;	private $last_request_id;	private $last_order_id;	public function setemp_request_id($pArg="0") {$this->emp_request_id=$pArg;}	public function setemp_id($pArg="0") {$this->emp_id=$pArg;}	public function setlast_request_id($pArg="0") {$this->last_request_id=$pArg;}	public function setlast_order_id($pArg="0") {$this->last_order_id=$pArg;}	public function getemp_request_id() {return $this->emp_request_id;}	public function getemp_id() {return $this->emp_id;}	public function getlast_request_id() {return $this->last_request_id;}	public function getlast_order_id() {return $this->last_order_id;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_EMPLOYEE_LAST_REQUEST.RET;		$and = "WHERE".RET;		if($array['emp_request_id'] != "") {			$qry .= $and."emp_request_id = '".$array['emp_request_id']."'".RET;			$and = "AND".RET;		}		if($array['emp_id'] != "") {			$qry .= $and."emp_id = '".$array['emp_id']."'".RET;			$and = "AND".RET;		}		if($array['last_request_id'] != "") {			$qry .= $and."last_request_id = '".$array['last_request_id']."'".RET;			$and = "AND".RET;		}				if($array['last_order_id'] != "") {			$qry .= $and."last_order_id = '".$array['last_order_id']."'".RET;			$and = "AND".RET;		}	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setemp_request_id($record['emp_request_id']);				$this->setemp_id($record['emp_id']);				$this->setlast_request_id($record['last_request_id']);				$this->setlast_order_id($record['last_order_id']);				return true;			}		}	}	public static function readArray($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_EMPLOYEE_LAST_REQUEST.RET;		$and = "WHERE".RET;		if($array['emp_request_id'] != "") {			$qry .= $and."emp_request_id = '".$array['emp_request_id']."'".RET;			$and = "AND".RET;		} 		if($array['emp_id'] != "") {			$qry .= $and."emp_id = '".$array['emp_id']."'".RET;			$and = "AND".RET;		}		if($array['last_request_id'] != "") {			$qry .= $and."last_request_id = '".$array['last_request_id']."'".RET;			$and = "AND".RET;		}				if($array['last_order_id'] != "") {			$qry .= $and."last_order_id = '".$array['last_order_id']."'".RET;			$and = "AND".RET;		}		$result = mysql_query($qry);		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$class_object = new tbl_employee_last_request();				$class_object->setemp_request_id($record['emp_request_id']);				$class_object->setemp_id($record['emp_id']);				$class_object->setlast_request_id($record['last_request_id']);				$class_object->setlast_order_id($record['last_order_id']);				$class_objects[$class_object->getemp_id()] = $class_object;			}		}		return $class_objects;	}	public function insert($update = FALSE) {		if($this->getemp_request_id() != '') {			$qry  = "UPDATE ".TBL_EMPLOYEE_LAST_REQUEST.RET."SET".RET.			 			"emp_id = '".$this->getemp_id()."',".RET.			"last_request_id = '".$this->getlast_request_id()."',".RET.			"last_order_id = '".$this->getlast_order_id()."'".RET." WHERE emp_request_id ='".$this->getemp_request_id()."'"; 		 			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".TBL_EMPLOYEE_LAST_REQUEST." (".RET.			"emp_request_id, emp_id, last_request_id, last_order_id".RET.			") VALUES (".RET.			"'".$this->getemp_request_id()."',".RET.			"'".$this->getemp_id()."',".RET.			"'".$this->getlast_request_id()."',".RET.			"'".$this->getlast_order_id()."'".RET.			")".RET;			mysql_query($qry);		}	}	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".TBL_EMPLOYEE_LAST_REQUEST.RET;		$and = "WHERE".RET;				if($array['emp_request_id'] != "") {			$qry .= $and."emp_request_id = '".$array['emp_request_id']."'".RET;			$and = "AND".RET;		} 		if($array['emp_id'] != "") {			$qry .= $and."emp_id = '".$array['emp_id']."'".RET;			$and = "AND".RET;		}		if($array['last_request_id'] != "") {			$qry .= $and."last_request_id = '".$array['last_request_id']."'".RET;			$and = "AND".RET;		}				if($array['last_order_id'] != "") {			$qry .= $and."last_order_id = '".$array['last_order_id']."'".RET;			$and = "AND".RET;		}		mysql_query($qry);	}		public function chkEmplyoeeRequest($employee_id,$request_id){	  if(is_gt_zero_num($employee_id)){		if($this->readObject(array("emp_id"=>$employee_id))){ 			if (is_gt_zero_num($this->getlast_request_id()) && ($this->getlast_request_id() >= $request_id)){				return 0;			}else{  				$this->setlast_request_id($request_id);				$this->insert();				return 1;			}		}else{		 	$this->create($employee_id,$request_id);			return 1;		 }	 }			return 0;	}		public function chkEmplyoeeOrder($employee_id,$order_id){		  if(is_gt_zero_num($employee_id)){		if($this->readObject(array("emp_id"=>$employee_id))){					if (is_gt_zero_num($this->getlast_order_id()) && ($this->getlast_order_id() >= $order_id)){					return 0;			}else{  			 	 				$this->setlast_order_id($order_id);				$this->insert();				return 1;			}		}else{		 	$this->create($employee_id,0,$order_id);			return 1;		 }	 }			return 0;	}	 	public function create($employee_id,$request_id=0,$order_id=0){	  if(is_gt_zero_num($employee_id)){	  	 if($this->readObject(array("emp_id"=>$employee_id))){		 	return -1;			 }else{		 	$this->setemp_request_id("");		 	$this->setemp_id($employee_id); 			if(is_gt_zero_num($request_id)) $this->setlast_request_id($request_id);  			if(is_gt_zero_num($order_id)) $this->setlast_order_id($order_id); 						$this->insert();			return 1;		 }	  }	  return 0; 	} }?>