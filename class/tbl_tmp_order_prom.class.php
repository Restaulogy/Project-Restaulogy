<?php/**********************************************************************tbl_tmp_order_prom.class.phpGenerated by STRUCTY 2013.08.16 12:27:46.Copyright 2011 Structy, Frédéric Aebi. All rights reserved.**********************************************************************/define("TBL_TMP_ORDER_PROM", "tbl_tmp_order_prom"); define('ORD_DTL_ID', 'ord_dtl_id'); define('ORD_DTL_ORDER_ID', 'ord_dtl_order_id'); define('ORD_DTL_SBMENU_DISH_ID', 'ord_dtl_sbmenu_dish_id'); define('ORD_DTL_QUANTITY', 'ord_dtl_quantity'); define('ORD_DTL_PRICE', 'ord_dtl_price'); define('ORD_DTL_DISCOUNT', 'ord_dtl_discount'); define('ORDPROM_PROMOTION', 'ordprom_promotion'); define('ORDPROM_DISCOUNT_ID', 'ordprom_discount_id'); define('ORDPROM_DISCOUNT_AMT', 'ordprom_discount_amt'); define('ORD_OWNER_ID', 'ord_owner_id'); define("TBL_TMP_ORDER_PROM_ACTIVE_DATE",  "");define("TBL_TMP_ORDER_PROM_DEACTIVE_DATE",  "");$tbl_tmp_order_prom_active_condition= " (".TBL_TMP_ORDER_PROM_DEACTIVE_DATE." is NULL OR ".TBL_TMP_ORDER_PROM_DEACTIVE_DATE." = 0 OR ".TBL_TMP_ORDER_PROM_DEACTIVE_DATE." > CURDATE( )) ";class tbl_tmp_order_prom {	private $ord_dtl_id;	private $ord_dtl_order_id;	private $ord_dtl_sbmenu_dish_id;	private $ord_dtl_quantity;	private $ord_dtl_price;	private $ord_dtl_discount;	private $ordprom_promotion;	private $ordprom_discount_id;	private $ordprom_discount_amt;	private $ord_owner_id;	private $tbl_tmp_order_prom_active_date;	private $tbl_tmp_order_prom_deactive_date;	public function setord_dtl_id($pArg="0") {$this->ord_dtl_id=$pArg;}	public function setord_dtl_order_id($pArg="0") {$this->ord_dtl_order_id=$pArg;}	public function setord_dtl_sbmenu_dish_id($pArg="0") {$this->ord_dtl_sbmenu_dish_id=$pArg;}	public function setord_dtl_quantity($pArg="0") {$this->ord_dtl_quantity=$pArg;}	public function setord_dtl_price($pArg="0") {$this->ord_dtl_price=$pArg;}	public function setord_dtl_discount($pArg="0") {$this->ord_dtl_discount=$pArg;}	public function setordprom_promotion($pArg="0") {$this->ordprom_promotion=$pArg;}	public function setordprom_discount_id($pArg="0") {$this->ordprom_discount_id=$pArg;}	public function setordprom_discount_amt($pArg="0") {$this->ordprom_discount_amt=$pArg;}	public function setord_owner_id($pArg="0") {$this->ord_owner_id=$pArg;}	public function settbl_tmp_order_prom_active_date($pArg="0") {$this->tbl_tmp_order_prom_active_date=$pArg;}	public function settbl_tmp_order_prom_deactive_date($pArg="0") {$this->tbl_tmp_order_prom_deactive_date=$pArg;}	public function getord_dtl_id() {return $this->ord_dtl_id;}	public function getord_dtl_order_id() {return $this->ord_dtl_order_id;}	public function getord_dtl_sbmenu_dish_id() {return $this->ord_dtl_sbmenu_dish_id;}	public function getord_dtl_quantity() {return $this->ord_dtl_quantity;}	public function getord_dtl_price() {return $this->ord_dtl_price;}	public function getord_dtl_discount() {return $this->ord_dtl_discount;}	public function getordprom_promotion() {return $this->ordprom_promotion;}	public function getordprom_discount_id() {return $this->ordprom_discount_id;}	public function getordprom_discount_amt() {return $this->ordprom_discount_amt;}	public function getord_owner_id() {return $this->ord_owner_id;}	public function gettbl_tmp_order_prom_active_date($pArg="0") {return $this->tbl_tmp_order_prom_active_date;}	public function gettbl_tmp_order_prom_deactive_date($pArg="0") {return $this->tbl_tmp_order_prom_deactive_date;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_TMP_ORDER_PROM.RET;		$and = "WHERE".RET;		if($array[ORD_DTL_ID] != "") {			$qry .= $and.ORD_DTL_ID." = '".$array[ORD_DTL_ID]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_ORDER_ID] != "") {			$qry .= $and.ORD_DTL_ORDER_ID." = '".$array[ORD_DTL_ORDER_ID]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_SBMENU_DISH_ID] != "") {			$qry .= $and.ORD_DTL_SBMENU_DISH_ID." = '".$array[ORD_DTL_SBMENU_DISH_ID]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_QUANTITY] != "") {			$qry .= $and.ORD_DTL_QUANTITY." = '".$array[ORD_DTL_QUANTITY]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_PRICE] != "") {			$qry .= $and.ORD_DTL_PRICE." = '".$array[ORD_DTL_PRICE]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_DISCOUNT] != "") {			$qry .= $and.ORD_DTL_DISCOUNT." = '".$array[ORD_DTL_DISCOUNT]."'".RET;			$and = "AND".RET;		}		if($array[ORDPROM_PROMOTION] != "") {			$qry .= $and.ORDPROM_PROMOTION." = '".$array[ORDPROM_PROMOTION]."'".RET;			$and = "AND".RET;		}		if($array[ORDPROM_DISCOUNT_ID] != "") {			$qry .= $and.ORDPROM_DISCOUNT_ID." = '".$array[ORDPROM_DISCOUNT_ID]."'".RET;			$and = "AND".RET;		}		if($array[ORDPROM_DISCOUNT_AMT] != "") {			$qry .= $and.ORDPROM_DISCOUNT_AMT." = '".$array[ORDPROM_DISCOUNT_AMT]."'".RET;			$and = "AND".RET;		}		if($array[ORD_OWNER_ID] != "") {			$qry .= $and.ORD_OWNER_ID." = '".$array[ORD_OWNER_ID]."'".RET;			$and = "AND".RET;		}	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setord_dtl_id($record[ORD_DTL_ID]);				$this->setord_dtl_order_id($record[ORD_DTL_ORDER_ID]);				$this->setord_dtl_sbmenu_dish_id($record[ORD_DTL_SBMENU_DISH_ID]);				$this->setord_dtl_quantity($record[ORD_DTL_QUANTITY]);				$this->setord_dtl_price($record[ORD_DTL_PRICE]);				$this->setord_dtl_discount($record[ORD_DTL_DISCOUNT]);				$this->setordprom_promotion($record[ORDPROM_PROMOTION]);				$this->setordprom_discount_id($record[ORDPROM_DISCOUNT_ID]);				$this->setordprom_discount_amt($record[ORDPROM_DISCOUNT_AMT]);				$this->setord_owner_id($record[ORD_OWNER_ID]);				$this->settbl_tmp_order_prom_active_date($record[TBL_TMP_ORDER_PROM_ACTIVE_DATE]);				$this->settbl_tmp_order_prom_deactive_date($record[TBL_TMP_ORDER_PROM_DEACTIVE_DATE]);				return true;			}		}	}	public static function readArray($array = array(),&$result_found=0,$isArray=1) {		global $tbl_tmp_order_prom_active_condition;		$qry = "SELECT *".RET."FROM ".TBL_TMP_ORDER_PROM.RET;		$and = "WHERE".RET;		if($array[ORD_DTL_ID] != "") {			$qry .= $and.ORD_DTL_ID." = '".$array[ORD_DTL_ID]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_ORDER_ID] != "") {			$qry .= $and.ORD_DTL_ORDER_ID." = '".$array[ORD_DTL_ORDER_ID]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_SBMENU_DISH_ID] != "") {			$qry .= $and.ORD_DTL_SBMENU_DISH_ID." = '".$array[ORD_DTL_SBMENU_DISH_ID]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_QUANTITY] != "") {			$qry .= $and.ORD_DTL_QUANTITY." = '".$array[ORD_DTL_QUANTITY]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_PRICE] != "") {			$qry .= $and.ORD_DTL_PRICE." = '".$array[ORD_DTL_PRICE]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_DISCOUNT] != "") {			$qry .= $and.ORD_DTL_DISCOUNT." = '".$array[ORD_DTL_DISCOUNT]."'".RET;			$and = "AND".RET;		}		if($array[ORDPROM_PROMOTION] != "") {			$qry .= $and.ORDPROM_PROMOTION." = '".$array[ORDPROM_PROMOTION]."'".RET;			$and = "AND".RET;		}		if($array[ORDPROM_DISCOUNT_ID] != "") {			$qry .= $and.ORDPROM_DISCOUNT_ID." = '".$array[ORDPROM_DISCOUNT_ID]."'".RET;			$and = "AND".RET;		}		if($array[ORDPROM_DISCOUNT_AMT] != "") {			$qry .= $and.ORDPROM_DISCOUNT_AMT." = '".$array[ORDPROM_DISCOUNT_AMT]."'".RET;			$and = "AND".RET;		}		if($array[ORD_OWNER_ID] != "") {			$qry .= $and.ORD_OWNER_ID." = '".$array[ORD_OWNER_ID]."'".RET;			$and = "AND".RET;		}		if(is_gt_zero_num($array["isActive"])) {			$qry .= $and.$tbl_tmp_order_prom_active_condition;;			$and = "AND".RET;		}		if(is_not_empty($array[SORT_ON]) && is_not_empty($array[SORT_BY])) {		$qry .=" ORDER BY ".$array[SORT_ON]." ".$array[SORT_BY];		}		if(is_not_empty($array[OFFSET_TITLE]) && is_not_empty($array[LIMIT_TITLE])) {			$qry_with_limit  = $qry." LIMIT ".$array[OFFSET_TITLE].",".$array[LIMIT_TITLE];		}else{			$qry_with_limit  = $qry;		}		$result = mysql_query ($qry_with_limit);		$r1 = mysql_query($qry);		if($r1){			$result_found = mysql_num_rows($r1);		}		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$isActive= 0;				//..check deactive date is not set or 0				if((is_not_empty($record[TBL_TMP_ORDER_PROM_DEACTIVE_DATE])==false) || (is_gt_zero_num(strtotime($record[TBL_TMP_ORDER_PROM_DEACTIVE_DATE]))== false)){					$isActive = 1; 				}else{					//..check the deactive date is greater than todays date					if(strtotime($record[TBL_TMP_ORDER_PROM_DEACTIVE_DATE]) > strtotime(date(DATE_FORMAT))){						$isActive = 1;					}				}				if($isArray){					$class_object = array();					$class_object["ord_dtl_id"]=$record[ORD_DTL_ID];					$class_object["ord_dtl_order_id"]=$record[ORD_DTL_ORDER_ID];					$class_object["ord_dtl_sbmenu_dish_id"]=$record[ORD_DTL_SBMENU_DISH_ID];					$class_object["ord_dtl_quantity"]=$record[ORD_DTL_QUANTITY];					$class_object["ord_dtl_price"]=$record[ORD_DTL_PRICE];					$class_object["ord_dtl_discount"]=$record[ORD_DTL_DISCOUNT];					$class_object["ordprom_promotion"]=$record[ORDPROM_PROMOTION];					$class_object["ordprom_discount_id"]=$record[ORDPROM_DISCOUNT_ID];					$class_object["ordprom_discount_amt"]=$record[ORDPROM_DISCOUNT_AMT];					$class_object["ord_owner_id"]=$record[ORD_OWNER_ID];					$class_object["isActive"]=$isActive;				}else{					$class_object = new tbl_tmp_order_prom();					$class_object->setord_dtl_id($record[ORD_DTL_ID]);					$class_object->setord_dtl_order_id($record[ORD_DTL_ORDER_ID]);					$class_object->setord_dtl_sbmenu_dish_id($record[ORD_DTL_SBMENU_DISH_ID]);					$class_object->setord_dtl_quantity($record[ORD_DTL_QUANTITY]);					$class_object->setord_dtl_price($record[ORD_DTL_PRICE]);					$class_object->setord_dtl_discount($record[ORD_DTL_DISCOUNT]);					$class_object->setordprom_promotion($record[ORDPROM_PROMOTION]);					$class_object->setordprom_discount_id($record[ORDPROM_DISCOUNT_ID]);					$class_object->setordprom_discount_amt($record[ORDPROM_DISCOUNT_AMT]);					$class_object->setord_owner_id($record[ORD_OWNER_ID]);				}				$class_objects[$record[ORD_DTL_ID]] = $class_object;			}		}		return $class_objects;	}//..End readArray	public function insert() {		if($this->getord_dtl_id() != '') {			$qry  = "UPDATE ".TBL_TMP_ORDER_PROM.RET."SET".RET."			".ORD_DTL_ID." = '".$this->getord_dtl_id()."',".RET."			".ORD_DTL_ORDER_ID." = '".$this->getord_dtl_order_id()."',".RET."			".ORD_DTL_SBMENU_DISH_ID." = '".$this->getord_dtl_sbmenu_dish_id()."',".RET."			".ORD_DTL_QUANTITY." = '".$this->getord_dtl_quantity()."',".RET."			".ORD_DTL_PRICE." = '".$this->getord_dtl_price()."',".RET."			".ORD_DTL_DISCOUNT." = '".$this->getord_dtl_discount()."',".RET."			".ORDPROM_PROMOTION." = '".$this->getordprom_promotion()."',".RET."			".ORDPROM_DISCOUNT_ID." = '".$this->getordprom_discount_id()."',".RET."			".ORDPROM_DISCOUNT_AMT." = '".$this->getordprom_discount_amt()."',".RET."			".ORD_OWNER_ID." = '".$this->getord_owner_id()."'".RET.			"WHERE ".ORD_DTL_ID." = ".$this->getord_dtl_id().RET;			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".TBL_TMP_ORDER_PROM." (".RET.			"".ORD_DTL_ORDER_ID.", ".ORD_DTL_SBMENU_DISH_ID.", ".ORD_DTL_QUANTITY.", ".ORD_DTL_PRICE.", ".ORD_DTL_DISCOUNT.", ".ORDPROM_PROMOTION.", ".ORDPROM_DISCOUNT_ID.", ".ORDPROM_DISCOUNT_AMT.", ".ORD_OWNER_ID.RET.				") VALUES (".RET.			"'".$this->getord_dtl_order_id()."',".RET.			"'".$this->getord_dtl_sbmenu_dish_id()."',".RET.			"'".$this->getord_dtl_quantity()."',".RET.			"'".$this->getord_dtl_price()."',".RET.			"'".$this->getord_dtl_discount()."',".RET.			"'".$this->getordprom_promotion()."',".RET.			"'".$this->getordprom_discount_id()."',".RET.			"'".$this->getordprom_discount_amt()."',".RET.			"'".$this->getord_owner_id()."'".RET.			")".RET;			$res = mysql_query($qry);			$this->setord_dtl_id(mysql_insert_id());		}	}//..End Insert	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".TBL_TMP_ORDER_PROM.RET;		$and = "WHERE".RET;		if($array[ORD_DTL_ID] != "") {			$qry .= $and.ORD_DTL_ID." = '".$array[ORD_DTL_ID]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_ORDER_ID] != "") {			$qry .= $and.ORD_DTL_ORDER_ID." = '".$array[ORD_DTL_ORDER_ID]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_SBMENU_DISH_ID] != "") {			$qry .= $and.ORD_DTL_SBMENU_DISH_ID." = '".$array[ORD_DTL_SBMENU_DISH_ID]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_QUANTITY] != "") {			$qry .= $and.ORD_DTL_QUANTITY." = '".$array[ORD_DTL_QUANTITY]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_PRICE] != "") {			$qry .= $and.ORD_DTL_PRICE." = '".$array[ORD_DTL_PRICE]."'".RET;			$and = "AND".RET;		}		if($array[ORD_DTL_DISCOUNT] != "") {			$qry .= $and.ORD_DTL_DISCOUNT." = '".$array[ORD_DTL_DISCOUNT]."'".RET;			$and = "AND".RET;		}		if($array[ORDPROM_PROMOTION] != "") {			$qry .= $and.ORDPROM_PROMOTION." = '".$array[ORDPROM_PROMOTION]."'".RET;			$and = "AND".RET;		}		if($array[ORDPROM_DISCOUNT_ID] != "") {			$qry .= $and.ORDPROM_DISCOUNT_ID." = '".$array[ORDPROM_DISCOUNT_ID]."'".RET;			$and = "AND".RET;		}		if($array[ORDPROM_DISCOUNT_AMT] != "") {			$qry .= $and.ORDPROM_DISCOUNT_AMT." = '".$array[ORDPROM_DISCOUNT_AMT]."'".RET;			$and = "AND".RET;		}		if($array[ORD_OWNER_ID] != "") {			$qry .= $and.ORD_OWNER_ID." = '".$array[ORD_OWNER_ID]."'".RET;			$and = "AND".RET;		}		$res = mysql_query($qry);		if($res){			return OPERATION_SUCCESS;		};		return OPERATION_FAIL;	}//..End Delete	public function isAlreadyThere($ord_dtl_order_id ,$ord_dtl_sbmenu_dish_id ,$ord_dtl_quantity ,$ord_dtl_price ,$ord_dtl_discount ,$ordprom_promotion ,$ordprom_discount_id ,$ordprom_discount_amt ,$ord_owner_id) {		$unique_arr = array();			//$unique_arr[ORD_DTL_ID]=$ord_dtl_id;			//$unique_arr[ORD_DTL_ORDER_ID]=$ord_dtl_order_id;			//$unique_arr[ORD_DTL_SBMENU_DISH_ID]=$ord_dtl_sbmenu_dish_id;			//$unique_arr[ORD_DTL_QUANTITY]=$ord_dtl_quantity;			//$unique_arr[ORD_DTL_PRICE]=$ord_dtl_price;			//$unique_arr[ORD_DTL_DISCOUNT]=$ord_dtl_discount;			//$unique_arr[ORDPROM_PROMOTION]=$ordprom_promotion;			//$unique_arr[ORDPROM_DISCOUNT_ID]=$ordprom_discount_id;			//$unique_arr[ORDPROM_DISCOUNT_AMT]=$ordprom_discount_amt;			//$unique_arr[ORD_OWNER_ID]=$ord_owner_id;		if(is_not_empty($unique_arr)){			return $this->readObject($unique_arr);		}		return false;	}//..isAlreadyThere	public function create($ord_dtl_order_id ,$ord_dtl_sbmenu_dish_id ,$ord_dtl_quantity ,$ord_dtl_price ,$ord_dtl_discount ,$ordprom_promotion ,$ordprom_discount_id ,$ordprom_discount_amt ,$ord_owner_id) {		if(is_not_empty($ord_dtl_order_id)){			if($this->isAlreadyThere($ord_dtl_order_id ,$ord_dtl_sbmenu_dish_id ,$ord_dtl_quantity ,$ord_dtl_price ,$ord_dtl_discount ,$ordprom_promotion ,$ordprom_discount_id ,$ordprom_discount_amt ,$ord_owner_id)){				return OPERATION_DUPLICATE;			}else{				$this->setord_dtl_id("");				$this->setord_dtl_order_id($ord_dtl_order_id);				$this->setord_dtl_sbmenu_dish_id($ord_dtl_sbmenu_dish_id);				$this->setord_dtl_quantity($ord_dtl_quantity);				$this->setord_dtl_price($ord_dtl_price);				$this->setord_dtl_discount($ord_dtl_discount);				$this->setordprom_promotion($ordprom_promotion);				$this->setordprom_discount_id($ordprom_discount_id);				$this->setordprom_discount_amt($ordprom_discount_amt);				$this->setord_owner_id($ord_owner_id);				$this->insert();				return $this->getord_dtl_id();			}		}		return OPERATION_FAIL;	}//..create	public function update($ord_dtl_id, $ord_dtl_order_id, $ord_dtl_sbmenu_dish_id, $ord_dtl_quantity, $ord_dtl_price, $ord_dtl_discount, $ordprom_promotion, $ordprom_discount_id, $ordprom_discount_amt, $ord_owner_id) {		if(is_gt_zero_num($ord_dtl_id)){			if ($this->readObject(array(ORD_DTL_ID=>$ord_dtl_id))){				$this->setord_dtl_order_id($ord_dtl_order_id);				$this->setord_dtl_sbmenu_dish_id($ord_dtl_sbmenu_dish_id);				$this->setord_dtl_quantity($ord_dtl_quantity);				$this->setord_dtl_price($ord_dtl_price);				$this->setord_dtl_discount($ord_dtl_discount);				$this->setordprom_promotion($ordprom_promotion);				$this->setordprom_discount_id($ordprom_discount_id);				$this->setordprom_discount_amt($ordprom_discount_amt);				$this->setord_owner_id($ord_owner_id);				$this->insert();				return OPERATION_SUCCESS;			}		}		return OPERATION_FAIL;	}//..update	public function activate($ord_dtl_id){		if(is_gt_zero_num($ord_dtl_id)){			if ($this->readObject(array(ORD_DTL_ID=>$ord_dtl_id))){				$qry  = "UPDATE ".TBL_TMP_ORDER_PROM.RET."SET".RET."			".TBL_TMP_ORDER_PROM_DEACTIVE_DATE." = '".date(EMPTY_DATE_FORMAT)."' WHERE ".ORD_DTL_ID."={$ord_dtl_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end activate	public function deactivate($ord_dtl_id){		if(is_gt_zero_num($ord_dtl_id)){			if ($this->readObject(array(ORD_DTL_ID=>$ord_dtl_id))){				$qry  = "UPDATE ".TBL_TMP_ORDER_PROM.RET."SET".RET."			".TBL_TMP_ORDER_PROM_DEACTIVE_DATE." = '".date(DATE_FORMAT)."' WHERE ".ORD_DTL_ID."={$ord_dtl_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end deactivate	public static function GetInfo($ord_dtl_id) {		$info = array();		if($ord_dtl_id != ""){			$obj_tbl_tmp_order_prom = new tbl_tmp_order_prom();			if($obj_tbl_tmp_order_prom->readObject(array("ord_dtl_id"=>$ord_dtl_id))){				$info["ord_dtl_id"]=$obj_tbl_tmp_order_prom->getord_dtl_id();				$info["ord_dtl_order_id"]=$obj_tbl_tmp_order_prom->getord_dtl_order_id();				$info["ord_dtl_sbmenu_dish_id"]=$obj_tbl_tmp_order_prom->getord_dtl_sbmenu_dish_id();				$info["ord_dtl_quantity"]=$obj_tbl_tmp_order_prom->getord_dtl_quantity();				$info["ord_dtl_price"]=$obj_tbl_tmp_order_prom->getord_dtl_price();				$info["ord_dtl_discount"]=$obj_tbl_tmp_order_prom->getord_dtl_discount();				$info["ordprom_promotion"]=$obj_tbl_tmp_order_prom->getordprom_promotion();				$info["ordprom_discount_id"]=$obj_tbl_tmp_order_prom->getordprom_discount_id();				$info["ordprom_discount_amt"]=$obj_tbl_tmp_order_prom->getordprom_discount_amt();				$info["ord_owner_id"]=$obj_tbl_tmp_order_prom->getord_owner_id();				$info["isActive"] = 0;				//..check deactive date is not set or 0				if((is_not_empty($obj_tbl_tmp_order_prom->gettbl_tmp_order_prom_deactive_date())==false)  || (is_gt_zero_num(strtotime($obj_tbl_tmp_order_prom->gettbl_tmp_order_prom_deactive_date()))== false)){					$info["isActive"] = 1;				}else{					//..check the deactive date is greater than todays date					if(strtotime($obj_tbl_tmp_order_prom->gettbl_tmp_order_prom_deactive_date()) > strtotime(date(DATE_FORMAT))){						$info["isActive"] = 1;					}				}			}		unset($obj_tbl_tmp_order_prom);		return $info;		}	}//..End GetInfo	public static function GetFields($data){		global $tbl_tmp_order_prom_active_condition;		$arr = array();		if(is_not_empty($data)){			$qry ="SELECT ".$data['key_field'].",".$data['value_field']." FROM ".TBL_TMP_ORDER_PROM."";			if(is_gt_zero_num($data['isActive'])){				$qry .= " WHERE ".$tbl_tmp_order_prom_active_condition;			}			$res = mysql_query($qry); 			if($res){				while($row=mysql_fetch_assoc($res)){					$arr[$row[$data['key_field']]] = $row[$data['value_field']];				}			}		}		return $arr;	}//.. End of GetFields}//..End tbl_tmp_order_prom?>