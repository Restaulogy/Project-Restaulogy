<?php/**********************************************************************crm_prom_emails.class.phpGenerated by STRUCTY 2014.02.11 07:06:06.Copyright 2011 Structy, Frédéric Aebi. All rights reserved.**********************************************************************/define("CRM_PROM_EMAILS", "crm_prom_emails"); define('CRM_PR_ML_ID', 'crm_pr_ml_id'); define('CRM_PR_ML_USERID', 'crm_pr_ml_userid'); define('CRM_PR_ML_PROMOTION', 'crm_pr_ml_promotion'); define('CRM_PR_ML_REFERED_BY', 'crm_pr_ml_refered_by'); define('FLG_SEND', 'flg_send'); define('START_DATE', 'start_date'); define('END_DATE', 'end_date'); define("CRM_PROM_EMAILS_ACTIVE_DATE",  "start_date");define("CRM_PROM_EMAILS_DEACTIVE_DATE",  "end_date");$crm_prom_emails_active_condition= " (".CRM_PROM_EMAILS_DEACTIVE_DATE." is NULL OR ".CRM_PROM_EMAILS_DEACTIVE_DATE." = 0 OR ".CRM_PROM_EMAILS_DEACTIVE_DATE." > CURDATE( )) ";class crm_prom_emails {	private $crm_pr_ml_id;	private $crm_pr_ml_userid;	private $crm_pr_ml_promotion;		private $crm_pr_ml_refered_by;		private $flg_send;	private $start_date;	private $end_date;	private $crm_prom_emails_active_date;	private $crm_prom_emails_deactive_date;	public function setcrm_pr_ml_id($pArg="0") {$this->crm_pr_ml_id=$pArg;}	public function setcrm_pr_ml_userid($pArg="0") {$this->crm_pr_ml_userid=$pArg;}	public function setcrm_pr_ml_promotion($pArg="0") {$this->crm_pr_ml_promotion=$pArg;}	public function setcrm_pr_ml_refered_by($pArg="0") {$this->crm_pr_ml_refered_by=$pArg;}		public function setflg_send($pArg="0") {$this->flg_send=$pArg;}	public function setstart_date($pArg="0") {$this->start_date=$pArg;}	public function setend_date($pArg="0") {$this->end_date=$pArg;}	public function setcrm_prom_emails_active_date($pArg="0") {$this->crm_prom_emails_active_date=$pArg;}	public function setcrm_prom_emails_deactive_date($pArg="0") {$this->crm_prom_emails_deactive_date=$pArg;}	public function getcrm_pr_ml_id() {return $this->crm_pr_ml_id;}	public function getcrm_pr_ml_userid() {return $this->crm_pr_ml_userid;}	public function getcrm_pr_ml_promotion() {return $this->crm_pr_ml_promotion;}		public function getcrm_pr_ml_refered_by() {return $this->crm_pr_ml_refered_by;}		public function getflg_send() {return $this->flg_send;}	public function getstart_date() {return $this->start_date;}	public function getend_date() {return $this->end_date;}	public function getcrm_prom_emails_active_date($pArg="0") {return $this->crm_prom_emails_active_date;}	public function getcrm_prom_emails_deactive_date($pArg="0") {return $this->crm_prom_emails_deactive_date;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".CRM_PROM_EMAILS.RET;		$and = "WHERE".RET;		if($array[CRM_PR_ML_ID] != "") {			$qry .= $and.CRM_PR_ML_ID." = '".$array[CRM_PR_ML_ID]."'".RET;			$and = "AND".RET;		}		if($array[CRM_PR_ML_USERID] != "") {			$qry .= $and.CRM_PR_ML_USERID." = '".$array[CRM_PR_ML_USERID]."'".RET;			$and = "AND".RET;		}		if($array[CRM_PR_ML_PROMOTION] != "") {			$qry .= $and.CRM_PR_ML_PROMOTION." = '".$array[CRM_PR_ML_PROMOTION]."'".RET;			$and = "AND".RET;		}				if($array[CRM_PR_ML_REFERED_BY] != "") {			$qry .= $and.CRM_PR_ML_REFERED_BY." = '".$array[CRM_PR_ML_REFERED_BY]."'".RET;			$and = "AND".RET;		}		if($array[FLG_SEND] != "") {			$qry .= $and.FLG_SEND." = '".$array[FLG_SEND]."'".RET;			$and = "AND".RET;		}		if($array[START_DATE] != "") {			$qry .= $and.START_DATE." = '".$array[START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[END_DATE] != "") {			$qry .= $and.END_DATE." = '".$array[END_DATE]."'".RET;			$and = "AND".RET;		}	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setcrm_pr_ml_id($record[CRM_PR_ML_ID]);				$this->setcrm_pr_ml_userid($record[CRM_PR_ML_USERID]);				$this->setcrm_pr_ml_promotion($record[CRM_PR_ML_PROMOTION]);								$this->setcrm_pr_ml_refered_by($record[CRM_PR_ML_REFERED_BY]);								$this->setflg_send($record[FLG_SEND]);				$this->setstart_date($record[START_DATE]);				$this->setend_date($record[END_DATE]);				$this->setcrm_prom_emails_active_date($record[CRM_PROM_EMAILS_ACTIVE_DATE]);				$this->setcrm_prom_emails_deactive_date($record[CRM_PROM_EMAILS_DEACTIVE_DATE]);				return true;			}		}	}	public static function readArray($array = array(),&$result_found=0,$isArray=1) {		global $crm_prom_emails_active_condition;		//$qry = "SELECT *".RET."FROM ".CRM_PROM_EMAILS.RET;		$qry = "SELECT `cpe`.*,`c`.`".CRM_CUST_EMAIL."`,`p`.`title`,`p`.`prm_restaurent`,`p`.`list_id` 						FROM `".CRM_PROM_EMAILS."` as `cpe`						INNER JOIN `".TBL_CRM."` as `c`  ON						`c`.`".CRM_ID."`=`cpe`.`".CRM_PR_ML_USERID."`						INNER JOIN `pds_list_promotions` as `p`  ON						`p`.`id`=`cpe`.`".CRM_PR_ML_PROMOTION."`						";		$and = "WHERE".RET;		if($array[CRM_PR_ML_ID] != "") {			$qry .= $and.CRM_PR_ML_ID." = '".$array[CRM_PR_ML_ID]."'".RET;			$and = "AND".RET;		}		if($array[CRM_PR_ML_USERID] != "") {			$qry .= $and.CRM_PR_ML_USERID." = '".$array[CRM_PR_ML_USERID]."'".RET;			$and = "AND".RET;		}		if($array[CRM_PR_ML_PROMOTION] != "") {			$qry .= $and.CRM_PR_ML_PROMOTION." = '".$array[CRM_PR_ML_PROMOTION]."'".RET;			$and = "AND".RET;		}				if($array[CRM_PR_ML_REFERED_BY] != "") {			$qry .= $and.CRM_PR_ML_REFERED_BY." = '".$array[CRM_PR_ML_REFERED_BY]."'".RET;			$and = "AND".RET;		}		if($array[FLG_SEND] != "") {			$qry .= $and.FLG_SEND." = ".$array[FLG_SEND]."".RET;			$and = "AND".RET;		}		if($array[START_DATE] != "") {			$qry .= $and.START_DATE." = '".$array[START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[END_DATE] != "") {			$qry .= $and.END_DATE." = '".$array[END_DATE]."'".RET;			$and = "AND".RET;		}				if($array['prm_restaurent'] != "") {			$qry .= $and." `p`.`prm_restaurent` = '".$array['prm_restaurent']."'".RET;			$and = "AND".RET;		}				if($array['search_prom'] != "") {			$qry .= $and.CRM_PR_ML_PROMOTION." = '".$array['search_prom']."'".RET;			$and = "AND".RET;		}						if(is_not_empty($array['search_from_dt']) && is_not_empty($array['search_to_dt'])){						$qry .= $and.' `cpe`.`'.START_DATE.'` >= \''.date('Y-m-d 00:00:00',strtotime($array['search_from_dt'])).'\''.RET.'AND `cpe`.`'.START_DATE.'` <= \''.date('Y-m-d 23:59:59',strtotime($array['search_to_dt'])).'\''.RET;			$and = 'AND'.RET;		}		if(is_gt_zero_num($array["isActive"])) {			$qry .= $and.$crm_prom_emails_active_condition;;			$and = "AND".RET;		}		if(is_not_empty($array[SORT_ON]) && is_not_empty($array[SORT_BY])) {		$qry .=" ORDER BY ".$array[SORT_ON]." ".$array[SORT_BY];		}		if(is_not_empty($array[OFFSET_TITLE]) && is_not_empty($array[LIMIT_TITLE])) {			$qry_with_limit  = $qry." LIMIT ".$array[OFFSET_TITLE].",".$array[LIMIT_TITLE];		}else{			$qry_with_limit  = $qry;		}		//echo $qry_with_limit;		$result = mysql_query ($qry_with_limit);		$r1 = mysql_query($qry);		if($r1){			$result_found = mysql_num_rows($r1);		}		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$isActive= 0;				//..check deactive date is not set or 0				if((is_not_empty($record[CRM_PROM_EMAILS_DEACTIVE_DATE])==false) || (is_gt_zero_num(strtotime($record[CRM_PROM_EMAILS_DEACTIVE_DATE]))== false)){					$isActive = 1; 				}else{					//..check the deactive date is greater than todays date					if(strtotime($record[CRM_PROM_EMAILS_DEACTIVE_DATE]) > strtotime(date(DATE_FORMAT))){						$isActive = 1;					}				}				if($isArray){					$class_object = array();					$class_object["crm_pr_ml_id"]=$record[CRM_PR_ML_ID];					$class_object["crm_pr_ml_userid"]=$record[CRM_PR_ML_USERID];					$class_object["crm_pr_ml_promotion"]=$record[CRM_PR_ML_PROMOTION];										$class_object["crm_pr_ml_refered_by"]=$record[CRM_PR_ML_REFERED_BY];										$class_object[CRM_CUST_EMAIL]=$record[CRM_CUST_EMAIL];					$class_object["title"]=$record['title'];															$class_object["flg_send"]=$record[FLG_SEND];					$class_object["start_date"]=$record[START_DATE];					$class_object["end_date"]=$record[END_DATE];										$class_object["list_id"]=$record['list_id'];					$class_object['usr_without_email']=_chk_if_usr_witout_email($record[CRM_CUST_EMAIL]);										$class_object["isActive"]=$isActive;				}else{					$class_object = new crm_prom_emails();					$class_object->setcrm_pr_ml_id($record[CRM_PR_ML_ID]);					$class_object->setcrm_pr_ml_userid($record[CRM_PR_ML_USERID]);					$class_object->setcrm_pr_ml_promotion($record[CRM_PR_ML_PROMOTION]);										$class_object->setcrm_pr_ml_refered_by($record[CRM_PR_ML_REFERED_BY]);										$class_object->setflg_send($record[FLG_SEND]);					$class_object->setstart_date($record[START_DATE]);					$class_object->setend_date($record[END_DATE]);				}				$class_objects[$record[CRM_PR_ML_ID]] = $class_object;			}		}		return $class_objects;	}//..End readArray	public function insert() {		if($this->getcrm_pr_ml_id() != '') {			$qry  = "UPDATE ".CRM_PROM_EMAILS.RET."SET".RET."			".CRM_PR_ML_ID." = '".$this->getcrm_pr_ml_id()."',".RET."			".CRM_PR_ML_USERID." = '".$this->getcrm_pr_ml_userid()."',".RET."			".CRM_PR_ML_PROMOTION." = '".$this->getcrm_pr_ml_promotion()."',".RET."						".CRM_PR_ML_REFERED_BY." = '".$this->getcrm_pr_ml_refered_by()."',".RET."						".FLG_SEND." = '".$this->getflg_send()."',".RET."			".START_DATE." = '".$this->getstart_date()."',".RET."			".END_DATE." = '".$this->getend_date()."'".RET.			"WHERE ".CRM_PR_ML_ID." = ".$this->getcrm_pr_ml_id().RET;			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".CRM_PROM_EMAILS." (".RET.			"".CRM_PR_ML_USERID.", ".CRM_PR_ML_PROMOTION.", ".CRM_PR_ML_REFERED_BY.", ".FLG_SEND.", ".START_DATE.", ".END_DATE.RET.				") VALUES (".RET.			"'".$this->getcrm_pr_ml_userid()."',".RET.			"'".$this->getcrm_pr_ml_promotion()."',".RET.			"'".$this->getcrm_pr_ml_refered_by()."',".RET.			"'".$this->getflg_send()."',".RET.			"'".$this->getstart_date()."',".RET.			"'".$this->getend_date()."'".RET.			")".RET;			$res = mysql_query($qry);			$this->setcrm_pr_ml_id(mysql_insert_id());		}	}//..End Insert	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".CRM_PROM_EMAILS.RET;		$and = "WHERE".RET;		if($array[CRM_PR_ML_ID] != "") {			$qry .= $and.CRM_PR_ML_ID." = '".$array[CRM_PR_ML_ID]."'".RET;			$and = "AND".RET;		}		if($array[CRM_PR_ML_USERID] != "") {			$qry .= $and.CRM_PR_ML_USERID." = '".$array[CRM_PR_ML_USERID]."'".RET;			$and = "AND".RET;		}		if($array[CRM_PR_ML_PROMOTION] != "") {			$qry .= $and.CRM_PR_ML_PROMOTION." = '".$array[CRM_PR_ML_PROMOTION]."'".RET;			$and = "AND".RET;		}				if($array[CRM_PR_ML_REFERED_BY] != "") {			$qry .= $and.CRM_PR_ML_REFERED_BY." = '".$array[CRM_PR_ML_REFERED_BY]."'".RET;			$and = "AND".RET;		}		if($array[FLG_SEND] != "") {			$qry .= $and.FLG_SEND." = '".$array[FLG_SEND]."'".RET;			$and = "AND".RET;		}		if($array[START_DATE] != "") {			$qry .= $and.START_DATE." = '".$array[START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[END_DATE] != "") {			$qry .= $and.END_DATE." = '".$array[END_DATE]."'".RET;			$and = "AND".RET;		}		$res = mysql_query($qry);		if($res){			return OPERATION_SUCCESS;		};		return OPERATION_FAIL;	}//..End Delete	public function isAlreadyThere($crm_pr_ml_userid ,$crm_pr_ml_promotion ,$flg_send ,$start_date ,$end_date) {		$unique_arr = array();			//$unique_arr[CRM_PR_ML_ID]=$crm_pr_ml_id;			//$unique_arr[CRM_PR_ML_USERID]=$crm_pr_ml_userid;			//$unique_arr[CRM_PR_ML_PROMOTION]=$crm_pr_ml_promotion;			//$unique_arr[FLG_SEND]=$flg_send;			//$unique_arr[START_DATE]=$start_date;			//$unique_arr[END_DATE]=$end_date;		if(is_not_empty($unique_arr)){			return $this->readObject($unique_arr);		}		return false;	}//..isAlreadyThere	public function create($crm_pr_ml_userid ,$crm_pr_ml_promotion ,$flg_send ,$start_date ,$end_date ,$crm_pr_ml_refered_by=0) {		if(is_not_empty($crm_pr_ml_userid)){			if($this->isAlreadyThere($crm_pr_ml_userid ,$crm_pr_ml_promotion ,$flg_send ,$start_date ,$end_date)){				return OPERATION_DUPLICATE;			}else{				$this->setcrm_pr_ml_id("");				$this->setcrm_pr_ml_userid($crm_pr_ml_userid);				$this->setcrm_pr_ml_promotion($crm_pr_ml_promotion);				$this->setcrm_pr_ml_refered_by($crm_pr_ml_refered_by);				$this->setflg_send($flg_send);								if(is_not_empty($start_date)){					$this->setstart_date($start_date);				}else{					$this->setstart_date(date(DATE_FORMAT));				}									if(is_not_empty($end_date)){					$this->setend_date($end_date);				}									//$this->setend_date(date(DATE_FORMAT));				//$this->setend_date($end_date);				$this->insert();				return $this->getcrm_pr_ml_id();			}		}		return OPERATION_FAIL;	}//..create	public function update($crm_pr_ml_id, $crm_pr_ml_userid, $crm_pr_ml_promotion, $flg_send, $start_date, $end_date) {		if(is_gt_zero_num($crm_pr_ml_id)){			if ($this->readObject(array(CRM_PR_ML_ID=>$crm_pr_ml_id))){				$this->setcrm_pr_ml_userid($crm_pr_ml_userid);				$this->setcrm_pr_ml_promotion($crm_pr_ml_promotion);				//$this->setcrm_pr_ml_refered_by($crm_pr_ml_refered_by);				$this->setflg_send($flg_send);				$this->setstart_date($start_date);				$this->setend_date($end_date);				$this->insert();				return OPERATION_SUCCESS;			}		}		return OPERATION_FAIL;	}//..update	//..Mark read	public function mark_read($crm_pr_ml_id,$crm_pr_user,$crm_promotion){		if(is_gt_zero_num($crm_pr_ml_id) && is_not_empty($crm_pr_user)){					if ($this->readObject(array(CRM_PR_ML_ID=>$crm_pr_ml_id))){						//..First check already claimed									if($this->getflg_send()==0){					//..Fetch teh crm record detail						//$tbl_crm_detail=tbl_crm::GetInfo($crm_pr_ml_id);					//..Next check weather email or phone matches						$qry  = "UPDATE `".CRM_PROM_EMAILS."` SET `".FLG_SEND."`=1,".CRM_PROM_EMAILS_DEACTIVE_DATE." = '".date(DATE_FORMAT)."' WHERE `".CRM_PR_ML_ID."`={$crm_pr_ml_id} ";						$res = mysql_query($qry);						if($res){							return 1;//success						}						}else{					return -1; 	//duplicate				}							}					}		return 0; //failure	}//..end activate		//..Mark read	public function filt_mark_read($crm_pr_ml_id,$crm_pr_user,$crm_promotion){		if(is_gt_zero_num($crm_pr_ml_id) && is_not_empty($crm_pr_user)){					if ($this->readObject(array(CRM_PR_ML_ID=>$crm_pr_ml_id))){						//..First check already claimed									if($this->getflg_send()==0){					//..Fetch crm record detail from the crm_prom_email					$tbl_crm_detail=tbl_crm::GetInfo($this->getcrm_pr_ml_userid());					//..Next check weather email or phone matches					if(					($tbl_crm_detail[CRM_CUST_EMAIL]==$crm_pr_user) || 					 ((is_not_empty($tbl_crm_detail[CRM_CUST_PHONE])) && (str_replace(array('+', '-'), '', filter_var($tbl_crm_detail[CRM_CUST_PHONE], FILTER_SANITIZE_NUMBER_INT))==str_replace(array('+', '-'), '', filter_var($crm_pr_user, FILTER_SANITIZE_NUMBER_INT))))					){						$qry  = "UPDATE `".CRM_PROM_EMAILS."` SET `".FLG_SEND."`=1,".CRM_PROM_EMAILS_DEACTIVE_DATE." = '".date(DATE_FORMAT)."' WHERE `".CRM_PR_ML_ID."`={$crm_pr_ml_id} ";						$res = mysql_query($qry);						if($res){							return 1; //success						}							}else{						return -2; //email doesnot match					}									}else{					return -1; //duplicate				}							}					}		return 0; //failure	}//..end activate		public function activate($crm_pr_ml_id){		if(is_gt_zero_num($crm_pr_ml_id)){			if ($this->readObject(array(CRM_PR_ML_ID=>$crm_pr_ml_id))){				$qry  = "UPDATE ".CRM_PROM_EMAILS.RET."SET".RET."			".CRM_PROM_EMAILS_DEACTIVE_DATE." = '".date(EMPTY_DATE_FORMAT)."' WHERE ".CRM_PR_ML_ID."={$crm_pr_ml_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end activate	public function deactivate($crm_pr_ml_id){		if(is_gt_zero_num($crm_pr_ml_id)){			if ($this->readObject(array(CRM_PR_ML_ID=>$crm_pr_ml_id))){				$qry  = "UPDATE ".CRM_PROM_EMAILS.RET."SET".RET."			".CRM_PROM_EMAILS_DEACTIVE_DATE." = '".date(DATE_FORMAT)."' WHERE ".CRM_PR_ML_ID."={$crm_pr_ml_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end deactivate	public static function GetInfo($crm_pr_ml_id) {		$info = array();		if($crm_pr_ml_id != ""){			$obj_crm_prom_emails = new crm_prom_emails();			if($obj_crm_prom_emails->readObject(array("crm_pr_ml_id"=>$crm_pr_ml_id))){				$info["crm_pr_ml_id"]=$obj_crm_prom_emails->getcrm_pr_ml_id();				$info["crm_pr_ml_userid"]=$obj_crm_prom_emails->getcrm_pr_ml_userid();				$info["crm_pr_ml_promotion"]=$obj_crm_prom_emails->getcrm_pr_ml_promotion();								$info["crm_pr_ml_refered_by"]=$obj_crm_prom_emails->getcrm_pr_ml_refered_by();								$info["flg_send"]=$obj_crm_prom_emails->getflg_send();				$info["start_date"]=$obj_crm_prom_emails->getstart_date();				$info["end_date"]=$obj_crm_prom_emails->getend_date();				$info["isActive"] = 0;				//..check deactive date is not set or 0				if((is_not_empty($obj_crm_prom_emails->getcrm_prom_emails_deactive_date())==false)  || (is_gt_zero_num(strtotime($obj_crm_prom_emails->getcrm_prom_emails_deactive_date()))== false)){					$info["isActive"] = 1;				}else{					//..check the deactive date is greater than todays date					if(strtotime($obj_crm_prom_emails->getcrm_prom_emails_deactive_date()) > strtotime(date(DATE_FORMAT))){						$info["isActive"] = 1;					}				}			}		unset($obj_crm_prom_emails);		return $info;		}	}//..End GetInfo	public static function GetFields($data){		global $crm_prom_emails_active_condition;		$arr = array();		if(is_not_empty($data)){			$qry ="SELECT ".$data['key_field'].",".$data['value_field']." FROM ".CRM_PROM_EMAILS."";			if(is_gt_zero_num($data['isActive'])){				$qry .= " WHERE ".$crm_prom_emails_active_condition;			}			$res = mysql_query($qry); 			if($res){				while($row=mysql_fetch_assoc($res)){					$arr[$row[$data['key_field']]] = $row[$data['value_field']];				}			}		}		return $arr;	}//.. End of GetFields			//..Check for duplicate..		public function isAlreadyThere_direct($crm_pr_ml_userid ,$crm_pr_ml_promotion ,$flg_send ,$start_date ,$end_date) {		$unique_arr = array();			//$unique_arr[CRM_PR_ML_ID]=$crm_pr_ml_id;			$unique_arr[CRM_PR_ML_USERID]=$crm_pr_ml_userid;			$unique_arr[CRM_PR_ML_PROMOTION]=$crm_pr_ml_promotion;			$unique_arr[FLG_SEND]=$flg_send;			//$unique_arr[START_DATE]=$start_date;			//$unique_arr[END_DATE]=$end_date;		if(is_not_empty($unique_arr)){			return $this->readObject($unique_arr);		}		return false;	}//..isAlreadyThere		//..direct insert	public function direct_insert($crm_pr_ml_userid ,$crm_pr_ml_promotion ,$flg_send ,$start_date ,$end_date) {		if(is_not_empty($crm_pr_ml_userid)){			if($this->isAlreadyThere_direct($crm_pr_ml_userid ,$crm_pr_ml_promotion ,1 ,$start_date ,$end_date)){				return OPERATION_DUPLICATE;			}else{				$this->setcrm_pr_ml_id("");				$this->setcrm_pr_ml_userid($crm_pr_ml_userid);				$this->setcrm_pr_ml_promotion($crm_pr_ml_promotion);				$this->setflg_send($flg_send);				$this->setstart_date(date(DATE_FORMAT));				$this->setend_date(date(DATE_FORMAT));				$this->insert();				return $this->getcrm_pr_ml_id();			}		}		return OPERATION_FAIL;	}//..create		/*public function direct_insert($crm_pr_ml_userid,$crm_pr_ml_promotion,$flg_send,$start_date,$end_date){			$qry  = "INSERT INTO ".CRM_PROM_EMAILS." (".RET.			"".CRM_PR_ML_USERID.", ".CRM_PR_ML_PROMOTION.", ".FLG_SEND.", ".START_DATE.", ".END_DATE.RET.				") VALUES (".RET.			"'".$crm_pr_ml_userid."',".RET.			"'".$crm_pr_ml_promotion."',".RET.			"'".$flg_send."',".RET.			"'".$start_date."',".RET.			"'".$end_date."'".RET.			")".RET;			$res = mysql_query($qry);						return mysql_insert_id();	}*/}//..End crm_prom_emails?>