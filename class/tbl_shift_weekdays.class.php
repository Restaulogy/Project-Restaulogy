<?php/**********************************************************************tbl_shift_weekdays.class.phpGenerated by STRUCTY 2013.07.12 11:30:39.Copyright 2011 Structy, Frédéric Aebi. All rights reserved.**********************************************************************/define("TBL_SHIFT_WEEKDAYS", "tbl_shift_weekdays"); define('SFT_WKDY_ID', 'sft_wkdy_id'); define('SFT_WKDY_SHIFT', 'sft_wkdy_shift'); define('SFT_WKDY_SUNDAY', 'sft_wkdy_sunday'); define('sft_wkdy_monday', 'sft_wkdy_monday'); define('SFT_WKDY_TUESDAY', 'sft_wkdy_tuesday'); define('SFT_WKDY_WEDNESDAY', 'sft_wkdy_wednesday'); define('SFT_WKDY_THURSDAY', 'sft_wkdy_thursday'); define('SFT_WKDY_FRIDAY', 'sft_wkdy_friday'); define('SFT_WKDY_SATURDAY', 'sft_wkdy_saturday'); define('SFT_WKDY_START_DATE', 'sft_wkdy_start_date'); define('SFT_WKDY_END_DATE', 'sft_wkdy_end_date'); define("TBL_SHIFT_WEEKDAYS_ACTIVE_DATE",  SFT_WKDY_START_DATE);define("TBL_SHIFT_WEEKDAYS_DEACTIVE_DATE",  SFT_WKDY_END_DATE);$tbl_shift_weekdays_active_condition= " (".TBL_SHIFT_WEEKDAYS_DEACTIVE_DATE." is NULL OR ".TBL_SHIFT_WEEKDAYS_DEACTIVE_DATE." = 0 OR ".TBL_SHIFT_WEEKDAYS_DEACTIVE_DATE." > CURDATE( )) ";class tbl_shift_weekdays {	private $sft_wkdy_id;	private $sft_wkdy_shift;	private $sft_wkdy_sunday;	private $sft_wkdy_monday;	private $sft_wkdy_tuesday;	private $sft_wkdy_wednesday;	private $sft_wkdy_thursday;	private $sft_wkdy_friday;	private $sft_wkdy_saturday;	private $sft_wkdy_start_date;	private $sft_wkdy_end_date;	private $tbl_shift_weekdays_active_date;	private $tbl_shift_weekdays_deactive_date;	public function setsft_wkdy_id($pArg="0") {$this->sft_wkdy_id=$pArg;}	public function setsft_wkdy_shift($pArg="0") {$this->sft_wkdy_shift=$pArg;}	public function setsft_wkdy_sunday($pArg="0") {$this->sft_wkdy_sunday=$pArg;}	public function setsft_wkdy_monday($pArg="0") {$this->sft_wkdy_monday=$pArg;}	public function setsft_wkdy_tuesday($pArg="0") {$this->sft_wkdy_tuesday=$pArg;}	public function setsft_wkdy_wednesday($pArg="0") {$this->sft_wkdy_wednesday=$pArg;}	public function setsft_wkdy_thursday($pArg="0") {$this->sft_wkdy_thursday=$pArg;}	public function setsft_wkdy_friday($pArg="0") {$this->sft_wkdy_friday=$pArg;}	public function setsft_wkdy_saturday($pArg="0") {$this->sft_wkdy_saturday=$pArg;}	public function setsft_wkdy_start_date($pArg="0") {$this->sft_wkdy_start_date=$pArg;}	public function setsft_wkdy_end_date($pArg="0") {$this->sft_wkdy_end_date=$pArg;}	public function settbl_shift_weekdays_active_date($pArg="0") {$this->tbl_shift_weekdays_active_date=$pArg;}	public function settbl_shift_weekdays_deactive_date($pArg="0") {$this->tbl_shift_weekdays_deactive_date=$pArg;}	public function getsft_wkdy_id() {return $this->sft_wkdy_id;}	public function getsft_wkdy_shift() {return $this->sft_wkdy_shift;}	public function getsft_wkdy_sunday() {return $this->sft_wkdy_sunday;}	public function getsft_wkdy_monday() {return $this->sft_wkdy_monday;}	public function getsft_wkdy_tuesday() {return $this->sft_wkdy_tuesday;}	public function getsft_wkdy_wednesday() {return $this->sft_wkdy_wednesday;}	public function getsft_wkdy_thursday() {return $this->sft_wkdy_thursday;}	public function getsft_wkdy_friday() {return $this->sft_wkdy_friday;}	public function getsft_wkdy_saturday() {return $this->sft_wkdy_saturday;}	public function getsft_wkdy_start_date() {return $this->sft_wkdy_start_date;}	public function getsft_wkdy_end_date() {return $this->sft_wkdy_end_date;}	public function gettbl_shift_weekdays_active_date($pArg="0") {return $this->tbl_shift_weekdays_active_date;}	public function gettbl_shift_weekdays_deactive_date($pArg="0") {return $this->tbl_shift_weekdays_deactive_date;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_SHIFT_WEEKDAYS.RET;		$and = "WHERE".RET;		if($array[SFT_WKDY_ID] != "") {			$qry .= $and.SFT_WKDY_ID." = '".$array[SFT_WKDY_ID]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_SHIFT] != "") {			$qry .= $and.SFT_WKDY_SHIFT." = '".$array[SFT_WKDY_SHIFT]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_SUNDAY] != "") {			$qry .= $and.SFT_WKDY_SUNDAY." = '".$array[SFT_WKDY_SUNDAY]."'".RET;			$and = "AND".RET;		}		if($array[sft_wkdy_monday] != "") {			$qry .= $and.sft_wkdy_monday." = '".$array[sft_wkdy_monday]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_TUESDAY] != "") {			$qry .= $and.SFT_WKDY_TUESDAY." = '".$array[SFT_WKDY_TUESDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_WEDNESDAY] != "") {			$qry .= $and.SFT_WKDY_WEDNESDAY." = '".$array[SFT_WKDY_WEDNESDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_THURSDAY] != "") {			$qry .= $and.SFT_WKDY_THURSDAY." = '".$array[SFT_WKDY_THURSDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_FRIDAY] != "") {			$qry .= $and.SFT_WKDY_FRIDAY." = '".$array[SFT_WKDY_FRIDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_SATURDAY] != "") {			$qry .= $and.SFT_WKDY_SATURDAY." = '".$array[SFT_WKDY_SATURDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_START_DATE] != "") {			$qry .= $and.SFT_WKDY_START_DATE." = '".$array[SFT_WKDY_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_END_DATE] != "") {			$qry .= $and.SFT_WKDY_END_DATE." = '".$array[SFT_WKDY_END_DATE]."'".RET;			$and = "AND".RET;		}				if($array[SES_RESTAURANT] != "") {			$qry .= $and.chkShiftInRestaurant(SFT_WKDY_SHIFT,$array[SES_RESTAURANT]).RET;			$and = "AND".RET;		} 	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setsft_wkdy_id($record[SFT_WKDY_ID]);				$this->setsft_wkdy_shift($record[SFT_WKDY_SHIFT]);				$this->setsft_wkdy_sunday($record[SFT_WKDY_SUNDAY]);				$this->setsft_wkdy_monday($record[sft_wkdy_monday]);				$this->setsft_wkdy_tuesday($record[SFT_WKDY_TUESDAY]);				$this->setsft_wkdy_wednesday($record[SFT_WKDY_WEDNESDAY]);				$this->setsft_wkdy_thursday($record[SFT_WKDY_THURSDAY]);				$this->setsft_wkdy_friday($record[SFT_WKDY_FRIDAY]);				$this->setsft_wkdy_saturday($record[SFT_WKDY_SATURDAY]);				$this->setsft_wkdy_start_date($record[SFT_WKDY_START_DATE]);				$this->setsft_wkdy_end_date($record[SFT_WKDY_END_DATE]);				$this->settbl_shift_weekdays_active_date($record[TBL_SHIFT_WEEKDAYS_ACTIVE_DATE]);				$this->settbl_shift_weekdays_deactive_date($record[TBL_SHIFT_WEEKDAYS_DEACTIVE_DATE]);				return true;			}		}	}	public static function readArray($array = array(),&$result_found=0,$isArray=1) {		global $tbl_shift_weekdays_active_condition;		$qry = "SELECT *,".SHIFT_NAME.RET."FROM ".TBL_SHIFT_WEEKDAYS.' INNER JOIN '.TBL_SHIFT.' ON '.SFT_WKDY_SHIFT.'='.SHIFT_ID.RET;		$and = "WHERE".RET;		if($array[SFT_WKDY_ID] != "") {			$qry .= $and.SFT_WKDY_ID." = '".$array[SFT_WKDY_ID]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_SHIFT] != "") {			$qry .= $and.SFT_WKDY_SHIFT." = '".$array[SFT_WKDY_SHIFT]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_SUNDAY] != "") {			$qry .= $and.SFT_WKDY_SUNDAY." = '".$array[SFT_WKDY_SUNDAY]."'".RET;			$and = "AND".RET;		}		if($array[sft_wkdy_monday] != "") {			$qry .= $and.sft_wkdy_monday." = '".$array[sft_wkdy_monday]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_TUESDAY] != "") {			$qry .= $and.SFT_WKDY_TUESDAY." = '".$array[SFT_WKDY_TUESDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_WEDNESDAY] != "") {			$qry .= $and.SFT_WKDY_WEDNESDAY." = '".$array[SFT_WKDY_WEDNESDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_THURSDAY] != "") {			$qry .= $and.SFT_WKDY_THURSDAY." = '".$array[SFT_WKDY_THURSDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_FRIDAY] != "") {			$qry .= $and.SFT_WKDY_FRIDAY." = '".$array[SFT_WKDY_FRIDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_SATURDAY] != "") {			$qry .= $and.SFT_WKDY_SATURDAY." = '".$array[SFT_WKDY_SATURDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_START_DATE] != "") {			$qry .= $and.SFT_WKDY_START_DATE." = '".$array[SFT_WKDY_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_END_DATE] != "") {			$qry .= $and.SFT_WKDY_END_DATE." = '".$array[SFT_WKDY_END_DATE]."'".RET;			$and = "AND".RET;		}				if($array[SES_RESTAURANT] != "") {			$qry .= $and.chkShiftInRestaurant(SFT_WKDY_SHIFT,$array[SES_RESTAURANT]).RET;			$and = "AND".RET;		} 		if(is_gt_zero_num($array["isActive"])) {			$qry .= $and.$tbl_shift_weekdays_active_condition;;			$and = "AND".RET;		}		if(is_not_empty($array[SORT_ON]) && is_not_empty($array[SORT_BY])) {		$qry .=" ORDER BY ".$array[SORT_ON]." ".$array[SORT_BY];		}		if(is_not_empty($array[OFFSET_TITLE]) && is_not_empty($array[LIMIT_TITLE])) {			$qry_with_limit  = $qry." LIMIT ".$array[OFFSET_TITLE].",".$array[LIMIT_TITLE];		}else{			$qry_with_limit  = $qry;		}		$result = mysql_query ($qry_with_limit);		$r1 = mysql_query($qry);		 		if($r1){			$result_found = mysql_num_rows($r1);		}		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$isActive= chk_if_record_active($record[TBL_SHIFT_WEEKDAYS_DEACTIVE_DATE]);				 				if($isArray){					$class_object = array();					$class_object["sft_wkdy_id"]=$record[SFT_WKDY_ID];										$class_object["sft_wkdy_shift"]=$record[SFT_WKDY_SHIFT];					$class_object[SHIFT_NAME] = $record[SHIFT_NAME];					$class_object["sft_wkdy_sunday"]=$record[SFT_WKDY_SUNDAY];					$class_object["sft_wkdy_monday"]=$record[sft_wkdy_monday];					$class_object["sft_wkdy_tuesday"]=$record[SFT_WKDY_TUESDAY];					$class_object["sft_wkdy_wednesday"]=$record[SFT_WKDY_WEDNESDAY];					$class_object["sft_wkdy_thursday"]=$record[SFT_WKDY_THURSDAY];					$class_object["sft_wkdy_friday"]=$record[SFT_WKDY_FRIDAY];					$class_object["sft_wkdy_saturday"]=$record[SFT_WKDY_SATURDAY];					$class_object["sft_wkdy_start_date"]=$record[SFT_WKDY_START_DATE];					$class_object["sft_wkdy_end_date"]=$record[SFT_WKDY_END_DATE];					$class_object["isActive"]=$isActive;				}else{					$class_object = new tbl_shift_weekdays();					$class_object->setsft_wkdy_id($record[SFT_WKDY_ID]);					$class_object->setsft_wkdy_shift($record[SFT_WKDY_SHIFT]);					$class_object->setsft_wkdy_sunday($record[SFT_WKDY_SUNDAY]);					$class_object->setsft_wkdy_monday($record[sft_wkdy_monday]);					$class_object->setsft_wkdy_tuesday($record[SFT_WKDY_TUESDAY]);					$class_object->setsft_wkdy_wednesday($record[SFT_WKDY_WEDNESDAY]);					$class_object->setsft_wkdy_thursday($record[SFT_WKDY_THURSDAY]);					$class_object->setsft_wkdy_friday($record[SFT_WKDY_FRIDAY]);					$class_object->setsft_wkdy_saturday($record[SFT_WKDY_SATURDAY]);					$class_object->setsft_wkdy_start_date($record[SFT_WKDY_START_DATE]);					$class_object->setsft_wkdy_end_date($record[SFT_WKDY_END_DATE]);				}				$class_objects[$record[SFT_WKDY_ID]] = $class_object;			}		}		return $class_objects;	}//..End readArray	public function insert() {		if($this->getsft_wkdy_id() != '') {			$qry  = "UPDATE ".TBL_SHIFT_WEEKDAYS.RET."SET".RET."			".SFT_WKDY_ID." = '".$this->getsft_wkdy_id()."',".RET."			".SFT_WKDY_SHIFT." = '".$this->getsft_wkdy_shift()."',".RET."			".SFT_WKDY_SUNDAY." = '".$this->getsft_wkdy_sunday()."',".RET."			".sft_wkdy_monday." = '".$this->getsft_wkdy_monday()."',".RET."			".SFT_WKDY_TUESDAY." = '".$this->getsft_wkdy_tuesday()."',".RET."			".SFT_WKDY_WEDNESDAY." = '".$this->getsft_wkdy_wednesday()."',".RET."			".SFT_WKDY_THURSDAY." = '".$this->getsft_wkdy_thursday()."',".RET."			".SFT_WKDY_FRIDAY." = '".$this->getsft_wkdy_friday()."',".RET."			".SFT_WKDY_SATURDAY." = '".$this->getsft_wkdy_saturday()."',".RET."			".SFT_WKDY_START_DATE." = '".$this->getsft_wkdy_start_date()."',".RET."			".SFT_WKDY_END_DATE." = '".$this->getsft_wkdy_end_date()."'".RET.			"WHERE ".SFT_WKDY_ID." = ".$this->getsft_wkdy_id().RET;			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".TBL_SHIFT_WEEKDAYS." (".RET.			"".SFT_WKDY_SHIFT.", ".SFT_WKDY_SUNDAY.", ".sft_wkdy_monday.", ".SFT_WKDY_TUESDAY.", ".SFT_WKDY_WEDNESDAY.", ".SFT_WKDY_THURSDAY.", ".SFT_WKDY_FRIDAY.", ".SFT_WKDY_SATURDAY.", ".SFT_WKDY_START_DATE.", ".SFT_WKDY_END_DATE.RET.				") VALUES (".RET.			"'".$this->getsft_wkdy_shift()."',".RET.			"'".$this->getsft_wkdy_sunday()."',".RET.			"'".$this->getsft_wkdy_monday()."',".RET.			"'".$this->getsft_wkdy_tuesday()."',".RET.			"'".$this->getsft_wkdy_wednesday()."',".RET.			"'".$this->getsft_wkdy_thursday()."',".RET.			"'".$this->getsft_wkdy_friday()."',".RET.			"'".$this->getsft_wkdy_saturday()."',".RET.			"'".$this->getsft_wkdy_start_date()."',".RET.			"'".$this->getsft_wkdy_end_date()."'".RET.			")".RET;			$res = mysql_query($qry);			$this->setsft_wkdy_id(mysql_insert_id());		}	}//..End Insert	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".TBL_SHIFT_WEEKDAYS.RET;		$and = "WHERE".RET;		if($array[SFT_WKDY_ID] != "") {			$qry .= $and.SFT_WKDY_ID." = '".$array[SFT_WKDY_ID]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_SHIFT] != "") {			$qry .= $and.SFT_WKDY_SHIFT." = '".$array[SFT_WKDY_SHIFT]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_SUNDAY] != "") {			$qry .= $and.SFT_WKDY_SUNDAY." = '".$array[SFT_WKDY_SUNDAY]."'".RET;			$and = "AND".RET;		}		if($array[sft_wkdy_monday] != "") {			$qry .= $and.sft_wkdy_monday." = '".$array[sft_wkdy_monday]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_TUESDAY] != "") {			$qry .= $and.SFT_WKDY_TUESDAY." = '".$array[SFT_WKDY_TUESDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_WEDNESDAY] != "") {			$qry .= $and.SFT_WKDY_WEDNESDAY." = '".$array[SFT_WKDY_WEDNESDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_THURSDAY] != "") {			$qry .= $and.SFT_WKDY_THURSDAY." = '".$array[SFT_WKDY_THURSDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_FRIDAY] != "") {			$qry .= $and.SFT_WKDY_FRIDAY." = '".$array[SFT_WKDY_FRIDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_SATURDAY] != "") {			$qry .= $and.SFT_WKDY_SATURDAY." = '".$array[SFT_WKDY_SATURDAY]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_START_DATE] != "") {			$qry .= $and.SFT_WKDY_START_DATE." = '".$array[SFT_WKDY_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[SFT_WKDY_END_DATE] != "") {			$qry .= $and.SFT_WKDY_END_DATE." = '".$array[SFT_WKDY_END_DATE]."'".RET;			$and = "AND".RET;		}		$res = mysql_query($qry);		if($res){			return OPERATION_SUCCESS;		};		return OPERATION_FAIL;	}//..End Delete	public function isAlreadyThere($sft_wkdy_shift ,$sft_wkdy_sunday ,$sft_wkdy_monday ,$sft_wkdy_tuesday ,$sft_wkdy_wednesday ,$sft_wkdy_thursday ,$sft_wkdy_friday ,$sft_wkdy_saturday ,$sft_wkdy_start_date ,$sft_wkdy_end_date) {		$unique_arr = array();			//$unique_arr[SFT_WKDY_ID]=$sft_wkdy_id;			//$unique_arr[SFT_WKDY_SHIFT]=$sft_wkdy_shift;			//$unique_arr[SFT_WKDY_SUNDAY]=$sft_wkdy_sunday;			//$unique_arr[sft_wkdy_monday]=$sft_wkdy_monday;			//$unique_arr[SFT_WKDY_TUESDAY]=$sft_wkdy_tuesday;			//$unique_arr[SFT_WKDY_WEDNESDAY]=$sft_wkdy_wednesday;			//$unique_arr[SFT_WKDY_THURSDAY]=$sft_wkdy_thursday;			//$unique_arr[SFT_WKDY_FRIDAY]=$sft_wkdy_friday;			//$unique_arr[SFT_WKDY_SATURDAY]=$sft_wkdy_saturday;			//$unique_arr[SFT_WKDY_START_DATE]=$sft_wkdy_start_date;			//$unique_arr[SFT_WKDY_END_DATE]=$sft_wkdy_end_date;		if(is_not_empty($unique_arr)){			return $this->readObject($unique_arr);		}		return false;	}//..isAlreadyThere	public function create($sft_wkdy_shift ,$sft_wkdy_sunday ,$sft_wkdy_monday ,$sft_wkdy_tuesday ,$sft_wkdy_wednesday ,$sft_wkdy_thursday ,$sft_wkdy_friday ,$sft_wkdy_saturday ,$sft_wkdy_start_date='' ,$sft_wkdy_end_date='') {		if(is_not_empty($sft_wkdy_shift)){			if($this->isAlreadyThere($sft_wkdy_shift ,$sft_wkdy_sunday ,$sft_wkdy_monday ,$sft_wkdy_tuesday ,$sft_wkdy_wednesday ,$sft_wkdy_thursday ,$sft_wkdy_friday ,$sft_wkdy_saturday ,$sft_wkdy_start_date ,$sft_wkdy_end_date)){				return OPERATION_DUPLICATE;			}else{				$this->setsft_wkdy_id("");				$this->setsft_wkdy_shift($sft_wkdy_shift);				$this->setsft_wkdy_sunday($sft_wkdy_sunday);				$this->setsft_wkdy_monday($sft_wkdy_monday);				$this->setsft_wkdy_tuesday($sft_wkdy_tuesday);				$this->setsft_wkdy_wednesday($sft_wkdy_wednesday);				$this->setsft_wkdy_thursday($sft_wkdy_thursday);				$this->setsft_wkdy_friday($sft_wkdy_friday);				$this->setsft_wkdy_saturday($sft_wkdy_saturday);				$this->setsft_wkdy_start_date(date(DATE_FORMAT));				$this->insert();				return $this->getsft_wkdy_id();			}		}		return OPERATION_FAIL;	}//..create	public function update($sft_wkdy_id, $sft_wkdy_shift, $sft_wkdy_sunday, $sft_wkdy_monday, $sft_wkdy_tuesday, $sft_wkdy_wednesday, $sft_wkdy_thursday, $sft_wkdy_friday, $sft_wkdy_saturday, $sft_wkdy_start_date='', $sft_wkdy_end_date='') {		if(is_gt_zero_num($sft_wkdy_id)){			if ($this->readObject(array(SFT_WKDY_ID=>$sft_wkdy_id))){				$this->setsft_wkdy_shift($sft_wkdy_shift);				$this->setsft_wkdy_sunday($sft_wkdy_sunday);				$this->setsft_wkdy_monday($sft_wkdy_monday);				$this->setsft_wkdy_tuesday($sft_wkdy_tuesday);				$this->setsft_wkdy_wednesday($sft_wkdy_wednesday);				$this->setsft_wkdy_thursday($sft_wkdy_thursday);				$this->setsft_wkdy_friday($sft_wkdy_friday);				$this->setsft_wkdy_saturday($sft_wkdy_saturday);				$this->insert();				return OPERATION_SUCCESS;			}		}		return OPERATION_FAIL;	}//..update	public function activate($sft_wkdy_id){		if(is_gt_zero_num($sft_wkdy_id)){			if ($this->readObject(array(SFT_WKDY_ID=>$sft_wkdy_id))){				$qry  = "UPDATE ".TBL_SHIFT_WEEKDAYS.RET."SET".RET."			".TBL_SHIFT_WEEKDAYS_DEACTIVE_DATE." = '".date(EMPTY_DATE_FORMAT)."' WHERE ".SFT_WKDY_ID."={$sft_wkdy_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end activate	public function deactivate($sft_wkdy_id){		if(is_gt_zero_num($sft_wkdy_id)){			if ($this->readObject(array(SFT_WKDY_ID=>$sft_wkdy_id))){				$qry  = "UPDATE ".TBL_SHIFT_WEEKDAYS.RET."SET".RET."			".TBL_SHIFT_WEEKDAYS_DEACTIVE_DATE." = '".date(DATE_FORMAT)."' WHERE ".SFT_WKDY_ID."={$sft_wkdy_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end deactivate 	public static function GetShiftInfo($sft_wkdy_shift) {		$info = array();		if($sft_wkdy_shift != ""){			$obj_tbl_shift_weekdays = new tbl_shift_weekdays();			if($obj_tbl_shift_weekdays->readObject(array("sft_wkdy_shift"=>$sft_wkdy_shift))){				$info["sft_wkdy_id"]=$obj_tbl_shift_weekdays->getsft_wkdy_id();				$info["sft_wkdy_shift"]=$obj_tbl_shift_weekdays->getsft_wkdy_shift();				$info["sft_wkdy_sunday"]=$obj_tbl_shift_weekdays->getsft_wkdy_sunday();				$info["sft_wkdy_monday"]=$obj_tbl_shift_weekdays->getsft_wkdy_monday();				$info["sft_wkdy_tuesday"]=$obj_tbl_shift_weekdays->getsft_wkdy_tuesday();				$info["sft_wkdy_wednesday"]=$obj_tbl_shift_weekdays->getsft_wkdy_wednesday();				$info["sft_wkdy_thursday"]=$obj_tbl_shift_weekdays->getsft_wkdy_thursday();				$info["sft_wkdy_friday"]=$obj_tbl_shift_weekdays->getsft_wkdy_friday();				$info["sft_wkdy_saturday"]=$obj_tbl_shift_weekdays->getsft_wkdy_saturday();				$info["sft_wkdy_start_date"]=$obj_tbl_shift_weekdays->getsft_wkdy_start_date();				$info["sft_wkdy_end_date"]=$obj_tbl_shift_weekdays->getsft_wkdy_end_date();			 	$info["isActive"]= chk_if_record_active($info["sft_wkdy_end_date"]);			}		unset($obj_tbl_shift_weekdays);		return $info;		}	}//..End GetInfo		public static function GetInfo($sft_wkdy_id) {		$info = array();		if($sft_wkdy_id != ""){			$obj_tbl_shift_weekdays = new tbl_shift_weekdays();			if($obj_tbl_shift_weekdays->readObject(array("sft_wkdy_id"=>$sft_wkdy_id))){				$info["sft_wkdy_id"]=$obj_tbl_shift_weekdays->getsft_wkdy_id();				$info["sft_wkdy_shift"]=$obj_tbl_shift_weekdays->getsft_wkdy_shift();				$info["sft_wkdy_sunday"]=$obj_tbl_shift_weekdays->getsft_wkdy_sunday();				$info["sft_wkdy_monday"]=$obj_tbl_shift_weekdays->getsft_wkdy_monday();				$info["sft_wkdy_tuesday"]=$obj_tbl_shift_weekdays->getsft_wkdy_tuesday();				$info["sft_wkdy_wednesday"]=$obj_tbl_shift_weekdays->getsft_wkdy_wednesday();				$info["sft_wkdy_thursday"]=$obj_tbl_shift_weekdays->getsft_wkdy_thursday();				$info["sft_wkdy_friday"]=$obj_tbl_shift_weekdays->getsft_wkdy_friday();				$info["sft_wkdy_saturday"]=$obj_tbl_shift_weekdays->getsft_wkdy_saturday();				$info["sft_wkdy_start_date"]=$obj_tbl_shift_weekdays->getsft_wkdy_start_date();				$info["sft_wkdy_end_date"]=$obj_tbl_shift_weekdays->getsft_wkdy_end_date();			 	$info["isActive"]= chk_if_record_active($info["sft_wkdy_end_date"]);			}		unset($obj_tbl_shift_weekdays);		return $info;		}	}//..End GetInfo	public static function GetFields($data){		global $tbl_shift_weekdays_active_condition;		$arr = array();		if(is_not_empty($data)){			$qry ="SELECT ".$data['key_field'].",".$data['value_field']." FROM ".TBL_SHIFT_WEEKDAYS."";			if(is_gt_zero_num($data['isActive'])){				$qry .= " WHERE ".$tbl_shift_weekdays_active_condition;			}			$res = mysql_query($qry); 			if($res){				while($row=mysql_fetch_assoc($res)){					$arr[$row[$data['key_field']]] = $row[$data['value_field']];				}			}		}		return $arr;	}//.. End of GetFields	 /** * Return day wise shift availability  * @param date $start_date * @param date $end_date * @return array $result */ 	public static function getdayWiseShifts($start_date,$end_date){		$result = array();				 $qry = 'SELECT `shift_name`, `emp_sft_date`, `sft_wkdy_shift`, GROUP_CONCAT(`emp_sft_employee`) `employees`,GROUP_CONCAT(CONCAT(`staff_fname`,\' \', `staff_lname`) ) `full_names` 		 FROM `tbl_emp_shift_assignment` 		 RIGHT OUTER JOIN `tbl_shift_weekdays` 		 ON `tbl_emp_shift_assignment`.`emp_sft_shift` = `tbl_shift_weekdays`.`sft_wkdy_shift` 		 INNER JOIN `tbl_shift` 		 ON `tbl_shift_weekdays`.`sft_wkdy_shift` = `tbl_shift`.`shift_id` 		 		 LEFT OUTER JOIN `tbl_staff` 		 ON `tbl_emp_shift_assignment`.`emp_sft_employee` = `tbl_staff`.`staff_member_id`  		 WHERE tbl_shift.shift_restaurent ='.$_SESSION[SES_RESTAURANT].' AND tbl_staff.staff_restaurent ='.$_SESSION[SES_RESTAURANT].' AND emp_sft_date BETWEEN  \''.date('Y-m-d' ,strtotime($start_date)).'\' AND  \''.date('Y-m-d' ,strtotime($end_date)).'\' GROUP BY emp_sft_date, sft_wkdy_shift';				// echo $qry; 		$res = mysql_query($qry);		 		$info = array();		if($res){			while($row = mysql_fetch_assoc($res)){				$info[$row["emp_sft_date"]][$row[SFT_WKDY_SHIFT]] = $row;	  				} 			}    		$weekdayinfo = self::readArray(array(SES_RESTAURANT =>$_SESSION[SES_RESTAURANT]),$res,1);	  //print_r($weekdayinfo);	  		// convert to strtotime()		$start_date = strtotime($start_date); 		$end_date = strtotime($end_date);		/*print_r($info);*/		$i = $start_date;		while($i<=$end_date) {			 			$wk_dt =   date('Y-m-d',$i);			$day = strtolower(date('l',$i));			foreach($weekdayinfo as $key=>$val){			  				$result[$wk_dt]['shift'][$val[SFT_WKDY_SHIFT]]['isEnabled'] = $val["sft_wkdy_{$day}"];				if(is_gt_zero_num($result[$wk_dt]['isEnabled'])==false){					$result[$wk_dt]['isEnabled'] = 0; 				}								if(is_not_empty($info[$wk_dt][$val[SFT_WKDY_SHIFT]])){					$result[$wk_dt]['shift'][$val[SFT_WKDY_SHIFT]]['employees'] = $info[$wk_dt][$val[SFT_WKDY_SHIFT]]['employees'];					$result[$wk_dt]['shift'][$val[SFT_WKDY_SHIFT]]['full_names'] = $info[$wk_dt][$val[SFT_WKDY_SHIFT]]['full_names'];					$result[$wk_dt]['isEnabled'] = 1;									}				 			}						$i = strtotime("+1 day",$i); 		} 		return $result;	}	}//..End tbl_shift_weekdays?>