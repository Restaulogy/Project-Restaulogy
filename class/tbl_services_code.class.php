<?php/**********************************************************************tbl_services_code.class.phpGenerated by STRUCTY 2013.03.18 11:11:04.Copyright 2011 Structy, Frdric Aebi. All rights reserved.**********************************************************************/define("TBL_SERVICES_CODE", "tbl_services_code"); define('SRVC_ID', 'srvc_id');define('SRVC_IMG', 'srvc_img');define('SRVC_NAME', 'srvc_name'); define('SRVC_DESCRIPTION', 'srvc_description'); define('SRVC_CAT_ID', 'srvc_cat_id');define('SRVC_BY_RESTRNT_OR_CUST', 'srvc_by_restrnt_or_cust'); define('SRVC_ATTEND_TIME_LIMIT', 'srvc_attend_time_limit'); define('SRVC_PROVIDE_TIME_LIMIT', 'srvc_provide_time_limit'); define('SRVC_START_DATE', 'srvc_start_date'); define('SRVC_END_DATE', 'srvc_end_date'); define('SRVC_RESTAURENT', 'srvc_restaurent');define("TBL_SERVICES_CODE_ACTIVE_DATE", "srvc_start_date");define("TBL_SERVICES_CODE_DEACTIVE_DATE", "srvc_end_date");/*$tbl_services_code_active_condition= " (".TBL_SERVICES_CODE_DEACTIVE_DATE." is NULL OR ".TBL_SERVICES_CODE_DEACTIVE_DATE." = 0 OR DATE(".TBL_SERVICES_CODE_DEACTIVE_DATE.") >= CURDATE( )) ";*//*$tbl_services_code_active_condition= " (".TBL_SERVICES_CODE_DEACTIVE_DATE." is NULL OR ".TBL_SERVICES_CODE_DEACTIVE_DATE." = 0 OR DATE(".TBL_SERVICES_CODE_DEACTIVE_DATE.") > CURDATE( )) ";*/$tbl_services_code_active_condition= " (".TBL_SERVICES_CODE_DEACTIVE_DATE." is NULL OR ".TBL_SERVICES_CODE_DEACTIVE_DATE." = 0 ) ";class tbl_services_code {	private $srvc_id;	private $srvc_name;	private $srvc_img;	private $srvc_cat_id;	private $srvc_description;	private $srvc_by_restrnt_or_cust;	private $srvc_attend_time_limit;	private $srvc_provide_time_limit;	private $srvc_start_date;	private $srvc_end_date;	private $tbl_services_code_active_date;	private $tbl_services_code_deactive_date;	private $srvc_restaurent;	public function setsrvc_id($pArg="0") {$this->srvc_id=$pArg;}	public function setsrvc_name($pArg="0") {$this->srvc_name=$pArg;}	public function setsrvc_img($pArg="0") {$this->srvc_img=$pArg;}			public function setsrvc_cat_id($pArg="0") {$this->srvc_cat_id=$pArg;}	public function setsrvc_description($pArg="0") {$this->srvc_description=$pArg;}	public function setsrvc_by_restrnt_or_cust($pArg="0") {$this->srvc_by_restrnt_or_cust=$pArg;}	public function setsrvc_attend_time_limit($pArg="0") {$this->srvc_attend_time_limit=$pArg;}	public function setsrvc_provide_time_limit($pArg="0") {$this->srvc_provide_time_limit=$pArg;}	public function setsrvc_start_date($pArg="0") {$this->srvc_start_date=$pArg;}	public function setsrvc_end_date($pArg="0") {$this->srvc_end_date=$pArg;}	public function settbl_services_code_active_date($pArg="0") {$this->tbl_services_code_active_date=$pArg;}	public function settbl_services_code_deactive_date($pArg="0") {$this->tbl_services_code_deactive_date=$pArg;}	public function setsrvc_restaurent($pArg="0") {$this->srvc_restaurent=$pArg;}	public function getsrvc_id() {return $this->srvc_id;}	public function getsrvc_name() {return $this->srvc_name;}	public function getsrvc_img() {return $this->srvc_img;}		public function getsrvc_cat_id() {return $this->srvc_cat_id;}	public function getsrvc_description() {return $this->srvc_description;}	public function getsrvc_by_restrnt_or_cust() {return $this->srvc_by_restrnt_or_cust;}	public function getsrvc_attend_time_limit() {return $this->srvc_attend_time_limit;}	public function getsrvc_provide_time_limit() {return $this->srvc_provide_time_limit;}	public function getsrvc_start_date() {return $this->srvc_start_date;}	public function getsrvc_end_date() {return $this->srvc_end_date;}		public function gettbl_services_code_active_date($pArg="0") {return $this->tbl_services_code_active_date;}	public function gettbl_services_code_deactive_date($pArg="0") {return $this->tbl_services_code_deactive_date;}	public function getsrvc_restaurent() {return $this->srvc_restaurent;}		public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_SERVICES_CODE.RET;		$and = "WHERE".RET;		if($array[SRVC_ID] != "") {			$qry .= $and.SRVC_ID." IN (".$array[SRVC_ID].")".RET;			$and = "AND".RET;		}		if($array[SRVC_NAME] != "") {			$qry .= $and.SRVC_NAME." = '".$array[SRVC_NAME]."'".RET;			$and = "AND".RET;		}				if($array[SRVC_IMG] != "") {			$qry .= $and.SRVC_IMG." = '".$array[SRVC_IMG]."'".RET;			$and = "AND".RET;		}				if($array[SRVC_CAT_ID] != "") {			$qry .= $and.SRVC_CAT_ID." = '".$array[SRVC_CAT_ID]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_DESCRIPTION] != "") {			$qry .= $and.SRVC_DESCRIPTION." = '".$array[SRVC_DESCRIPTION]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_BY_RESTRNT_OR_CUST] != "") {			$qry .= $and.SRVC_BY_RESTRNT_OR_CUST." = '".$array[SRVC_BY_RESTRNT_OR_CUST]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_ATTEND_TIME_LIMIT] != "") {			$qry .= $and.SRVC_ATTEND_TIME_LIMIT." = '".$array[SRVC_ATTEND_TIME_LIMIT]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_PROVIDE_TIME_LIMIT] != "") {			$qry .= $and.SRVC_PROVIDE_TIME_LIMIT." = '".$array[SRVC_PROVIDE_TIME_LIMIT]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_START_DATE] != "") {			$qry .= $and.SRVC_START_DATE." = '".$array[SRVC_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_END_DATE] != "") {			$qry .= $and.SRVC_END_DATE." = '".$array[SRVC_END_DATE]."'".RET;			$and = "AND".RET;		}				if($array[SRVC_RESTAURENT] != "") {			$qry .= $and.SRVC_RESTAURENT." = '".$array[SRVC_RESTAURENT]."'".RET;			$and = "AND".RET;		}	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setsrvc_id($record[SRVC_ID]);				$this->setsrvc_name($record[SRVC_NAME]);				$this->setsrvc_img($record[SRVC_IMG]);								$this->setsrvc_cat_id($record[SRVC_CAT_ID]);				$this->setsrvc_description($record[SRVC_DESCRIPTION]);				$this->setsrvc_by_restrnt_or_cust($record[SRVC_BY_RESTRNT_OR_CUST]);				$this->setsrvc_attend_time_limit($record[SRVC_ATTEND_TIME_LIMIT]);				$this->setsrvc_provide_time_limit($record[SRVC_PROVIDE_TIME_LIMIT]);				$this->setsrvc_start_date($record[SRVC_START_DATE]);				$this->setsrvc_end_date($record[SRVC_END_DATE]);				$this->settbl_services_code_active_date($record[TBL_SERVICES_CODE_ACTIVE_DATE]);				$this->settbl_services_code_deactive_date($record[TBL_SERVICES_CODE_DEACTIVE_DATE]);								$this->setsrvc_restaurent($record[SRVC_RESTAURENT]);				return true;			}		}	}	public static function readArray($array = array(),&$result_found=0,$isArray=1) {		global $tbl_services_code_active_condition;		$qry = "SELECT *".RET."FROM ".TBL_SERVICES_CODE.RET;		$and = "WHERE".RET;		if($array[SRVC_ID] != "") {			$qry .= $and.SRVC_ID." = '".$array[SRVC_ID]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_NAME] != "") {			$qry .= $and.SRVC_NAME." = '".$array[SRVC_NAME]."'".RET;			$and = "AND".RET;		}				if($array[SRVC_IMG] != "") {			$qry .= $and.SRVC_IMG." = '".$array[SRVC_IMG]."'".RET;			$and = "AND".RET;		}				if($array[SRVC_CAT_ID] != "") {			$qry .= $and.SRVC_CAT_ID." = '".$array[SRVC_CAT_ID]."'".RET;			$and = "AND".RET;		} 		if($array[SRVC_DESCRIPTION] != "") {			$qry .= $and.SRVC_DESCRIPTION." = '".$array[SRVC_DESCRIPTION]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_BY_RESTRNT_OR_CUST] != "") {			$qry .= $and.SRVC_BY_RESTRNT_OR_CUST." = '".$array[SRVC_BY_RESTRNT_OR_CUST]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_ATTEND_TIME_LIMIT] != "") {			$qry .= $and.SRVC_ATTEND_TIME_LIMIT." = '".$array[SRVC_ATTEND_TIME_LIMIT]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_PROVIDE_TIME_LIMIT] != "") {			$qry .= $and.SRVC_PROVIDE_TIME_LIMIT." = '".$array[SRVC_PROVIDE_TIME_LIMIT]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_START_DATE] != "") {			$qry .= $and.SRVC_START_DATE." = '".$array[SRVC_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_END_DATE] != "") {			$qry .= $and.SRVC_END_DATE." = '".$array[SRVC_END_DATE]."'".RET;			$and = "AND".RET;		}				if($array[SRVC_RESTAURENT] != "") {			$qry .= $and." (".SRVC_RESTAURENT." = '".$array[SRVC_RESTAURENT]."' || ".SRVC_RESTAURENT." = -999)".RET;			$and = "AND".RET;		}		if(is_gt_zero_num($array["isActive"])) {			$qry .= $and.$tbl_services_code_active_condition;;		}		if(is_not_empty($array["offset"]) && is_not_empty($array["limit"])) {			$qry_with_limit  = $qry." LIMIT ".$array["offset"].",".$array["limit"];		}else{			$qry_with_limit  = $qry;		}		$result = mysql_query ($qry_with_limit);		$r1 = mysql_query($qry);		$result_found = mysql_num_rows($r1);		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$isActive= chk_if_record_active($record[TBL_SERVICES_CODE_DEACTIVE_DATE]);				/*//..check deactive date is not set or 0				if((is_not_empty($record[TBL_SERVICES_CODE_DEACTIVE_DATE])==false) || (is_gt_zero_num(strtotime($record[TBL_SERVICES_CODE_DEACTIVE_DATE]))== false)){					$isActive = 1; 				}else{					//..check the deactive date is greater than todays date					if(strtotime($record[TBL_SERVICES_CODE_DEACTIVE_DATE]) > strtotime(date(DATE_FORMAT))){						$isActive = 1;					}				}			*/				if($isArray){					$class_object = array();					$class_object["srvc_id"]=$record[SRVC_ID];					$class_object["srvc_name"]=$record[SRVC_NAME];					$class_object["srvc_img"]=$record[SRVC_IMG];										$class_object["srvc_description"]=$record[SRVC_DESCRIPTION];					$class_object["srvc_by_restrnt_or_cust"]=$record[SRVC_BY_RESTRNT_OR_CUST];					$class_object["srvc_attend_time_limit"]=$record[SRVC_ATTEND_TIME_LIMIT];					$class_object["srvc_provide_time_limit"]=$record[SRVC_PROVIDE_TIME_LIMIT];					$class_object["srvc_start_date"]=$record[SRVC_START_DATE];					$class_object["srvc_end_date"]=$record[SRVC_END_DATE];					$class_object["srvc_restaurent"]=$record[SRVC_RESTAURENT];					$class_object["isActive"]=$isActive;				}else{					$class_object = new tbl_services_code();					$class_object->setsrvc_id($record[SRVC_ID]);					$class_object->setsrvc_name($record[SRVC_NAME]);					$class_object->setsrvc_img($record[SRVC_IMG]);										$class_object->setsrvc_cat_id($record[SRVC_CAT_ID]);					$class_object->setsrvc_description($record[SRVC_DESCRIPTION]);					$class_object->setsrvc_by_restrnt_or_cust($record[SRVC_BY_RESTRNT_OR_CUST]);					$class_object->setsrvc_attend_time_limit($record[SRVC_ATTEND_TIME_LIMIT]);					$class_object->setsrvc_provide_time_limit($record[SRVC_PROVIDE_TIME_LIMIT]);					$class_object->setsrvc_start_date($record[SRVC_START_DATE]);					$class_object->setsrvc_end_date($record[SRVC_END_DATE]);					$class_object->setsrvc_restaurent($record[SRVC_RESTAURENT]);				}				$class_objects[$record[SRVC_ID]] = $class_object;			}		}		return $class_objects;	}//..End readArray	public function insert() {		if($this->getsrvc_id() != '') {			$qry  = "UPDATE ".TBL_SERVICES_CODE.RET."SET".RET."			".SRVC_ID." = '".$this->getsrvc_id()."',".RET."			".SRVC_NAME." = '".$this->getsrvc_name()."',".RET."			".SRVC_IMG." = '".$this->getsrvc_img()."',".RET."			".SRVC_CAT_ID." = '".$this->getsrvc_cat_id()."',".RET."			".SRVC_DESCRIPTION." = '".$this->getsrvc_description()."',".RET."			".SRVC_BY_RESTRNT_OR_CUST." = '".$this->getsrvc_by_restrnt_or_cust()."',".RET."			".SRVC_ATTEND_TIME_LIMIT." = '".$this->getsrvc_attend_time_limit()."',".RET."			".SRVC_PROVIDE_TIME_LIMIT." = '".$this->getsrvc_provide_time_limit()."',".RET."			".SRVC_RESTAURENT." = '".$_SESSION[SES_RESTAURANT]."',".RET."			".SRVC_START_DATE." = '".$this->getsrvc_start_date()."',".RET."			".SRVC_END_DATE." = '".$this->getsrvc_end_date()."'".RET.			"WHERE ".SRVC_ID." = ".$this->getsrvc_id().RET;			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".TBL_SERVICES_CODE." (".RET.			"".SRVC_NAME.",".SRVC_IMG.",".SRVC_CAT_ID.", ".SRVC_DESCRIPTION.", ".SRVC_BY_RESTRNT_OR_CUST.", ".SRVC_ATTEND_TIME_LIMIT.", ".SRVC_PROVIDE_TIME_LIMIT.", ".SRVC_START_DATE.", ".SRVC_END_DATE.", ".SRVC_RESTAURENT.RET.				") VALUES (".RET.			"'".$this->getsrvc_name()."',".RET.			"'".$this->getsrvc_img()."',".RET.			"'".$this->getsrvc_cat_id()."',".RET.			"'".$this->getsrvc_description()."',".RET.			"'".$this->getsrvc_by_restrnt_or_cust()."',".RET.			"'".$this->getsrvc_attend_time_limit()."',".RET.			"'".$this->getsrvc_provide_time_limit()."',".RET.			"'".$this->getsrvc_start_date()."',".RET.			"'".$this->getsrvc_end_date()."',".RET.			"'".$_SESSION[SES_RESTAURANT]."'".RET.			")".RET;			$res = mysql_query($qry);			$this->setsrvc_id(mysql_insert_id());		}	}//..End Insert	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".TBL_SERVICES_CODE.RET;		$and = "WHERE".RET;		if($array[SRVC_ID] != "") {			//$qry .= $and.SRVC_ID." = '".$array[SRVC_ID]."'".RET;			//..change maded for multiple delete of the items			$qry .= $and.SRVC_ID." IN (".$array[SRVC_ID].")".RET;			$and = "AND".RET;		}		if($array[SRVC_NAME] != "") {			$qry .= $and.SRVC_NAME." = '".$array[SRVC_NAME]."'".RET;			$and = "AND".RET;		}				if($array[SRVC_IMG] != "") {			$qry .= $and.SRVC_IMG." = '".$array[SRVC_IMG]."'".RET;			$and = "AND".RET;		}				if($array[SRVC_CAT_ID] != "") {			$qry .= $and.SRVC_CAT_ID." = '".$array[SRVC_CAT_ID]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_DESCRIPTION] != "") {			$qry .= $and.SRVC_DESCRIPTION." = '".$array[SRVC_DESCRIPTION]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_BY_RESTRNT_OR_CUST] != "") {			$qry .= $and.SRVC_BY_RESTRNT_OR_CUST." = '".$array[SRVC_BY_RESTRNT_OR_CUST]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_ATTEND_TIME_LIMIT] != "") {			$qry .= $and.SRVC_ATTEND_TIME_LIMIT." = '".$array[SRVC_ATTEND_TIME_LIMIT]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_PROVIDE_TIME_LIMIT] != "") {			$qry .= $and.SRVC_PROVIDE_TIME_LIMIT." = '".$array[SRVC_PROVIDE_TIME_LIMIT]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_START_DATE] != "") {			$qry .= $and.SRVC_START_DATE." = '".$array[SRVC_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_END_DATE] != "") {			$qry .= $and.SRVC_END_DATE." = '".$array[SRVC_END_DATE]."'".RET;			$and = "AND".RET;		}				if($array[SRVC_RESTAURENT] != "") {			$qry .= $and.SRVC_RESTAURENT." = '".$array[SRVC_RESTAURENT]."'".RET;			$and = "AND".RET;		}		  //.. action after the successful delete of service code		if(mysql_query($qry)){			if(is_not_empty($array[SRVC_ID])){				//.. delete the service stages of that service code				tbl_service_stage::delete(array(SRVC_STG_SERVICE_ID=>$array[SRVC_ID]));		 	//.. delete the service stages of that service code				tbl_services_details::delete(array(SRVC_DTL_SERVICE_CODE=>$array[SRVC_ID]));			}  			return true;		} 		return false;	}//..End Delete	public function isAlreadyThere($srvc_name,$srvc_cat_id ,$srvc_description ,$srvc_by_restrnt_or_cust ,$srvc_attend_time_limit ,$srvc_provide_time_limit ,$srvc_start_date ,$srvc_end_date) {		$unique_arr = array();			//$unique_arr[SRVC_ID]=$srvc_id;			$unique_arr[SRVC_RESTAURENT]=$_SESSION[SES_RESTAURANT];			$unique_arr[SRVC_NAME]=$srvc_name;						//$unique_arr[SRVC_CAT_ID]=$srvc_cat_id;			//$unique_arr[SRVC_DESCRIPTION]=$srvc_description;			//$unique_arr[SRVC_BY_RESTRNT_OR_CUST]=$srvc_by_restrnt_or_cust;			//$unique_arr[SRVC_ATTEND_TIME_LIMIT]=$srvc_attend_time_limit;			//$unique_arr[SRVC_PROVIDE_TIME_LIMIT]=$srvc_provide_time_limit;			//$unique_arr[SRVC_START_DATE]=$srvc_start_date;			//$unique_arr[SRVC_END_DATE]=$srvc_end_date;		if(is_not_empty($unique_arr)){			return $this->readObject($unique_arr);		}		return false;	}//..isAlreadyThere	public function create($srvc_name,$srvc_img,$srvc_cat_id ,$srvc_description ,$srvc_by_restrnt_or_cust ,$srvc_attend_time_limit ,$srvc_provide_time_limit ,$srvc_start_date ,$srvc_end_date) {		if(is_not_empty($srvc_name)){			if($this->isAlreadyThere($srvc_name,$srvc_cat_id ,$srvc_description ,$srvc_by_restrnt_or_cust ,$srvc_attend_time_limit ,$srvc_provide_time_limit ,$srvc_start_date ,$srvc_end_date)){				return -1;			}else{				$this->setsrvc_id("");				$this->setsrvc_name($srvc_name);				$this->setsrvc_img($srvc_img);				$this->setsrvc_cat_id($srvc_cat_id);				$this->setsrvc_description($srvc_description);				$this->setsrvc_by_restrnt_or_cust($srvc_by_restrnt_or_cust);				$this->setsrvc_attend_time_limit($srvc_attend_time_limit);				$this->setsrvc_provide_time_limit($srvc_provide_time_limit);				$this->setsrvc_start_date(date(DATE_FORMAT));				//$this->setsrvc_end_date($srvc_end_date);				$this->insert();				//..on new service request create we need to add one satge as initiated				//..get last insert service ID				$srvc_stg_service_id=$this->getsrvc_id();				tbl_service_stage::createDefaultStages($srvc_stg_service_id);								//changed @20Aug2013#1				/*$srvc_stg_name='Initiated';				$srvc_stg_description='Service Initiated by customer';				$srvc_stg_thresh_hold_time=0;				$srvc_stg_sort_order=1;				$srvc_stg_start_time=Date(DATE_FORMAT);				$srvc_stg_end_time=NULL;				$objtbl_service_stage=new tbl_service_stage();				$objtbl_service_stage->create($srvc_stg_service_id ,$srvc_stg_name ,$srvc_stg_description ,$srvc_stg_thresh_hold_time ,$srvc_stg_sort_order ,$srvc_stg_start_time ,$srvc_stg_end_time);				unset($objtbl_service_stage);*/				return $srvc_stg_service_id;			}		}	}//..create	public function update($srvc_id, $srvc_name,$srvc_img, $srvc_cat_id, $srvc_description, $srvc_by_restrnt_or_cust, $srvc_attend_time_limit, $srvc_provide_time_limit, $srvc_start_date, $srvc_end_date) {		if(is_gt_zero_num($srvc_id)){			if ($this->readObject(array(SRVC_ID=>$srvc_id))){				$this->setsrvc_name($srvc_name);				if(is_not_empty($srvc_img)){					$this->setsrvc_img($srvc_img);				}								$this->setsrvc_cat_id($srvc_cat_id);				$this->setsrvc_description($srvc_description); 				$this->setsrvc_by_restrnt_or_cust($srvc_by_restrnt_or_cust);				$this->setsrvc_attend_time_limit($srvc_attend_time_limit);				$this->setsrvc_provide_time_limit($srvc_provide_time_limit);				//$this->setsrvc_start_date($srvc_start_date);				//$this->setsrvc_end_date($srvc_end_date);				//echo "srvc_img=$srvc_img";				$this->insert();				return 1;			}		}		return 0;	}//..update	public function activate($srvc_id){		if(is_not_empty($srvc_id)){			//if ($this->readObject(array(SRVC_ID=>$srvc_id))){				$qry  = "UPDATE ".TBL_SERVICES_CODE.RET."SET".RET."			".TBL_SERVICES_CODE_DEACTIVE_DATE." = '".date(EMPTY_DATE_FORMAT)."' WHERE ".SRVC_ID." IN ({$srvc_id})";			//echo $qry; 				$res = mysql_query($qry);				if($res){					return 1;				}			//}		}		return 0;	}//..end activate	public function deactivate($srvc_id){		if(is_not_empty($srvc_id)){			//if ($this->readObject(array(SRVC_ID=>$srvc_id))){				$qry  = "UPDATE ".TBL_SERVICES_CODE.RET."SET".RET."				".TBL_SERVICES_CODE_DEACTIVE_DATE." = '".date(DATE_FORMAT)."' WHERE ".SRVC_ID." IN ({$srvc_id})";				//echo $qry; 				$res = mysql_query($qry);				if($res){					return 1;				}			//}		}		return 0;	}//..end deactivate	public static function GetInfo($srvc_id) {		$info = array();		if($srvc_id != ""){			$obj = new tbl_services_code();			if($obj->readObject(array("srvc_id"=>$srvc_id))){				$info["srvc_id"]=$obj->getsrvc_id();				$info["srvc_name"]=$obj->getsrvc_name();				$info["srvc_img"]=$obj->getsrvc_img();								$info["srvc_cat_id"]=$obj->getsrvc_cat_id();				$info["srvc_description"]=$obj->getsrvc_description();				$info["srvc_by_restrnt_or_cust"]=$obj->getsrvc_by_restrnt_or_cust();				$info["srvc_attend_time_limit"]=$obj->getsrvc_attend_time_limit();				$info["srvc_provide_time_limit"]=$obj->getsrvc_provide_time_limit();				$info["srvc_start_date"]=$obj->getsrvc_start_date();				$info["srvc_end_date"]=$obj->getsrvc_end_date();								$info["srvc_restaurent"]=$obj->getsrvc_restaurent();								$info["isActive"] = chk_if_record_active($info["srvc_end_date"]);												 				//..check deactive date is not set or 0				/*if(is_not_empty($obj->gettbl_services_code_deactive_date())==false  || strtotime($obj->gettbl_services_code_deactive_date()) == 0){					$info["isActive"] = 1;				}else{					//..check the deactive date is greater than todays date					if(strtotime($obj->gettbl_services_code_deactive_date()) >= strtotime(date("Y-m-d h:i:s"))){						$info["isActive"] = 1;					}				}*/								 $info['id'] =$obj->getsrvc_id(); 				 $info['name']=$obj->getsrvc_name();				 $info['image']=$obj->getsrvc_img();				 				 $info['description']=$obj->getsrvc_description();				 $info['restrnt_or_cust']=$obj->getsrvc_by_restrnt_or_cust();				 if($obj->getsrvc_by_restrnt_or_cust() == "CUST"){				 	$info['by'] = $_lang['services_code']['label']["srvc_by_cust"];				 }else{				 	$info['by'] = $info['by'] = $_lang['services_code']['label']["srvc_by_restrnt"];				 }				 				 $info['start_date']=$obj->getsrvc_start_date();				 $info['end_date']= $obj->getsrvc_end_date();				 $info["restaurent"]=$obj->getsrvc_restaurent();				 $info['friendly_start_date']=friendly_time(strtotime($obj->getsrvc_start_date()));				 $info['friendly_end_date']=friendly_time(strtotime($obj->getsrvc_end_date()));			}		 unset($obj);		return $info;		}	}//..End GetInfo		public function GetAll($url="",$offset=0,$limit=10){	 	$info = array();  	    $results_count =0;		$array = array("offset"=>$offset,"limit"=>$limit); 		$services = $this->readArray( $array, $results_count,1);   		if(is_gt_zero_num($results_count)){            $info['pagination'] = biz_pagination(		   							array(										"offset_word" =>"offset", 										"url"=>$url,										"limit"=>$limit,										"offset"=>$offset,										"count"=>$results_count 										 									)								); 		   $info['services'] = $services; 		}		 		$info['result_count'] = $results_count;	return $info;	} 		public function GetActiveServices(){		global $tbl_services_code_active_condition;		$arr = array();		$res = mysql_query("SELECT srvc_id,srvc_name FROM ".TBL_SERVICES_CODE." WHERE (".SRVC_RESTAURENT."=".$_SESSION[SES_RESTAURANT]." OR ".SRVC_RESTAURENT."=".STS_DFLT_RESTAURANT.") AND ".$tbl_services_code_active_condition);		//$res = mysql_query("SELECT srvc_id,srvc_name FROM ".TBL_SERVICES_CODE." WHERE ".$tbl_services_code_active_condition);	 		if($res){			while($row=mysql_fetch_assoc($res)){				$arr[$row['srvc_id']] = $row['srvc_name'];			}		}		return $arr;	}		public static function deletePrevSrvcImg($srvc_id,$save_path="") {		if(is_gt_zero_num($srvc_id)){			$tbl_services_code = new tbl_services_code();			if ($tbl_services_code->readObject(array(MENU_ID=>$srvc_id))){							$srvc_img=$tbl_services_code->getsrvc_img();				if(is_not_empty($srvc_img))					unlink($save_path.$srvc_img);			}		}			}//..update 		}//..End tbl_services_code?>