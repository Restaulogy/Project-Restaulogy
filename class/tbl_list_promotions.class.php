<?php/**********************************************************************tbl_list_promotions.class.phpGenerated by STRUCTY 2013.03.28 11:19:49.Copyright 2011 Structy, Frdric Aebi. All rights reserved.**********************************************************************/define("TBL_LIST_PROMOTIONS", "tbl_list_promotions"); define('ID', 'id'); define('LIST_ID', 'list_id'); define('TITLE', 'title'); define('PDF', 'pdf'); define('COMMENTS', 'comments'); define('START_DATE', 'start_date'); define('END_DATE', 'end_date'); define('STATES', 'states'); define('METRO_AREA', 'metro_area'); define('PROMOTION_ID', 'promotion_id'); define('IMG_EXT', 'img_ext'); define('VIEWS_COUNT', 'views_count'); define('IS_PDF_UPLOADED', 'is_pdf_uploaded'); define('CUPON_TYPE', 'cupon_type'); define('ALLOWED_CUPONS', 'allowed_cupons'); define('REDIMED_CUPONS', 'redimed_cupons'); define("TBL_LIST_PROMOTIONS_ACTIVE_DATE", "start_date");define("TBL_LIST_PROMOTIONS_DEACTIVE_DATE", "end_date");$tbl_list_promotions_active_condition= " (".TBL_LIST_PROMOTIONS_DEACTIVE_DATE." is NULL OR ".TBL_LIST_PROMOTIONS_DEACTIVE_DATE." = 0 OR ".TBL_LIST_PROMOTIONS_DEACTIVE_DATE." > CURDATE( )) ";class tbl_list_promotions {	private $id;	private $list_id;	private $title;	private $pdf;	private $comments;	private $start_date;	private $end_date;	private $states;	private $metro_area;	private $promotion_id;	private $img_ext;	private $views_count;	private $is_pdf_uploaded;	private $cupon_type;	private $allowed_cupons;	private $redimed_cupons;	private $tbl_list_promotions_active_date;	private $tbl_list_promotions_deactive_date;	public function setid($pArg="0") {$this->id=$pArg;}	public function setlist_id($pArg="0") {$this->list_id=$pArg;}	public function settitle($pArg="0") {$this->title=$pArg;}	public function setpdf($pArg="0") {$this->pdf=$pArg;}	public function setcomments($pArg="0") {$this->comments=$pArg;}	public function setstart_date($pArg="0") {$this->start_date=$pArg;}	public function setend_date($pArg="0") {$this->end_date=$pArg;}	public function setstates($pArg="0") {$this->states=$pArg;}	public function setmetro_area($pArg="0") {$this->metro_area=$pArg;}	public function setpromotion_id($pArg="0") {$this->promotion_id=$pArg;}	public function setimg_ext($pArg="0") {$this->img_ext=$pArg;}	public function setviews_count($pArg="0") {$this->views_count=$pArg;}	public function setis_pdf_uploaded($pArg="0") {$this->is_pdf_uploaded=$pArg;}	public function setcupon_type($pArg="0") {$this->cupon_type=$pArg;}	public function setallowed_cupons($pArg="0") {$this->allowed_cupons=$pArg;}	public function setredimed_cupons($pArg="0") {$this->redimed_cupons=$pArg;}	public function settbl_list_promotions_active_date($pArg="0") {$this->tbl_list_promotions_active_date=$pArg;}	public function settbl_list_promotions_deactive_date($pArg="0") {$this->tbl_list_promotions_deactive_date=$pArg;}	public function getid() {return $this->id;}	public function getlist_id() {return $this->list_id;}	public function gettitle() {return $this->title;}	public function getpdf() {return $this->pdf;}	public function getcomments() {return $this->comments;}	public function getstart_date() {return $this->start_date;}	public function getend_date() {return $this->end_date;}	public function getstates() {return $this->states;}	public function getmetro_area() {return $this->metro_area;}	public function getpromotion_id() {return $this->promotion_id;}	public function getimg_ext() {return $this->img_ext;}	public function getviews_count() {return $this->views_count;}	public function getis_pdf_uploaded() {return $this->is_pdf_uploaded;}	public function getcupon_type() {return $this->cupon_type;}	public function getallowed_cupons() {return $this->allowed_cupons;}	public function getredimed_cupons() {return $this->redimed_cupons;}	public function gettbl_list_promotions_active_date($pArg="0") {return $this->tbl_list_promotions_active_date;}	public function gettbl_list_promotions_deactive_date($pArg="0") {return $this->tbl_list_promotions_deactive_date;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_LIST_PROMOTIONS.RET;		$and = "WHERE".RET;		if($array[ID] != "") {			$qry .= $and.ID." = '".$array[ID]."'".RET;			$and = "AND".RET;		}		if($array[LIST_ID] != "") {			$qry .= $and.LIST_ID." = '".$array[LIST_ID]."'".RET;			$and = "AND".RET;		}		if($array[TITLE] != "") {			$qry .= $and.TITLE." = '".$array[TITLE]."'".RET;			$and = "AND".RET;		}		if($array[PDF] != "") {			$qry .= $and.PDF." = '".$array[PDF]."'".RET;			$and = "AND".RET;		}		if($array[COMMENTS] != "") {			$qry .= $and.COMMENTS." = '".$array[COMMENTS]."'".RET;			$and = "AND".RET;		}		if($array[START_DATE] != "") {			$qry .= $and.START_DATE." = '".$array[START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[END_DATE] != "") {			$qry .= $and.END_DATE." = '".$array[END_DATE]."'".RET;			$and = "AND".RET;		}		if($array[STATES] != "") {			$qry .= $and.STATES." = '".$array[STATES]."'".RET;			$and = "AND".RET;		}		if($array[METRO_AREA] != "") {			$qry .= $and.METRO_AREA." = '".$array[METRO_AREA]."'".RET;			$and = "AND".RET;		}		if($array[PROMOTION_ID] != "") {			$qry .= $and.PROMOTION_ID." = '".$array[PROMOTION_ID]."'".RET;			$and = "AND".RET;		}		if($array[IMG_EXT] != "") {			$qry .= $and.IMG_EXT." = '".$array[IMG_EXT]."'".RET;			$and = "AND".RET;		}		if($array[VIEWS_COUNT] != "") {			$qry .= $and.VIEWS_COUNT." = '".$array[VIEWS_COUNT]."'".RET;			$and = "AND".RET;		}		if($array[IS_PDF_UPLOADED] != "") {			$qry .= $and.IS_PDF_UPLOADED." = '".$array[IS_PDF_UPLOADED]."'".RET;			$and = "AND".RET;		}		if($array[CUPON_TYPE] != "") {			$qry .= $and.CUPON_TYPE." = '".$array[CUPON_TYPE]."'".RET;			$and = "AND".RET;		}		if($array[ALLOWED_CUPONS] != "") {			$qry .= $and.ALLOWED_CUPONS." = '".$array[ALLOWED_CUPONS]."'".RET;			$and = "AND".RET;		}		if($array[REDIMED_CUPONS] != "") {			$qry .= $and.REDIMED_CUPONS." = '".$array[REDIMED_CUPONS]."'".RET;			$and = "AND".RET;		}	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setid($record[ID]);				$this->setlist_id($record[LIST_ID]);				$this->settitle($record[TITLE]);				$this->setpdf($record[PDF]);				$this->setcomments($record[COMMENTS]);				$this->setstart_date($record[START_DATE]);				$this->setend_date($record[END_DATE]);				$this->setstates($record[STATES]);				$this->setmetro_area($record[METRO_AREA]);				$this->setpromotion_id($record[PROMOTION_ID]);				$this->setimg_ext($record[IMG_EXT]);				$this->setviews_count($record[VIEWS_COUNT]);				$this->setis_pdf_uploaded($record[IS_PDF_UPLOADED]);				$this->setcupon_type($record[CUPON_TYPE]);				$this->setallowed_cupons($record[ALLOWED_CUPONS]);				$this->setredimed_cupons($record[REDIMED_CUPONS]);				$this->settbl_list_promotions_active_date($record[TBL_LIST_PROMOTIONS_ACTIVE_DATE]);				$this->settbl_list_promotions_deactive_date($record[TBL_LIST_PROMOTIONS_DEACTIVE_DATE]);				return true;			}		}	}	public static function readArray($array = array(),&$result_found=0,$isArray=1) {		global $tbl_list_promotions_active_condition;		$qry = "SELECT *".RET."FROM ".TBL_LIST_PROMOTIONS.RET;		$and = "WHERE".RET;		if($array[ID] != "") {			$qry .= $and.ID." = '".$array[ID]."'".RET;			$and = "AND".RET;		}		if($array[LIST_ID] != "") {			$qry .= $and.LIST_ID." = '".$array[LIST_ID]."'".RET;			$and = "AND".RET;		}		if($array[TITLE] != "") {			$qry .= $and.TITLE." = '".$array[TITLE]."'".RET;			$and = "AND".RET;		}		if($array[PDF] != "") {			$qry .= $and.PDF." = '".$array[PDF]."'".RET;			$and = "AND".RET;		}		if($array[COMMENTS] != "") {			$qry .= $and.COMMENTS." = '".$array[COMMENTS]."'".RET;			$and = "AND".RET;		}		if($array[START_DATE] != "") {			$qry .= $and.START_DATE." = '".$array[START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[END_DATE] != "") {			$qry .= $and.END_DATE." = '".$array[END_DATE]."'".RET;			$and = "AND".RET;		}		if($array[STATES] != "") {			$qry .= $and.STATES." = '".$array[STATES]."'".RET;			$and = "AND".RET;		}		if($array[METRO_AREA] != "") {			$qry .= $and.METRO_AREA." = '".$array[METRO_AREA]."'".RET;			$and = "AND".RET;		}		if($array[PROMOTION_ID] != "") {			$qry .= $and.PROMOTION_ID." = '".$array[PROMOTION_ID]."'".RET;			$and = "AND".RET;		}		if($array[IMG_EXT] != "") {			$qry .= $and.IMG_EXT." = '".$array[IMG_EXT]."'".RET;			$and = "AND".RET;		}		if($array[VIEWS_COUNT] != "") {			$qry .= $and.VIEWS_COUNT." = '".$array[VIEWS_COUNT]."'".RET;			$and = "AND".RET;		}		if($array[IS_PDF_UPLOADED] != "") {			$qry .= $and.IS_PDF_UPLOADED." = '".$array[IS_PDF_UPLOADED]."'".RET;			$and = "AND".RET;		}		if($array[CUPON_TYPE] != "") {			$qry .= $and.CUPON_TYPE." = '".$array[CUPON_TYPE]."'".RET;			$and = "AND".RET;		}		if($array[ALLOWED_CUPONS] != "") {			$qry .= $and.ALLOWED_CUPONS." = '".$array[ALLOWED_CUPONS]."'".RET;			$and = "AND".RET;		}		if($array[REDIMED_CUPONS] != "") {			$qry .= $and.REDIMED_CUPONS." = '".$array[REDIMED_CUPONS]."'".RET;			$and = "AND".RET;		}		if(is_gt_zero_num($array["isActive"])) {			$qry .= $and.$tbl_list_promotions_active_condition;;			$and = "AND".RET;		}		if(is_not_empty($array[OFFSET_TITLE]) && is_not_empty($array[LIMIT_TITLE])) {			$qry_with_limit  = $qry." LIMIT ".$array[OFFSET_TITLE].",".$array[LIMIT_TITLE];		}else{			$qry_with_limit  = $qry;		}		$result = mysql_query ($qry_with_limit);		$r1 = mysql_query($qry);		$result_found = mysql_num_rows($r1);		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$isActive= 0;				//..check deactive date is not set or 0				if((is_not_empty($record[TBL_LIST_PROMOTIONS_DEACTIVE_DATE])==false) || (is_gt_zero_num(strtotime($record[TBL_LIST_PROMOTIONS_DEACTIVE_DATE]))== false)){					$isActive = 1; 				}else{					//..check the deactive date is greater than todays date					if(strtotime($record[TBL_LIST_PROMOTIONS_DEACTIVE_DATE]) >= strtotime(date(DATE_FORMAT))){						$isActive = 1;					}				}				if($isArray){					$class_object = array();					$class_object["id"]=$record[ID];					$class_object["list_id"]=$record[LIST_ID];					$class_object["title"]=$record[TITLE];					$class_object["pdf"]=$record[PDF];					$class_object["comments"]=$record[COMMENTS];					$class_object["start_date"]=$record[START_DATE];					$class_object["end_date"]=$record[END_DATE];					$class_object["states"]=$record[STATES];					$class_object["metro_area"]=$record[METRO_AREA];					$class_object["promotion_id"]=$record[PROMOTION_ID];					$class_object["img_ext"]=$record[IMG_EXT];					$class_object["views_count"]=$record[VIEWS_COUNT];					$class_object["is_pdf_uploaded"]=$record[IS_PDF_UPLOADED];					$class_object["cupon_type"]=$record[CUPON_TYPE];					$class_object["allowed_cupons"]=$record[ALLOWED_CUPONS];					$class_object["redimed_cupons"]=$record[REDIMED_CUPONS];					$class_object["isActive"]=$isActive;				}else{					$class_object = new tbl_list_promotions();					$class_object->setid($record[ID]);					$class_object->setlist_id($record[LIST_ID]);					$class_object->settitle($record[TITLE]);					$class_object->setpdf($record[PDF]);					$class_object->setcomments($record[COMMENTS]);					$class_object->setstart_date($record[START_DATE]);					$class_object->setend_date($record[END_DATE]);					$class_object->setstates($record[STATES]);					$class_object->setmetro_area($record[METRO_AREA]);					$class_object->setpromotion_id($record[PROMOTION_ID]);					$class_object->setimg_ext($record[IMG_EXT]);					$class_object->setviews_count($record[VIEWS_COUNT]);					$class_object->setis_pdf_uploaded($record[IS_PDF_UPLOADED]);					$class_object->setcupon_type($record[CUPON_TYPE]);					$class_object->setallowed_cupons($record[ALLOWED_CUPONS]);					$class_object->setredimed_cupons($record[REDIMED_CUPONS]);				}				$class_objects[$record[ID]] = $class_object;			}		}		return $class_objects;	}//..End readArray	public function insert() {		if($this->getid() != '') {			$qry  = "UPDATE ".TBL_LIST_PROMOTIONS.RET."SET".RET."			".ID." = '".$this->getid()."',".RET."			".LIST_ID." = '".$this->getlist_id()."',".RET."			".TITLE." = '".$this->gettitle()."',".RET."			".PDF." = '".$this->getpdf()."',".RET."			".COMMENTS." = '".$this->getcomments()."',".RET."			".START_DATE." = '".$this->getstart_date()."',".RET."			".END_DATE." = '".$this->getend_date()."',".RET."			".STATES." = '".$this->getstates()."',".RET."			".METRO_AREA." = '".$this->getmetro_area()."',".RET."			".PROMOTION_ID." = '".$this->getpromotion_id()."',".RET."			".IMG_EXT." = '".$this->getimg_ext()."',".RET."			".VIEWS_COUNT." = '".$this->getviews_count()."',".RET."			".IS_PDF_UPLOADED." = '".$this->getis_pdf_uploaded()."',".RET."			".CUPON_TYPE." = '".$this->getcupon_type()."',".RET."			".ALLOWED_CUPONS." = '".$this->getallowed_cupons()."',".RET."			".REDIMED_CUPONS." = '".$this->getredimed_cupons()."'".RET.			"WHERE ".ID." = ".$this->getid().RET;			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".TBL_LIST_PROMOTIONS." (".RET.			"".LIST_ID.", ".TITLE.", ".PDF.", ".COMMENTS.", ".START_DATE.", ".END_DATE.", ".STATES.", ".METRO_AREA.", ".PROMOTION_ID.", ".IMG_EXT.", ".VIEWS_COUNT.", ".IS_PDF_UPLOADED.", ".CUPON_TYPE.", ".ALLOWED_CUPONS.", ".REDIMED_CUPONS.RET.				") VALUES (".RET.			"'".$this->getlist_id()."',".RET.			"'".$this->gettitle()."',".RET.			"'".$this->getpdf()."',".RET.			"'".$this->getcomments()."',".RET.			"'".$this->getstart_date()."',".RET.			"'".$this->getend_date()."',".RET.			"'".$this->getstates()."',".RET.			"'".$this->getmetro_area()."',".RET.			"'".$this->getpromotion_id()."',".RET.			"'".$this->getimg_ext()."',".RET.			"'".$this->getviews_count()."',".RET.			"'".$this->getis_pdf_uploaded()."',".RET.			"'".$this->getcupon_type()."',".RET.			"'".$this->getallowed_cupons()."',".RET.			"'".$this->getredimed_cupons()."'".RET.			")".RET;			$res = mysql_query($qry);			$this->setid(mysql_insert_id());		}	}//..End Insert	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".TBL_LIST_PROMOTIONS.RET;		$and = "WHERE".RET;		if($array[ID] != "") {			$qry .= $and.ID." = '".$array[ID]."'".RET;			$and = "AND".RET;		}		if($array[LIST_ID] != "") {			$qry .= $and.LIST_ID." = '".$array[LIST_ID]."'".RET;			$and = "AND".RET;		}		if($array[TITLE] != "") {			$qry .= $and.TITLE." = '".$array[TITLE]."'".RET;			$and = "AND".RET;		}		if($array[PDF] != "") {			$qry .= $and.PDF." = '".$array[PDF]."'".RET;			$and = "AND".RET;		}		if($array[COMMENTS] != "") {			$qry .= $and.COMMENTS." = '".$array[COMMENTS]."'".RET;			$and = "AND".RET;		}		if($array[START_DATE] != "") {			$qry .= $and.START_DATE." = '".$array[START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[END_DATE] != "") {			$qry .= $and.END_DATE." = '".$array[END_DATE]."'".RET;			$and = "AND".RET;		}		if($array[STATES] != "") {			$qry .= $and.STATES." = '".$array[STATES]."'".RET;			$and = "AND".RET;		}		if($array[METRO_AREA] != "") {			$qry .= $and.METRO_AREA." = '".$array[METRO_AREA]."'".RET;			$and = "AND".RET;		}		if($array[PROMOTION_ID] != "") {			$qry .= $and.PROMOTION_ID." = '".$array[PROMOTION_ID]."'".RET;			$and = "AND".RET;		}		if($array[IMG_EXT] != "") {			$qry .= $and.IMG_EXT." = '".$array[IMG_EXT]."'".RET;			$and = "AND".RET;		}		if($array[VIEWS_COUNT] != "") {			$qry .= $and.VIEWS_COUNT." = '".$array[VIEWS_COUNT]."'".RET;			$and = "AND".RET;		}		if($array[IS_PDF_UPLOADED] != "") {			$qry .= $and.IS_PDF_UPLOADED." = '".$array[IS_PDF_UPLOADED]."'".RET;			$and = "AND".RET;		}		if($array[CUPON_TYPE] != "") {			$qry .= $and.CUPON_TYPE." = '".$array[CUPON_TYPE]."'".RET;			$and = "AND".RET;		}		if($array[ALLOWED_CUPONS] != "") {			$qry .= $and.ALLOWED_CUPONS." = '".$array[ALLOWED_CUPONS]."'".RET;			$and = "AND".RET;		}		if($array[REDIMED_CUPONS] != "") {			$qry .= $and.REDIMED_CUPONS." = '".$array[REDIMED_CUPONS]."'".RET;			$and = "AND".RET;		}		$res = mysql_query($qry);		if($res){			return OPERATION_SUCCESS;		};		return OPERATION_FAIL;	}//..End Delete	public function isAlreadyThere($list_id ,$title ,$pdf ,$comments ,$start_date ,$end_date ,$states ,$metro_area ,$promotion_id ,$img_ext ,$views_count ,$is_pdf_uploaded ,$cupon_type ,$allowed_cupons ,$redimed_cupons) {		$unique_arr = array();			//$unique_arr[ID]=$id;			//$unique_arr[LIST_ID]=$list_id;			//$unique_arr[TITLE]=$title;			//$unique_arr[PDF]=$pdf;			//$unique_arr[COMMENTS]=$comments;			//$unique_arr[START_DATE]=$start_date;			//$unique_arr[END_DATE]=$end_date;			//$unique_arr[STATES]=$states;			//$unique_arr[METRO_AREA]=$metro_area;			//$unique_arr[PROMOTION_ID]=$promotion_id;			//$unique_arr[IMG_EXT]=$img_ext;			//$unique_arr[VIEWS_COUNT]=$views_count;			//$unique_arr[IS_PDF_UPLOADED]=$is_pdf_uploaded;			//$unique_arr[CUPON_TYPE]=$cupon_type;			//$unique_arr[ALLOWED_CUPONS]=$allowed_cupons;			//$unique_arr[REDIMED_CUPONS]=$redimed_cupons;		if(is_not_empty($unique_arr)){			return $this->readObject($unique_arr);		}		return false;	}//..isAlreadyThere	public function create($list_id ,$title ,$pdf ,$comments ,$start_date ,$end_date ,$states ,$metro_area ,$promotion_id ,$img_ext ,$views_count ,$is_pdf_uploaded ,$cupon_type ,$allowed_cupons ,$redimed_cupons) {		if(is_not_empty($list_id)){			if($this->isAlreadyThere($list_id ,$title ,$pdf ,$comments ,$start_date ,$end_date ,$states ,$metro_area ,$promotion_id ,$img_ext ,$views_count ,$is_pdf_uploaded ,$cupon_type ,$allowed_cupons ,$redimed_cupons)){				return OPERATION_DUPLICATE;			}else{				$this->setid("");				$this->setlist_id($list_id);				$this->settitle($title);				$this->setpdf($pdf);				$this->setcomments($comments);				$this->setstart_date($start_date);				$this->setend_date($end_date);				$this->setstates($states);				$this->setmetro_area($metro_area);				$this->setpromotion_id($promotion_id);				$this->setimg_ext($img_ext);				$this->setviews_count($views_count);				$this->setis_pdf_uploaded($is_pdf_uploaded);				$this->setcupon_type($cupon_type);				$this->setallowed_cupons($allowed_cupons);				$this->setredimed_cupons($redimed_cupons);				$this->insert();				return $this->getid();			}		}		return OPERATION_FAIL;	}//..create	public function update($id, $list_id, $title, $pdf, $comments, $start_date, $end_date, $states, $metro_area, $promotion_id, $img_ext, $views_count, $is_pdf_uploaded, $cupon_type, $allowed_cupons, $redimed_cupons) {		if(is_gt_zero_num($id)){			if ($this->readObject(array(ID=>$id))){				$this->setlist_id($list_id);				$this->settitle($title);				$this->setpdf($pdf);				$this->setcomments($comments);				$this->setstart_date($start_date);				$this->setend_date($end_date);				$this->setstates($states);				$this->setmetro_area($metro_area);				$this->setpromotion_id($promotion_id);				$this->setimg_ext($img_ext);				$this->setviews_count($views_count);				$this->setis_pdf_uploaded($is_pdf_uploaded);				$this->setcupon_type($cupon_type);				$this->setallowed_cupons($allowed_cupons);				$this->setredimed_cupons($redimed_cupons);				$this->insert();				return OPERATION_SUCCESS;			}		}		return OPERATION_FAIL;	}//..update	public function activate($id){		if(is_gt_zero_num($id)){			if ($this->readObject(array(ID=>$id))){				$qry  = "UPDATE ".TBL_LIST_PROMOTIONS.RET."SET".RET."			".TBL_LIST_PROMOTIONS_DEACTIVE_DATE." = '".date(EMPTY_DATE_FORMAT)."' WHERE ".ID."={$id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end activate	public function deactivate($id){		if(is_gt_zero_num($id)){			if ($this->readObject(array(ID=>$id))){				$qry  = "UPDATE ".TBL_LIST_PROMOTIONS.RET."SET".RET."			".TBL_LIST_PROMOTIONS_DEACTIVE_DATE." = '".date(DATE_FORMAT)."' WHERE ".ID."={$id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end deactivate	public static function GetInfo($id) {		$info = array();		if($id != ""){			$obj_tbl_list_promotions = new tbl_list_promotions();			if($obj_tbl_list_promotions->readObject(array("id"=>$id))){				$info["id"]=$obj_tbl_list_promotions->getid();				$info["list_id"]=$obj_tbl_list_promotions->getlist_id();				$info["title"]=$obj_tbl_list_promotions->gettitle();				$info["pdf"]=$obj_tbl_list_promotions->getpdf();				$info["comments"]=$obj_tbl_list_promotions->getcomments();				$info["start_date"]=$obj_tbl_list_promotions->getstart_date();				$info["end_date"]=$obj_tbl_list_promotions->getend_date();				$info["states"]=$obj_tbl_list_promotions->getstates();				$info["metro_area"]=$obj_tbl_list_promotions->getmetro_area();				$info["promotion_id"]=$obj_tbl_list_promotions->getpromotion_id();				$info["img_ext"]=$obj_tbl_list_promotions->getimg_ext();				$info["views_count"]=$obj_tbl_list_promotions->getviews_count();				$info["is_pdf_uploaded"]=$obj_tbl_list_promotions->getis_pdf_uploaded();				$info["cupon_type"]=$obj_tbl_list_promotions->getcupon_type();				$info["allowed_cupons"]=$obj_tbl_list_promotions->getallowed_cupons();				$info["redimed_cupons"]=$obj_tbl_list_promotions->getredimed_cupons();				$info["isActive"] = 0;				//..check deactive date is not set or 0				if((is_not_empty($obj_tbl_list_promotions->gettbl_list_promotions_deactive_date())==false)  || (is_gt_zero_num(strtotime($obj_tbl_list_promotions->gettbl_list_promotions_deactive_date()))== false)){					$info["isActive"] = 1;				}else{					//..check the deactive date is greater than todays date					if(strtotime($obj_tbl_list_promotions->gettbl_list_promotions_deactive_date()) >= strtotime(date(DATE_FORMAT))){						$info["isActive"] = 1;					}				}			}		unset($obj_tbl_list_promotions);		return $info;		}	}//..End GetInfo	public static function GetFields($data){		global $tbl_list_promotions_active_condition;		$arr = array();		if(is_not_empty($data)){			$qry ="SELECT ".$data['key_field'].",".$data['value_field']." FROM ".TBL_DINING_TABLE."";			if(is_gt_zero_num($data['isActive'])){				$qry .= " WHERE ".$tbl_list_promotions_active_condition;			}			$res = mysql_query($qry); 			if($res){				while($row=mysql_fetch_assoc($res)){					$arr[$row[$data['key_field']]] = $row[$data['value_field']];				}			}		}			return $arr;	}//.. End of GetFields		public static function cupon_types(){		return array(						"none"=>"Regular promotions",					"all_site"=>"One time coupon",					"recommendation"=>"coupon on recommendation",					"survey"=>"coupon on survey",					"reward"=>"Rewards program"				);	}	}//..End tbl_list_promotions?>