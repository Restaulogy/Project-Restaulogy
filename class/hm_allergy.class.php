<?php/**********************************************************************hm_allergy.class.phpGenerated by STRUCTY 2012.12.06 10:42:54.Copyright 2011 Structy, Frédéric Aebi. All rights reserved.**********************************************************************/define("HM_ALLERGY", "hm_allergy"); class hm_allergy {	private $allergy_id;	private $allergy_name;	private $allergy_start_date; 	private $allergy_end_date;  	public function setallergy_id($pArg="0") {$this->allergy_id=$pArg;}	public function setallergy_name($pArg="0") {$this->allergy_name=$pArg;}	public function setallergy_start_date($pArg="0") {$this->allergy_start_date=$pArg;}	public function setallergy_end_date($pArg="0") {$this->allergy_end_date=$pArg;}	public function getallergy_id() {return $this->allergy_id;}	public function getallergy_name() {return $this->allergy_name;}	public function getallergy_start_date() {return $this->allergy_start_date;}	public function getallergy_end_date() {return $this->allergy_end_date;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".HM_ALLERGY.RET;		$and = "WHERE".RET;		if($array['allergy_id'] != "") {			$qry .= $and."allergy_id = '".$array['allergy_id']."'".RET;			$and = "AND".RET;		}		if($array['allergy_name'] != "") {			$qry .= $and."allergy_name = '".$array['allergy_name']."'".RET;			$and = "AND".RET;		}				if($array['allergy_start_date'] != "") {			$qry .= $and."allergy_start_date = '".$array['allergy_start_date']."'".RET;			$and = "AND".RET;		}		if($array['allergy_end_date'] != "") {			$qry .= $and."allergy_end_date = '".$array['allergy_end_date']."'".RET;			$and = "AND".RET;		}		 $result = mysql_query($qry);		if($result){            while ($row = mysql_fetch_array($result)) {			     $record = $row;				 break;//end after first record			}            if(count($record[0]) == 0) {			    return array();			} else {			$this->setallergy_id($record['allergy_id']);			$this->setallergy_name($record['allergy_name']);			$this->setallergy_start_date($record['allergy_start_date']);			$this->setallergy_end_date($record['allergy_end_date']);			return true;			}		}	}	public static function readArray($array = array()) {		$qry = "SELECT *".RET."FROM ".HM_ALLERGY.RET;		$and = "WHERE".RET;		if($array['allergy_id'] != "") {			$qry .= $and."allergy_id = '".$array['allergy_id']."'".RET;			$and = "AND".RET;		}		if($array['allergy_name'] != "") {			$qry .= $and."allergy_name = '".$array['allergy_name']."'".RET;			$and = "AND".RET;		}				if($array['allergy_start_date'] != "") {			$qry .= $and."allergy_start_date = '".$array['allergy_start_date']."'".RET;			$and = "AND".RET;		}		if($array['allergy_end_date'] != "") {			$qry .= $and."allergy_end_date = '".$array['allergy_end_date']."'".RET;			$and = "AND".RET;		}        $result = mysql_query($qry);		$class_objects = array();		if($result){            while ($record = mysql_fetch_assoc($result)) {				$class_object = new hm_allergy();				$class_object->setallergy_id($record['allergy_id']);				$class_object->setallergy_name($record['allergy_name']);				$class_objects[$class_object->getallergy_id()] = $class_object;			}		}		return $class_objects;	}	public function insert() {		if($this->getallergy_id() != '') {			$qry  = "UPDATE ".HM_ALLERGY.RET."SET".RET.			"allergy_id = '".$this->getallergy_id()."',".RET.			"allergy_name = '".$this->getallergy_name()."',".RET.			"allergy_start_date = '".$this->getallergy_start_date()."',".RET.			"allergy_end_date = '".$this->getallergy_end_date()."'".RET.			"WHERE allergy_id = ".$this->getallergy_id().RET; 			 			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".HM_ALLERGY." (".RET.			"allergy_name, allergy_start_date, allergy_end_date".RET.				") VALUES (".RET.			"'".$this->getallergy_name()."',".RET.			"'".$this->getallergy_start_date()."',".RET.			"'".$this->getallergy_end_date()."'".RET.			")".RET;			$res = mysql_query($qry);						$this->setallergy_id(mysql_insert_id($res));		}	}	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".HM_ALLERGY.RET;		$and = "WHERE".RET;		if($array['allergy_id'] != "") {			$qry .= $and."allergy_id = '".$array['allergy_id']."'".RET;			$and = "AND".RET;		}		if($array['allergy_name'] != "") {			$qry .= $and."allergy_name = '".$array['allergy_name']."'".RET;			$and = "AND".RET;		}		mysql_query($qry);	}		public function GetAllergyList(){		$arr = array();		$res = mysql_query("SELECT allergy_id, allergy_name FROM ".HM_ALLERGY);		if($res){ 			while($row=mysql_fetch_assoc($res)){				$arr[$row['allergy_id']] = $row['allergy_name']; 			}		} 		return $arr;	}		public function updateStatus($id, $isDeactive=0){				 if($this->readObject(array("allergy_id"=>$id))){ 		 if(is_gt_zero_num($isDeactive)){		 	$this->setallergy_end_date(date("Y-m-d H:i:s"));			$this->setallergy_start_date("0000-00-00 00:00:00");		 }else{		 	$this->setallergy_start_date(date("Y-m-d H:i:s"));			$this->setallergy_end_date("0000-00-00 00:00:00");		 }		 	$this->insert(); 		 }	}	}?>