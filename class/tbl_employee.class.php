<?php/**********************************************************************tbl_employee.class.phpGenerated by STRUCTY 2013.03.02 10:09:35.Copyright 2011 Structy, Frédéric Aebi. All rights reserved.**********************************************************************/define("TBL_EMPLOYEE", "tbl_employee"); class tbl_employee {	private $emp_id;	private $emp_email;	private $emp_pwd;	private $emp_name;	private $emp_device_id;	private $emp_gcm_reg_id;	private $emp_description;	private $emp_desigation;	private $emp_availability;	private $emp_start_dt;	private $emp_end_dt;	public function setemp_id($pArg="0") {$this->emp_id=$pArg;}	public function setemp_email($pArg="0") {$this->emp_email=$pArg;}	public function setemp_pwd($pArg="0") {$this->emp_pwd=$pArg;}	public function setemp_name($pArg="0") {$this->emp_name=$pArg;}	public function setemp_device_id($pArg="0") {$this->emp_device_id=$pArg;}	public function setemp_gcm_reg_id($pArg="0") {$this->emp_gcm_reg_id=$pArg;}	public function setemp_description($pArg="0") {$this->emp_description=$pArg;}	public function setemp_desigation($pArg="0") {$this->emp_desigation=$pArg;}	public function setemp_availability($pArg="0") {$this->emp_availability=$pArg;}	public function setemp_start_dt($pArg="0") {$this->emp_start_dt=$pArg;}	public function setemp_end_dt($pArg="0") {$this->emp_end_dt=$pArg;}	public function getemp_id() {return $this->emp_id;}	public function getemp_email() {return $this->emp_email;}	public function getemp_pwd() {return $this->emp_pwd;}	public function getemp_name() {return $this->emp_name;}	public function getemp_device_id() {return $this->emp_device_id;}	public function getemp_gcm_reg_id() {return $this->emp_gcm_reg_id;}	public function getemp_description() {return $this->emp_description;}	public function getemp_desigation() {return $this->emp_desigation;}	public function getemp_availability() {return $this->emp_availability;}	public function getemp_start_dt() {return $this->emp_start_dt;}	public function getemp_end_dt() {return $this->emp_end_dt;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_EMPLOYEE.RET;		$and = "WHERE".RET;		if($array['emp_id'] != "") {			$qry .= $and."emp_id = '".$array['emp_id']."'".RET;			$and = "AND".RET;		}		if($array['emp_email'] != "") {			$qry .= $and."emp_email = '".$array['emp_email']."'".RET;			$and = "AND".RET;		}		if($array['emp_pwd'] != "") {			$qry .= $and."emp_pwd = '".$array['emp_pwd']."'".RET;			$and = "AND".RET;		}		if($array['emp_name'] != "") {			$qry .= $and."emp_name = '".$array['emp_name']."'".RET;			$and = "AND".RET;		}		if($array['emp_device_id'] != "") {			$qry .= $and."emp_device_id = '".$array['emp_device_id']."'".RET;			$and = "AND".RET;		}		if($array['emp_gcm_reg_id'] != "") {			$qry .= $and."emp_gcm_reg_id = '".$array['emp_gcm_reg_id']."'".RET;			$and = "AND".RET;		}		if($array['emp_description'] != "") {			$qry .= $and."emp_description = '".$array['emp_description']."'".RET;			$and = "AND".RET;		}		if($array['emp_desigation'] != "") {			$qry .= $and."emp_desigation = '".$array['emp_desigation']."'".RET;			$and = "AND".RET;		}		if($array['emp_availability'] != "") {			$qry .= $and."emp_availability = '".$array['emp_availability']."'".RET;			$and = "AND".RET;		}		if($array['emp_start_dt'] != "") {			$qry .= $and."emp_start_dt = '".$array['emp_start_dt']."'".RET;			$and = "AND".RET;		}		if($array['emp_end_dt'] != "") {			$qry .= $and."emp_end_dt = '".$array['emp_end_dt']."'".RET;			$and = "AND".RET;		}	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setemp_id($record['emp_id']);				$this->setemp_email($record['emp_email']);				$this->setemp_pwd($record['emp_pwd']);				$this->setemp_name($record['emp_name']);				$this->setemp_device_id($record['emp_device_id']);				$this->setemp_gcm_reg_id($record['emp_gcm_reg_id']);				$this->setemp_description($record['emp_description']);				$this->setemp_desigation($record['emp_desigation']);				$this->setemp_availability($record['emp_availability']);				$this->setemp_start_dt($record['emp_start_dt']);				$this->setemp_end_dt($record['emp_end_dt']);				return true;			}		}	}	public static function readArray($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_EMPLOYEE.RET;		$and = "WHERE".RET;		if($array['emp_id'] != "") {			$qry .= $and."emp_id = '".$array['emp_id']."'".RET;			$and = "AND".RET;		}		if($array['emp_email'] != "") {			$qry .= $and."emp_email = '".$array['emp_email']."'".RET;			$and = "AND".RET;		}		if($array['emp_pwd'] != "") {			$qry .= $and."emp_pwd = '".$array['emp_pwd']."'".RET;			$and = "AND".RET;		}		if($array['emp_name'] != "") {			$qry .= $and."emp_name = '".$array['emp_name']."'".RET;			$and = "AND".RET;		}		if($array['emp_device_id'] != "") {			$qry .= $and."emp_device_id = '".$array['emp_device_id']."'".RET;			$and = "AND".RET;		}		if($array['emp_gcm_reg_id'] != "") {			$qry .= $and."emp_gcm_reg_id = '".$array['emp_gcm_reg_id']."'".RET;			$and = "AND".RET;		}		if($array['emp_description'] != "") {			$qry .= $and."emp_description = '".$array['emp_description']."'".RET;			$and = "AND".RET;		}		if($array['emp_desigation'] != "") {			$qry .= $and."emp_desigation = '".$array['emp_desigation']."'".RET;			$and = "AND".RET;		}		if($array['emp_availability'] != "") {			$qry .= $and."emp_availability = '".$array['emp_availability']."'".RET;			$and = "AND".RET;		}		if($array['emp_start_dt'] != "") {			$qry .= $and."emp_start_dt = '".$array['emp_start_dt']."'".RET;			$and = "AND".RET;		}		if($array['emp_end_dt'] != "") {			$qry .= $and."emp_end_dt = '".$array['emp_end_dt']."'".RET;			$and = "AND".RET;		}		$result = mysql_query($qry);		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$class_object = new tbl_employee();				$class_object->setemp_id($record['emp_id']);				$class_object->setemp_email($record['emp_email']);				$class_object->setemp_pwd($record['emp_pwd']);				$class_object->setemp_name($record['emp_name']);				$class_object->setemp_device_id($record['emp_device_id']);				$class_object->setemp_gcm_reg_id($record['emp_gcm_reg_id']);				$class_object->setemp_description($record['emp_description']);				$class_object->setemp_desigation($record['emp_desigation']);				$class_object->setemp_availability($record['emp_availability']);				$class_object->setemp_start_dt($record['emp_start_dt']);				$class_object->setemp_end_dt($record['emp_end_dt']);				$class_objects[$class_object->getemp_id()] = $class_object;			}		}		return $class_objects;	}	public function insert() {		if($this->getemp_id() != '') {			$qry  = "UPDATE ".TBL_EMPLOYEE.RET."SET".RET.			"emp_id = '".$this->getemp_id()."',".RET.			"emp_email = '".$this->getemp_email()."',".RET.			"emp_pwd = '".$this->getemp_pwd()."',".RET.			"emp_name = '".$this->getemp_name()."',".RET.			"emp_device_id = '".$this->getemp_device_id()."',".RET.			"emp_gcm_reg_id = '".$this->getemp_gcm_reg_id()."',".RET.			"emp_description = '".$this->getemp_description()."',".RET.			"emp_desigation = '".$this->getemp_desigation()."',".RET.			"emp_availability = '".$this->getemp_availability()."',".RET.			"emp_start_dt = '".$this->getemp_start_dt()."',".RET.			"emp_end_dt = '".$this->getemp_end_dt()."'".RET.			"WHERE emp_id = ".$this->getemp_id().RET;			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".TBL_EMPLOYEE." (".RET.			"emp_email, emp_pwd, emp_name, emp_device_id, emp_gcm_reg_id, emp_description, emp_desigation, emp_availability, emp_start_dt, emp_end_dt".RET.				") VALUES (".RET.			"'".$this->getemp_email()."',".RET.			"'".$this->getemp_pwd()."',".RET.			"'".$this->getemp_name()."',".RET.			"'".$this->getemp_device_id()."',".RET.			"'".$this->getemp_gcm_reg_id()."',".RET.			"'".$this->getemp_description()."',".RET.			"'".$this->getemp_desigation()."',".RET.			"'".$this->getemp_availability()."',".RET.			"'".$this->getemp_start_dt()."',".RET.			"'".$this->getemp_end_dt()."'".RET.			")".RET;			$res = mysql_query($qry);			$this->setemp_id(mysql_insert_id());		}	}	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".TBL_EMPLOYEE.RET;		$and = "WHERE".RET;		if($array['emp_id'] != "") {			$qry .= $and."emp_id = '".$array['emp_id']."'".RET;			$and = "AND".RET;		}		if($array['emp_email'] != "") {			$qry .= $and."emp_email = '".$array['emp_email']."'".RET;			$and = "AND".RET;		}		if($array['emp_pwd'] != "") {			$qry .= $and."emp_pwd = '".$array['emp_pwd']."'".RET;			$and = "AND".RET;		}		if($array['emp_name'] != "") {			$qry .= $and."emp_name = '".$array['emp_name']."'".RET;			$and = "AND".RET;		}		if($array['emp_device_id'] != "") {			$qry .= $and."emp_device_id = '".$array['emp_device_id']."'".RET;			$and = "AND".RET;		}		if($array['emp_gcm_reg_id'] != "") {			$qry .= $and."emp_gcm_reg_id = '".$array['emp_gcm_reg_id']."'".RET;			$and = "AND".RET;		}		if($array['emp_description'] != "") {			$qry .= $and."emp_description = '".$array['emp_description']."'".RET;			$and = "AND".RET;		}		if($array['emp_desigation'] != "") {			$qry .= $and."emp_desigation = '".$array['emp_desigation']."'".RET;			$and = "AND".RET;		}		if($array['emp_availability'] != "") {			$qry .= $and."emp_availability = '".$array['emp_availability']."'".RET;			$and = "AND".RET;		}		if($array['emp_start_dt'] != "") {			$qry .= $and."emp_start_dt = '".$array['emp_start_dt']."'".RET;			$and = "AND".RET;		}		if($array['emp_end_dt'] != "") {			$qry .= $and."emp_end_dt = '".$array['emp_end_dt']."'".RET;			$and = "AND".RET;		}		mysql_query($qry);	}			public function create($member_id, $address, $lname, $fname, $zip="", $phone="")    {	 if (is_gt_zero_num($member_id) && is_not_empty($address) && is_not_empty($lname)&& is_not_empty($fname)){	 	if($this->isAlreadyThere($member_id)){				return -1;   			}else{				$this->setstaff_id("");				$this->setstaff_member_id($member_id);				$this->setstaff_address($address);				$this->setstaff_fname($fname);				$this->setstaff_lname($lname);				$this->setstaff_zip($zip);				$this->setstaff_phone($phone);				$this->setstaff_start_date(date("Y-m-d H:i:s"));				$this->setstaff_end_date("0000-00-00 00:00:00");				$this->insert();				return $this->getstaff_id();			}	 }else{	 	return 0;	 }	}	public function isAlreadyThere($member_id){         	return $this->readObject(array("staff_member_id"=>$member_id));  	}	public function GetInfo($member_id=0, $id=0){		$arr = array();		$info = array();		if(is_gt_zero_num($member_id)){			 $arr['staff_member_id'] = $member_id;		}		if(is_gt_zero_num($id)){			 $arr['staff_id'] = $id;		}		if(is_not_empty($arr)){			$this->readObject($arr);			if(is_gt_zero_num($this->getstaff_id())){				$info['staff_id']= $this->getstaff_id();				$info['member_id']= $this->getstaff_member_id();				$info['first_name']= $this->getstaff_fname();				$info['last_name']= $this->getstaff_lname();				$info['zip']= $this->getstaff_zip();				$info['phone']= $this->getstaff_phone();				$info['address']= $this->getstaff_address();				$info['start_date']= $this->getstaff_start_date();                $info['end_date']= $this->getstaff_end_date();			}		}		return $info;	}		public function updateStatus($id, $isDeactive=0){		 if($this->readObject(array("staff_id"=>$id))){		 if(is_gt_zero_num($isDeactive)){			$this->setstaff_start_date("0000-00-00 00:00:00");			$this->setallergy_end_date(date("Y-m-d H:i:s"));		 }else{		 	$this->setstaff_start_date(date("Y-m-d H:i:s"));			$this->setstaff_end_date("0000-00-00 00:00:00");		 }		 	$this->insert();		 }	}		public function GetActiveStaff(){		$arr = array();		$res = mysql_query("SELECT staff_id, CONCAT(`staff_fname`,' ',`staff_lname`) 'Staff_Member' FROM ".HM_TBL_STAFF." WHERE staff_start_date > 0AND ( staff_end_date > CURDATE() OR staff_end_date =0 OR staff_end_date IS NULL)");		if($res){			while($row=mysql_fetch_assoc($res)){				$arr[$row['staff_id']] = $row['Staff_Member'];			}		}		return $arr;	}	}?>