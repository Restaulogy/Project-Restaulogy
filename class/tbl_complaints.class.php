<?php/**********************************************************************tbl_complaints.class.phpGenerated by STRUCTY 2014.03.06 09:37:10.Copyright 2011 Structy, Frédéric Aebi. All rights reserved.**********************************************************************/define("TBL_COMPLAINTS", "tbl_complaints"); define('COMPLNT_ID', 'complnt_id'); define('COMPLNT_TITLE', 'complnt_title'); define('COMPLNT_DESCRIPTION', 'complnt_description'); define('COMPLNT_EMAIL', 'complnt_email'); define('COMPLNT_PHONE', 'complnt_phone'); define('COMPLNT_RESTAURANT', 'complnt_restaurant'); define('COMPLNT_USER_ID', 'complnt_user_id'); define('COMPLNT_USER_TYPE', 'complnt_user_type'); define('COMPLNT_TABLE', 'complnt_table'); define('COMPLNT_START_DATE', 'complnt_start_date'); define('COMPLNT_END_DATE', 'complnt_end_date'); define("TBL_COMPLAINTS_ACTIVE_DATE",  COMPLNT_START_DATE);define("TBL_COMPLAINTS_DEACTIVE_DATE",  COMPLNT_END_DATE);$tbl_complaints_active_condition= " (".TBL_COMPLAINTS_DEACTIVE_DATE." is NULL OR ".TBL_COMPLAINTS_DEACTIVE_DATE." = 0 OR ".TBL_COMPLAINTS_DEACTIVE_DATE." > CURDATE( )) ";class tbl_complaints {	private $complnt_id;	private $complnt_title;	private $complnt_description;	private $complnt_email;	private $complnt_phone;	private $complnt_restaurant;	private $complnt_user_id;	private $complnt_user_type;	private $complnt_table;	private $complnt_start_date;	private $complnt_end_date;	private $tbl_complaints_active_date;	private $tbl_complaints_deactive_date;	public function setcomplnt_id($pArg="0") {$this->complnt_id=$pArg;}	public function setcomplnt_title($pArg="0") {$this->complnt_title=$pArg;}	public function setcomplnt_description($pArg="0") {$this->complnt_description=$pArg;}	public function setcomplnt_email($pArg="0") {$this->complnt_email=$pArg;}	public function setcomplnt_phone($pArg="0") {$this->complnt_phone=$pArg;}	public function setcomplnt_restaurant($pArg="0") {$this->complnt_restaurant=$pArg;}	public function setcomplnt_user_id($pArg="0") {$this->complnt_user_id=$pArg;}	public function setcomplnt_user_type($pArg="0") {$this->complnt_user_type=$pArg;}	public function setcomplnt_table($pArg="0") {$this->complnt_table=$pArg;}	public function setcomplnt_start_date($pArg="0") {$this->complnt_start_date=$pArg;}	public function setcomplnt_end_date($pArg="0") {$this->complnt_end_date=$pArg;}	public function settbl_complaints_active_date($pArg="0") {$this->tbl_complaints_active_date=$pArg;}	public function settbl_complaints_deactive_date($pArg="0") {$this->tbl_complaints_deactive_date=$pArg;}	public function getcomplnt_id() {return $this->complnt_id;}	public function getcomplnt_title() {return $this->complnt_title;}	public function getcomplnt_description() {return $this->complnt_description;}	public function getcomplnt_email() {return $this->complnt_email;}	public function getcomplnt_phone() {return $this->complnt_phone;}	public function getcomplnt_restaurant() {return $this->complnt_restaurant;}	public function getcomplnt_user_id() {return $this->complnt_user_id;}	public function getcomplnt_user_type() {return $this->complnt_user_type;}	public function getcomplnt_table() {return $this->complnt_table;}	public function getcomplnt_start_date() {return $this->complnt_start_date;}	public function getcomplnt_end_date() {return $this->complnt_end_date;}	public function gettbl_complaints_active_date($pArg="0") {return $this->tbl_complaints_active_date;}	public function gettbl_complaints_deactive_date($pArg="0") {return $this->tbl_complaints_deactive_date;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_COMPLAINTS.RET;		$and = "WHERE".RET;		if($array[COMPLNT_ID] != "") {			$qry .= $and.COMPLNT_ID." = '".$array[COMPLNT_ID]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_TITLE] != "") {			$qry .= $and.COMPLNT_TITLE." = '".$array[COMPLNT_TITLE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_DESCRIPTION] != "") {			$qry .= $and.COMPLNT_DESCRIPTION." = '".$array[COMPLNT_DESCRIPTION]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_EMAIL] != "") {			$qry .= $and.COMPLNT_EMAIL." = '".$array[COMPLNT_EMAIL]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_PHONE] != "") {			$qry .= $and.COMPLNT_PHONE." = '".$array[COMPLNT_PHONE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_RESTAURANT] != "") {			$qry .= $and.COMPLNT_RESTAURANT." = '".$array[COMPLNT_RESTAURANT]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_USER_ID] != "") {			$qry .= $and.COMPLNT_USER_ID." = '".$array[COMPLNT_USER_ID]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_USER_TYPE] != "") {			$qry .= $and.COMPLNT_USER_TYPE." = '".$array[COMPLNT_USER_TYPE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_TABLE] != "") {			$qry .= $and.COMPLNT_TABLE." = '".$array[COMPLNT_TABLE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_START_DATE] != "") {			$qry .= $and.COMPLNT_START_DATE." = '".$array[COMPLNT_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_END_DATE] != "") {			$qry .= $and.COMPLNT_END_DATE." = '".$array[COMPLNT_END_DATE]."'".RET;			$and = "AND".RET;		}	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setcomplnt_id($record[COMPLNT_ID]);				$this->setcomplnt_title($record[COMPLNT_TITLE]);				$this->setcomplnt_description($record[COMPLNT_DESCRIPTION]);				$this->setcomplnt_email($record[COMPLNT_EMAIL]);				$this->setcomplnt_phone($record[COMPLNT_PHONE]);				$this->setcomplnt_restaurant($record[COMPLNT_RESTAURANT]);				$this->setcomplnt_user_id($record[COMPLNT_USER_ID]);				$this->setcomplnt_user_type($record[COMPLNT_USER_TYPE]);				$this->setcomplnt_table($record[COMPLNT_TABLE]);				$this->setcomplnt_start_date($record[COMPLNT_START_DATE]);				$this->setcomplnt_end_date($record[COMPLNT_END_DATE]);				$this->settbl_complaints_active_date($record[TBL_COMPLAINTS_ACTIVE_DATE]);				$this->settbl_complaints_deactive_date($record[TBL_COMPLAINTS_DEACTIVE_DATE]);				return true;			}		}	}	public static function readArray($array = array(),&$result_found=0,$isArray=1) {		global $tbl_complaints_active_condition;		$qry = "SELECT *".RET."FROM ".TBL_COMPLAINTS.RET;		$and = "WHERE".RET;		if($array[COMPLNT_ID] != "") {			$qry .= $and.COMPLNT_ID." = '".$array[COMPLNT_ID]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_TITLE] != "") {			$qry .= $and.COMPLNT_TITLE." = '".$array[COMPLNT_TITLE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_DESCRIPTION] != "") {			$qry .= $and.COMPLNT_DESCRIPTION." = '".$array[COMPLNT_DESCRIPTION]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_EMAIL] != "") {			$qry .= $and.COMPLNT_EMAIL." = '".$array[COMPLNT_EMAIL]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_PHONE] != "") {			$qry .= $and.COMPLNT_PHONE." = '".$array[COMPLNT_PHONE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_RESTAURANT] != "") {			$qry .= $and.COMPLNT_RESTAURANT." = '".$array[COMPLNT_RESTAURANT]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_USER_ID] != "") {			$qry .= $and.COMPLNT_USER_ID." = '".$array[COMPLNT_USER_ID]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_USER_TYPE] != "") {			$qry .= $and.COMPLNT_USER_TYPE." = '".$array[COMPLNT_USER_TYPE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_TABLE] != "") {			$qry .= $and.COMPLNT_TABLE." = '".$array[COMPLNT_TABLE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_START_DATE] != "") {			$qry .= $and.COMPLNT_START_DATE." = '".$array[COMPLNT_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_END_DATE] != "") {			$qry .= $and.COMPLNT_END_DATE." = '".$array[COMPLNT_END_DATE]."'".RET;			$and = "AND".RET;		}		if(is_gt_zero_num($array["isActive"])) {			$qry .= $and.$tbl_complaints_active_condition;;			$and = "AND".RET;		}		if(is_not_empty($array[SORT_ON]) && is_not_empty($array[SORT_BY])) {		$qry .=" ORDER BY ".$array[SORT_ON]." ".$array[SORT_BY];		}		if(is_not_empty($array[OFFSET_TITLE]) && is_not_empty($array[LIMIT_TITLE])) {			$qry_with_limit  = $qry." LIMIT ".$array[OFFSET_TITLE].",".$array[LIMIT_TITLE];		}else{			$qry_with_limit  = $qry;		}		$result = mysql_query ($qry_with_limit);		$r1 = mysql_query($qry);		if($r1){			$result_found = mysql_num_rows($r1);		}		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$isActive= 0;				//..check deactive date is not set or 0				if((is_not_empty($record[TBL_COMPLAINTS_DEACTIVE_DATE])==false) || (is_gt_zero_num(strtotime($record[TBL_COMPLAINTS_DEACTIVE_DATE]))== false)){					$isActive = 1; 				}else{					//..check the deactive date is greater than todays date					if(strtotime($record[TBL_COMPLAINTS_DEACTIVE_DATE]) > strtotime(date(DATE_FORMAT))){						$isActive = 1;					}				}				if($isArray){					$class_object = array();					$class_object["complnt_id"]=$record[COMPLNT_ID];					$class_object["complnt_title"]=$record[COMPLNT_TITLE];					$class_object["complnt_description"]=$record[COMPLNT_DESCRIPTION];					$class_object["complnt_email"]=$record[COMPLNT_EMAIL];					$class_object["complnt_phone"]=$record[COMPLNT_PHONE];					$class_object["complnt_restaurant"]=$record[COMPLNT_RESTAURANT];					$class_object["complnt_user_id"]=$record[COMPLNT_USER_ID];					$class_object["complnt_user_type"]=$record[COMPLNT_USER_TYPE];					$class_object["complnt_table"]=$record[COMPLNT_TABLE];					$class_object["complnt_start_date"]=$record[COMPLNT_START_DATE];					$class_object["complnt_end_date"]=$record[COMPLNT_END_DATE];					$class_object['friendly_created_on'] = friendly_time($class_object[COMPLNT_START_DATE],1);					$class_object["isActive"]=$isActive;				}else{					$class_object = new tbl_complaints();					$class_object->setcomplnt_id($record[COMPLNT_ID]);					$class_object->setcomplnt_title($record[COMPLNT_TITLE]);					$class_object->setcomplnt_description($record[COMPLNT_DESCRIPTION]);					$class_object->setcomplnt_email($record[COMPLNT_EMAIL]);					$class_object->setcomplnt_phone($record[COMPLNT_PHONE]);					$class_object->setcomplnt_restaurant($record[COMPLNT_RESTAURANT]);					$class_object->setcomplnt_user_id($record[COMPLNT_USER_ID]);					$class_object->setcomplnt_user_type($record[COMPLNT_USER_TYPE]);					$class_object->setcomplnt_table($record[COMPLNT_TABLE]);					$class_object->setcomplnt_start_date($record[COMPLNT_START_DATE]);					$class_object->setcomplnt_end_date($record[COMPLNT_END_DATE]);				}				$class_objects[$record[COMPLNT_ID]] = $class_object;			}		}		return $class_objects;	}//..End readArray	public function insert() {		if($this->getcomplnt_id() != '') {			$qry  = "UPDATE ".TBL_COMPLAINTS.RET."SET".RET."			".COMPLNT_ID." = '".$this->getcomplnt_id()."',".RET."			".COMPLNT_TITLE." = '".$this->getcomplnt_title()."',".RET."			".COMPLNT_DESCRIPTION." = '".$this->getcomplnt_description()."',".RET."			".COMPLNT_EMAIL." = '".$this->getcomplnt_email()."',".RET."			".COMPLNT_PHONE." = '".$this->getcomplnt_phone()."',".RET."						".COMPLNT_USER_ID." = '".$this->getcomplnt_user_id()."',".RET."			".COMPLNT_USER_TYPE." = '".$this->getcomplnt_user_type()."',".RET."			".COMPLNT_TABLE." = '".$this->getcomplnt_table()."',".RET."			".COMPLNT_START_DATE." = '".$this->getcomplnt_start_date()."',".RET."			".COMPLNT_END_DATE." = '".$this->getcomplnt_end_date()."'".RET.			"WHERE ".COMPLNT_ID." = ".$this->getcomplnt_id().RET;			//..".COMPLNT_RESTAURANT." = '".$this->getcomplnt_restaurant()."',".RET."			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".TBL_COMPLAINTS." (".RET.			"".COMPLNT_TITLE.", ".COMPLNT_DESCRIPTION.", ".COMPLNT_EMAIL.", ".COMPLNT_PHONE.", ".COMPLNT_RESTAURANT.", ".COMPLNT_USER_ID.", ".COMPLNT_USER_TYPE.", ".COMPLNT_TABLE.", ".COMPLNT_START_DATE.", ".COMPLNT_END_DATE.RET.				") VALUES (".RET.			"'".$this->getcomplnt_title()."',".RET.			"'".$this->getcomplnt_description()."',".RET.			"'".$this->getcomplnt_email()."',".RET.			"'".$this->getcomplnt_phone()."',".RET.			"'".$_SESSION[SES_RESTAURANT]."',".RET.			"'".$this->getcomplnt_user_id()."',".RET.			"'".$this->getcomplnt_user_type()."',".RET.			"'".$this->getcomplnt_table()."',".RET.			"'".$this->getcomplnt_start_date()."',".RET.			"'".$this->getcomplnt_end_date()."'".RET.			")".RET;			$res = mysql_query($qry);			$this->setcomplnt_id(mysql_insert_id());		}	}//..End Insert	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".TBL_COMPLAINTS.RET;		$and = "WHERE".RET;		if($array[COMPLNT_ID] != "") {			$qry .= $and.COMPLNT_ID." IN (".$array[COMPLNT_ID].")".RET;			$and = "AND".RET;		}		if($array[COMPLNT_TITLE] != "") {			$qry .= $and.COMPLNT_TITLE." = '".$array[COMPLNT_TITLE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_DESCRIPTION] != "") {			$qry .= $and.COMPLNT_DESCRIPTION." = '".$array[COMPLNT_DESCRIPTION]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_EMAIL] != "") {			$qry .= $and.COMPLNT_EMAIL." = '".$array[COMPLNT_EMAIL]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_PHONE] != "") {			$qry .= $and.COMPLNT_PHONE." = '".$array[COMPLNT_PHONE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_RESTAURANT] != "") {			$qry .= $and.COMPLNT_RESTAURANT." = '".$array[COMPLNT_RESTAURANT]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_USER_ID] != "") {			$qry .= $and.COMPLNT_USER_ID." = '".$array[COMPLNT_USER_ID]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_USER_TYPE] != "") {			$qry .= $and.COMPLNT_USER_TYPE." = '".$array[COMPLNT_USER_TYPE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_TABLE] != "") {			$qry .= $and.COMPLNT_TABLE." = '".$array[COMPLNT_TABLE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_START_DATE] != "") {			$qry .= $and.COMPLNT_START_DATE." = '".$array[COMPLNT_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[COMPLNT_END_DATE] != "") {			$qry .= $and.COMPLNT_END_DATE." = '".$array[COMPLNT_END_DATE]."'".RET;			$and = "AND".RET;		}		$res = mysql_query($qry);		if($res){			return OPERATION_SUCCESS;		};		return OPERATION_FAIL;	}//..End Delete	public function isAlreadyThere($complnt_title ,$complnt_description ,$complnt_email ,$complnt_phone ,$complnt_restaurant ,$complnt_user_id ,$complnt_user_type ,$complnt_table ,$complnt_start_date ,$complnt_end_date) {		$unique_arr = array();			//$unique_arr[COMPLNT_ID]=$complnt_id;			//$unique_arr[COMPLNT_TITLE]=$complnt_title;			//$unique_arr[COMPLNT_DESCRIPTION]=$complnt_description;			//$unique_arr[COMPLNT_EMAIL]=$complnt_email;			//$unique_arr[COMPLNT_PHONE]=$complnt_phone;			//$unique_arr[COMPLNT_RESTAURANT]=$complnt_restaurant;			//$unique_arr[COMPLNT_USER_ID]=$complnt_user_id;			//$unique_arr[COMPLNT_USER_TYPE]=$complnt_user_type;			//$unique_arr[COMPLNT_TABLE]=$complnt_table;			//$unique_arr[COMPLNT_START_DATE]=$complnt_start_date;			//$unique_arr[COMPLNT_END_DATE]=$complnt_end_date;		if(is_not_empty($unique_arr)){			return $this->readObject($unique_arr);		}		return false;	}//..isAlreadyThere	public function create($complnt_title ,$complnt_description ,$complnt_email ,$complnt_phone ,$complnt_restaurant ,$complnt_user_id ,$complnt_user_type ,$complnt_table ,$complnt_start_date ,$complnt_end_date) {		if(is_not_empty($complnt_title)){			if($this->isAlreadyThere($complnt_title ,$complnt_description ,$complnt_email ,$complnt_phone ,$complnt_restaurant ,$complnt_user_id ,$complnt_user_type ,$complnt_table ,$complnt_start_date ,$complnt_end_date)){				return OPERATION_DUPLICATE;			}else{				$this->setcomplnt_id("");				$this->setcomplnt_title($complnt_title);				$this->setcomplnt_description($complnt_description);				$this->setcomplnt_email($complnt_email);				$this->setcomplnt_phone($complnt_phone);				$this->setcomplnt_restaurant($complnt_restaurant);				$this->setcomplnt_user_id($complnt_user_id);				$this->setcomplnt_user_type($complnt_user_type);				$this->setcomplnt_table($complnt_table);				$this->setcomplnt_start_date(date(DATE_FORMAT));				$this->insert();				return $this->getcomplnt_id();			}		}		return OPERATION_FAIL;	}//..create	public function update($complnt_id, $complnt_title, $complnt_description, $complnt_email, $complnt_phone, $complnt_restaurant, $complnt_user_id, $complnt_user_type, $complnt_table, $complnt_start_date, $complnt_end_date) {		if(is_gt_zero_num($complnt_id)){			if ($this->readObject(array(COMPLNT_ID=>$complnt_id))){				$this->setcomplnt_title($complnt_title);				$this->setcomplnt_description($complnt_description);				$this->setcomplnt_email($complnt_email);				$this->setcomplnt_phone($complnt_phone);				$this->setcomplnt_restaurant($complnt_restaurant);				$this->setcomplnt_user_id($complnt_user_id);				$this->setcomplnt_user_type($complnt_user_type);				$this->setcomplnt_table($complnt_table);				$this->insert();				return OPERATION_SUCCESS;			}		}		return OPERATION_FAIL;	}//..update	public function activate($complnt_id){		if(is_not_empty($complnt_id)){			//if ($this->readObject(array(COMPLNT_ID=>$complnt_id))){				$qry  = "UPDATE ".TBL_COMPLAINTS.RET."SET".RET."			".TBL_COMPLAINTS_DEACTIVE_DATE." = '".date(EMPTY_DATE_FORMAT)."' WHERE ".COMPLNT_ID." IN ({$complnt_id})";				$res = mysql_query($qry);				if($res){					return 1;				}			//}		}		return 0;	}//..end activate	public function deactivate($complnt_id){		if(is_not_empty($complnt_id)){			//if ($this->readObject(array(COMPLNT_ID=>$complnt_id))){				$qry  = "UPDATE ".TBL_COMPLAINTS.RET."SET".RET."			".TBL_COMPLAINTS_DEACTIVE_DATE." = '".date(DATE_FORMAT)."' WHERE ".COMPLNT_ID." IN ({$complnt_id})";				$res = mysql_query($qry);				if($res){					return 1;				}			//}		}		return 0;	}//..end deactivate	public static function GetInfo($complnt_id) {		$info = array();		if($complnt_id != ""){			$obj_tbl_complaints = new tbl_complaints();			if($obj_tbl_complaints->readObject(array("complnt_id"=>$complnt_id))){				$info["complnt_id"]=$obj_tbl_complaints->getcomplnt_id();				$info["complnt_title"]=$obj_tbl_complaints->getcomplnt_title();				$info["complnt_description"]=$obj_tbl_complaints->getcomplnt_description();				$info["complnt_email"]=$obj_tbl_complaints->getcomplnt_email();				$info["complnt_phone"]=$obj_tbl_complaints->getcomplnt_phone();				$info["complnt_restaurant"]=$obj_tbl_complaints->getcomplnt_restaurant();				$info["complnt_user_id"]=$obj_tbl_complaints->getcomplnt_user_id();				$info["complnt_user_type"]=$obj_tbl_complaints->getcomplnt_user_type();				$info["complnt_table"]=$obj_tbl_complaints->getcomplnt_table();				if(is_gt_zero_num($info["complnt_table"])){					$table_info = tbl_dining_table::GetInfo($info["complnt_table"]);					$info["complnt_table_nm"]=$table_info['table_number'];				}												$info["complnt_start_date"]=$obj_tbl_complaints->getcomplnt_start_date();				$info["complnt_end_date"]=$obj_tbl_complaints->getcomplnt_end_date();				$info["isActive"] = 0;				//..check deactive date is not set or 0				if((is_not_empty($obj_tbl_complaints->gettbl_complaints_deactive_date())==false)  || (is_gt_zero_num(strtotime($obj_tbl_complaints->gettbl_complaints_deactive_date()))== false)){					$info["isActive"] = 1;				}else{					//..check the deactive date is greater than todays date					if(strtotime($obj_tbl_complaints->gettbl_complaints_deactive_date()) > strtotime(date(DATE_FORMAT))){						$info["isActive"] = 1;					}				}			}		unset($obj_tbl_complaints);		return $info;		}	}//..End GetInfo	public static function GetFields($data){		global $tbl_complaints_active_condition;		$arr = array();		if(is_not_empty($data)){			$qry ="SELECT ".$data['key_field'].",".$data['value_field']." FROM ".TBL_COMPLAINTS."";			if(is_gt_zero_num($data['isActive'])){				$qry .= " WHERE ".$tbl_complaints_active_condition;			}			$res = mysql_query($qry); 			if($res){				while($row=mysql_fetch_assoc($res)){					$arr[$row[$data['key_field']]] = $row[$data['value_field']];				}			}		}		return $arr;	}//.. End of GetFields}//..End tbl_complaints?>