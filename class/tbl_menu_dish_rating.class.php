<?php/**********************************************************************tbl_menu_dish_rating.class.phpGenerated by STRUCTY 2013.04.11 10:41:38.Copyright 2011 Structy, Frédéric Aebi. All rights reserved.**********************************************************************/define("TBL_MENU_DISH_RATING", "tbl_menu_dish_rating"); define('MNU_DSH_RATE_ID', 'mnu_dsh_rate_id'); define('MNU_DSH_RATE_TYPE', 'mnu_dsh_rate_type'); define('MNU_DSH_RATE_ENTY_ID', 'mnu_dsh_rate_enty_id'); define('MNU_DSH_RATE_STAR', 'mnu_dsh_rate_star'); define('MNU_DSH_RATE_DESCRIPTION', 'mnu_dsh_rate_description'); define('MNU_DSH_RATE_BY_CUST', 'mnu_dsh_rate_by_cust'); define('MNU_DSH_RATE_CREATED_ON', 'mnu_dsh_rate_created_on'); define("TBL_MENU_DISH_RATING_ACTIVE_DATE",  "");define("TBL_MENU_DISH_RATING_DEACTIVE_DATE",  "");$tbl_menu_dish_rating_active_condition= " (".TBL_MENU_DISH_RATING_DEACTIVE_DATE." is NULL OR ".TBL_MENU_DISH_RATING_DEACTIVE_DATE." = 0 OR ".TBL_MENU_DISH_RATING_DEACTIVE_DATE." > CURDATE( )) ";class tbl_menu_dish_rating {	private $mnu_dsh_rate_id;	private $mnu_dsh_rate_type;	private $mnu_dsh_rate_enty_id;	private $mnu_dsh_rate_star;	private $mnu_dsh_rate_description;	private $mnu_dsh_rate_by_cust;	private $mnu_dsh_rate_created_on;	private $tbl_menu_dish_rating_active_date;	private $tbl_menu_dish_rating_deactive_date;	public function setmnu_dsh_rate_id($pArg="0") {$this->mnu_dsh_rate_id=$pArg;}	public function setmnu_dsh_rate_type($pArg="0") {$this->mnu_dsh_rate_type=$pArg;}	public function setmnu_dsh_rate_enty_id($pArg="0") {$this->mnu_dsh_rate_enty_id=$pArg;}	public function setmnu_dsh_rate_star($pArg="0") {$this->mnu_dsh_rate_star=$pArg;}	public function setmnu_dsh_rate_description($pArg="0") {$this->mnu_dsh_rate_description=$pArg;}	public function setmnu_dsh_rate_by_cust($pArg="0") {$this->mnu_dsh_rate_by_cust=$pArg;}	public function setmnu_dsh_rate_created_on($pArg="0") {$this->mnu_dsh_rate_created_on=$pArg;}	public function settbl_menu_dish_rating_active_date($pArg="0") {$this->tbl_menu_dish_rating_active_date=$pArg;}	public function settbl_menu_dish_rating_deactive_date($pArg="0") {$this->tbl_menu_dish_rating_deactive_date=$pArg;}	public function getmnu_dsh_rate_id() {return $this->mnu_dsh_rate_id;}	public function getmnu_dsh_rate_type() {return $this->mnu_dsh_rate_type;}	public function getmnu_dsh_rate_enty_id() {return $this->mnu_dsh_rate_enty_id;}	public function getmnu_dsh_rate_star() {return $this->mnu_dsh_rate_star;}	public function getmnu_dsh_rate_description() {return $this->mnu_dsh_rate_description;}	public function getmnu_dsh_rate_by_cust() {return $this->mnu_dsh_rate_by_cust;}	public function getmnu_dsh_rate_created_on() {return $this->mnu_dsh_rate_created_on;}	public function gettbl_menu_dish_rating_active_date($pArg="0") {return $this->tbl_menu_dish_rating_active_date;}	public function gettbl_menu_dish_rating_deactive_date($pArg="0") {return $this->tbl_menu_dish_rating_deactive_date;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_MENU_DISH_RATING.RET;		$and = "WHERE".RET;		if($array[MNU_DSH_RATE_ID] != "") {			$qry .= $and.MNU_DSH_RATE_ID." = '".$array[MNU_DSH_RATE_ID]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_TYPE] != "") {			$qry .= $and.MNU_DSH_RATE_TYPE." = '".$array[MNU_DSH_RATE_TYPE]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_ENTY_ID] != "") {			$qry .= $and.MNU_DSH_RATE_ENTY_ID." = '".$array[MNU_DSH_RATE_ENTY_ID]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_STAR] != "") {			$qry .= $and.MNU_DSH_RATE_STAR." = '".$array[MNU_DSH_RATE_STAR]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_DESCRIPTION] != "") {			$qry .= $and.MNU_DSH_RATE_DESCRIPTION." = '".$array[MNU_DSH_RATE_DESCRIPTION]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_BY_CUST] != "") {			$qry .= $and.MNU_DSH_RATE_BY_CUST." = '".$array[MNU_DSH_RATE_BY_CUST]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_CREATED_ON] != "") {			$qry .= $and.MNU_DSH_RATE_CREATED_ON." = '".$array[MNU_DSH_RATE_CREATED_ON]."'".RET;			$and = "AND".RET;		}	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setmnu_dsh_rate_id($record[MNU_DSH_RATE_ID]);				$this->setmnu_dsh_rate_type($record[MNU_DSH_RATE_TYPE]);				$this->setmnu_dsh_rate_enty_id($record[MNU_DSH_RATE_ENTY_ID]);				$this->setmnu_dsh_rate_star($record[MNU_DSH_RATE_STAR]);				$this->setmnu_dsh_rate_description($record[MNU_DSH_RATE_DESCRIPTION]);				$this->setmnu_dsh_rate_by_cust($record[MNU_DSH_RATE_BY_CUST]);				$this->setmnu_dsh_rate_created_on($record[MNU_DSH_RATE_CREATED_ON]);				$this->settbl_menu_dish_rating_active_date($record[TBL_MENU_DISH_RATING_ACTIVE_DATE]);				$this->settbl_menu_dish_rating_deactive_date($record[TBL_MENU_DISH_RATING_DEACTIVE_DATE]);				return true;			}		}	}	public static function readArray($array = array(),&$result_found=0,$isArray=1) {		global $tbl_menu_dish_rating_active_condition;		$qry = "SELECT *".RET."FROM ".TBL_MENU_DISH_RATING.RET;		$and = "WHERE".RET;		if($array[MNU_DSH_RATE_ID] != "") {			$qry .= $and.MNU_DSH_RATE_ID." = '".$array[MNU_DSH_RATE_ID]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_TYPE] != "") {			$qry .= $and.MNU_DSH_RATE_TYPE." = '".$array[MNU_DSH_RATE_TYPE]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_ENTY_ID] != "") {			$qry .= $and.MNU_DSH_RATE_ENTY_ID." = '".$array[MNU_DSH_RATE_ENTY_ID]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_STAR] != "") {			$qry .= $and.MNU_DSH_RATE_STAR." = '".$array[MNU_DSH_RATE_STAR]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_DESCRIPTION] != "") {			$qry .= $and.MNU_DSH_RATE_DESCRIPTION." = '".$array[MNU_DSH_RATE_DESCRIPTION]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_BY_CUST] != "") {			$qry .= $and.MNU_DSH_RATE_BY_CUST." = '".$array[MNU_DSH_RATE_BY_CUST]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_CREATED_ON] != "") {			$qry .= $and.MNU_DSH_RATE_CREATED_ON." = '".$array[MNU_DSH_RATE_CREATED_ON]."'".RET;			$and = "AND".RET;		}		if(is_gt_zero_num($array["isActive"])) {			$qry .= $and.$tbl_menu_dish_rating_active_condition;;			$and = "AND".RET;		}		if(is_not_empty($array[SORT_ON]) && is_not_empty($array[SORT_BY])) {		$qry .=" ORDER BY ".$array[SORT_ON]." ".$array[SORT_BY];		}		if(is_not_empty($array[OFFSET_TITLE]) && is_not_empty($array[LIMIT_TITLE])) {			$qry_with_limit  = $qry." LIMIT ".$array[OFFSET_TITLE].",".$array[LIMIT_TITLE];		}else{			$qry_with_limit  = $qry;		}		$result = mysql_query ($qry_with_limit);		$r1 = mysql_query($qry);		if($r1){			$result_found = mysql_num_rows($r1);		}		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$isActive= 0;				//..check deactive date is not set or 0				if((is_not_empty($record[TBL_MENU_DISH_RATING_DEACTIVE_DATE])==false) || (is_gt_zero_num(strtotime($record[TBL_MENU_DISH_RATING_DEACTIVE_DATE]))== false)){					$isActive = 1; 				}else{					//..check the deactive date is greater than todays date					if(strtotime($record[TBL_MENU_DISH_RATING_DEACTIVE_DATE]) > strtotime(date(DATE_FORMAT))){						$isActive = 1;					}				}				if($isArray){					$class_object = array();					$class_object["mnu_dsh_rate_id"]=$record[MNU_DSH_RATE_ID];					$class_object["mnu_dsh_rate_type"]=$record[MNU_DSH_RATE_TYPE];					$class_object["mnu_dsh_rate_enty_id"]=$record[MNU_DSH_RATE_ENTY_ID];					$class_object["mnu_dsh_rate_star"]=$record[MNU_DSH_RATE_STAR];					$class_object["mnu_dsh_rate_description"]=$record[MNU_DSH_RATE_DESCRIPTION];					$class_object["mnu_dsh_rate_by_cust"]=$record[MNU_DSH_RATE_BY_CUST];					$class_object["mnu_dsh_rate_created_on"]=$record[MNU_DSH_RATE_CREATED_ON];					$class_object["isActive"]=$isActive;				}else{					$class_object = new tbl_menu_dish_rating();					$class_object->setmnu_dsh_rate_id($record[MNU_DSH_RATE_ID]);					$class_object->setmnu_dsh_rate_type($record[MNU_DSH_RATE_TYPE]);					$class_object->setmnu_dsh_rate_enty_id($record[MNU_DSH_RATE_ENTY_ID]);					$class_object->setmnu_dsh_rate_star($record[MNU_DSH_RATE_STAR]);					$class_object->setmnu_dsh_rate_description($record[MNU_DSH_RATE_DESCRIPTION]);					$class_object->setmnu_dsh_rate_by_cust($record[MNU_DSH_RATE_BY_CUST]);					$class_object->setmnu_dsh_rate_created_on($record[MNU_DSH_RATE_CREATED_ON]);				}				$class_objects[$record[MNU_DSH_RATE_ID]] = $class_object;			}		}		return $class_objects;	}//..End readArray	public function insert() {		if($this->getmnu_dsh_rate_id() != '') {			$qry  = "UPDATE ".TBL_MENU_DISH_RATING.RET."SET".RET."			".MNU_DSH_RATE_ID." = '".$this->getmnu_dsh_rate_id()."',".RET."			".MNU_DSH_RATE_TYPE." = '".$this->getmnu_dsh_rate_type()."',".RET."			".MNU_DSH_RATE_ENTY_ID." = '".$this->getmnu_dsh_rate_enty_id()."',".RET."			".MNU_DSH_RATE_STAR." = '".$this->getmnu_dsh_rate_star()."',".RET."			".MNU_DSH_RATE_DESCRIPTION." = '".$this->getmnu_dsh_rate_description()."',".RET."			".MNU_DSH_RATE_BY_CUST." = '".$this->getmnu_dsh_rate_by_cust()."',".RET."			".MNU_DSH_RATE_CREATED_ON." = '".$this->getmnu_dsh_rate_created_on()."'".RET.			"WHERE ".MNU_DSH_RATE_ID." = ".$this->getmnu_dsh_rate_id().RET;			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".TBL_MENU_DISH_RATING." (".RET.			"".MNU_DSH_RATE_TYPE.", ".MNU_DSH_RATE_ENTY_ID.", ".MNU_DSH_RATE_STAR.", ".MNU_DSH_RATE_DESCRIPTION.", ".MNU_DSH_RATE_BY_CUST.", ".MNU_DSH_RATE_CREATED_ON.RET.				") VALUES (".RET.			"'".$this->getmnu_dsh_rate_type()."',".RET.			"'".$this->getmnu_dsh_rate_enty_id()."',".RET.			"'".$this->getmnu_dsh_rate_star()."',".RET.			"'".$this->getmnu_dsh_rate_description()."',".RET.			"'".$this->getmnu_dsh_rate_by_cust()."',".RET.			"'".$this->getmnu_dsh_rate_created_on()."'".RET.			")".RET;			$res = mysql_query($qry);			$this->setmnu_dsh_rate_id(mysql_insert_id());		}	}//..End Insert	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".TBL_MENU_DISH_RATING.RET;		$and = "WHERE".RET;		if($array[MNU_DSH_RATE_ID] != "") {			$qry .= $and.MNU_DSH_RATE_ID." = '".$array[MNU_DSH_RATE_ID]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_TYPE] != "") {			$qry .= $and.MNU_DSH_RATE_TYPE." = '".$array[MNU_DSH_RATE_TYPE]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_ENTY_ID] != "") {			$qry .= $and.MNU_DSH_RATE_ENTY_ID." = '".$array[MNU_DSH_RATE_ENTY_ID]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_STAR] != "") {			$qry .= $and.MNU_DSH_RATE_STAR." = '".$array[MNU_DSH_RATE_STAR]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_DESCRIPTION] != "") {			$qry .= $and.MNU_DSH_RATE_DESCRIPTION." = '".$array[MNU_DSH_RATE_DESCRIPTION]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_BY_CUST] != "") {			$qry .= $and.MNU_DSH_RATE_BY_CUST." = '".$array[MNU_DSH_RATE_BY_CUST]."'".RET;			$and = "AND".RET;		}		if($array[MNU_DSH_RATE_CREATED_ON] != "") {			$qry .= $and.MNU_DSH_RATE_CREATED_ON." = '".$array[MNU_DSH_RATE_CREATED_ON]."'".RET;			$and = "AND".RET;		}		$res = mysql_query($qry);		if($res){			return OPERATION_SUCCESS;		};		return OPERATION_FAIL;	}//..End Delete	public function isAlreadyThere($mnu_dsh_rate_type ,$mnu_dsh_rate_enty_id ,$mnu_dsh_rate_star ,$mnu_dsh_rate_description ,$mnu_dsh_rate_by_cust ,$mnu_dsh_rate_created_on) {		$unique_arr = array();			//$unique_arr[MNU_DSH_RATE_ID]=$mnu_dsh_rate_id;			//$unique_arr[MNU_DSH_RATE_TYPE]=$mnu_dsh_rate_type;			//$unique_arr[MNU_DSH_RATE_ENTY_ID]=$mnu_dsh_rate_enty_id;			//$unique_arr[MNU_DSH_RATE_STAR]=$mnu_dsh_rate_star;			//$unique_arr[MNU_DSH_RATE_DESCRIPTION]=$mnu_dsh_rate_description;			//$unique_arr[MNU_DSH_RATE_BY_CUST]=$mnu_dsh_rate_by_cust;			//$unique_arr[MNU_DSH_RATE_CREATED_ON]=$mnu_dsh_rate_created_on;		if(is_not_empty($unique_arr)){			return $this->readObject($unique_arr);		}		return false;	}//..isAlreadyThere	public function create($mnu_dsh_rate_type ,$mnu_dsh_rate_enty_id ,$mnu_dsh_rate_star ,$mnu_dsh_rate_description ,$mnu_dsh_rate_by_cust ,$mnu_dsh_rate_created_on) {		if(is_not_empty($mnu_dsh_rate_type)){			if($this->isAlreadyThere($mnu_dsh_rate_type ,$mnu_dsh_rate_enty_id ,$mnu_dsh_rate_star ,$mnu_dsh_rate_description ,$mnu_dsh_rate_by_cust ,$mnu_dsh_rate_created_on)){				return OPERATION_DUPLICATE;			}else{				$this->setmnu_dsh_rate_id("");				$this->setmnu_dsh_rate_type($mnu_dsh_rate_type);				$this->setmnu_dsh_rate_enty_id($mnu_dsh_rate_enty_id);				$this->setmnu_dsh_rate_star($mnu_dsh_rate_star);				$this->setmnu_dsh_rate_description($mnu_dsh_rate_description);				$this->setmnu_dsh_rate_by_cust($mnu_dsh_rate_by_cust);				$this->setmnu_dsh_rate_created_on($mnu_dsh_rate_created_on);				$this->insert();				return $this->getmnu_dsh_rate_id();			}		}		return OPERATION_FAIL;	}//..create	public function update($mnu_dsh_rate_id, $mnu_dsh_rate_type, $mnu_dsh_rate_enty_id, $mnu_dsh_rate_star, $mnu_dsh_rate_description, $mnu_dsh_rate_by_cust, $mnu_dsh_rate_created_on) {		if(is_gt_zero_num($mnu_dsh_rate_id)){			if ($this->readObject(array(MNU_DSH_RATE_ID=>$mnu_dsh_rate_id))){				$this->setmnu_dsh_rate_type($mnu_dsh_rate_type);				$this->setmnu_dsh_rate_enty_id($mnu_dsh_rate_enty_id);				$this->setmnu_dsh_rate_star($mnu_dsh_rate_star);				$this->setmnu_dsh_rate_description($mnu_dsh_rate_description);				$this->setmnu_dsh_rate_by_cust($mnu_dsh_rate_by_cust);				$this->setmnu_dsh_rate_created_on($mnu_dsh_rate_created_on);				$this->insert();				return OPERATION_SUCCESS;			}		}		return OPERATION_FAIL;	}//..update	public function activate($mnu_dsh_rate_id){		if(is_gt_zero_num($mnu_dsh_rate_id)){			if ($this->readObject(array(MNU_DSH_RATE_ID=>$mnu_dsh_rate_id))){				$qry  = "UPDATE ".TBL_MENU_DISH_RATING.RET."SET".RET."			".TBL_MENU_DISH_RATING_DEACTIVE_DATE." = '".date(EMPTY_DATE_FORMAT)."' WHERE ".MNU_DSH_RATE_ID."={$mnu_dsh_rate_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end activate	public function deactivate($mnu_dsh_rate_id){		if(is_gt_zero_num($mnu_dsh_rate_id)){			if ($this->readObject(array(MNU_DSH_RATE_ID=>$mnu_dsh_rate_id))){				$qry  = "UPDATE ".TBL_MENU_DISH_RATING.RET."SET".RET."			".TBL_MENU_DISH_RATING_DEACTIVE_DATE." = '".date(DATE_FORMAT)."' WHERE ".MNU_DSH_RATE_ID."={$mnu_dsh_rate_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end deactivate	public static function GetInfo($mnu_dsh_rate_id) {		$info = array();		if($mnu_dsh_rate_id != ""){			$obj_tbl_menu_dish_rating = new tbl_menu_dish_rating();			if($obj_tbl_menu_dish_rating->readObject(array("mnu_dsh_rate_id"=>$mnu_dsh_rate_id))){				$info["mnu_dsh_rate_id"]=$obj_tbl_menu_dish_rating->getmnu_dsh_rate_id();				$info["mnu_dsh_rate_type"]=$obj_tbl_menu_dish_rating->getmnu_dsh_rate_type();				$info["mnu_dsh_rate_enty_id"]=$obj_tbl_menu_dish_rating->getmnu_dsh_rate_enty_id();				$info["mnu_dsh_rate_star"]=$obj_tbl_menu_dish_rating->getmnu_dsh_rate_star();				$info["mnu_dsh_rate_description"]=$obj_tbl_menu_dish_rating->getmnu_dsh_rate_description();				$info["mnu_dsh_rate_by_cust"]=$obj_tbl_menu_dish_rating->getmnu_dsh_rate_by_cust();				$info["mnu_dsh_rate_created_on"]=$obj_tbl_menu_dish_rating->getmnu_dsh_rate_created_on();				$info["isActive"] = 0;				//..check deactive date is not set or 0				if((is_not_empty($obj_tbl_menu_dish_rating->gettbl_menu_dish_rating_deactive_date())==false)  || (is_gt_zero_num(strtotime($obj_tbl_menu_dish_rating->gettbl_menu_dish_rating_deactive_date()))== false)){					$info["isActive"] = 1;				}else{					//..check the deactive date is greater than todays date					if(strtotime($obj_tbl_menu_dish_rating->gettbl_menu_dish_rating_deactive_date()) > strtotime(date(DATE_FORMAT))){						$info["isActive"] = 1;					}				}			}		unset($obj_tbl_menu_dish_rating);		return $info;		}	}//..End GetInfo	public static function GetFields($data){		global $tbl_menu_dish_rating_active_condition;		$arr = array();		if(is_not_empty($data)){			$qry ="SELECT ".$data['key_field'].",".$data['value_field']." FROM ".TBL_MENU_DISH_RATING."";			if(is_gt_zero_num($data['isActive'])){				$qry .= " WHERE ".$tbl_menu_dish_rating_active_condition;			}			$res = mysql_query($qry); 			if($res){				while($row=mysql_fetch_assoc($res)){					$arr[$row[$data['key_field']]] = $row[$data['value_field']];				}			}		}		return $arr;	}//.. End of GetFields}//..End tbl_menu_dish_rating?>