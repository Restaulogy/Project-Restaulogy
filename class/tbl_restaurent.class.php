<?php/**********************************************************************tbl_restaurent.class.phpGenerated by STRUCTY 2013.05.24 10:21:11.Copyright 2011 Structy, Frédéric Aebi. All rights reserved.**********************************************************************/define('TBL_RESTAURENT', 'tbl_restaurent'); define('RESTAURENT_ID', 'restaurent_id'); define('RESTAURENT_OWNER', 'restaurent_owner'); define('RESTAURENT_NAME', 'restaurent_name'); define('RESTAURENT_ADDRESS', 'restaurent_address'); define('RESTAURENT_COUNTRY', 'restaurent_country'); define('RESTAURENT_STATE', 'restaurent_state'); define('RESTAURENT_CITY', 'restaurent_city'); define('RESTAURENT_ZIP', 'restaurent_zip'); define('RESTAURENT_PHONE_1', 'restaurent_phone_1'); define('RESTAURENT_PHONE_2', 'restaurent_phone_2'); define('RESTAURENT_FAX', 'restaurent_fax'); define('RESTAURENT_EMAIL', 'restaurent_email'); define('RESTAURENT_WEBSITE', 'restaurent_website'); define('RESTAURENT_DESCRIPTION', 'restaurent_description');define('RESTAURENT_IMG','restaurent_img');define('RESTAURENT_LAT','restaurent_lat');define('RESTAURENT_LNG','restaurent_lng');define('RESTAURENT_IS_PAYPAL', 'restaurent_is_paypal');  define('RESTAURENT_PAYPAL_EMAIL', 'restaurent_paypal_email'); define('RESTAURENT_START_DATE', 'restaurent_start_date'); define('RESTAURENT_END_DATE', 'restaurent_end_date'); //..new fields added for allow/disallow the online orderingdefine('RESTAURENT_ONLINE_ORD_START', 'restaurent_online_ord_start'); define('RESTAURENT_ONLINE_ORD_END', 'restaurent_online_ord_end'); define('RESTAURENT_ETHOR_STORE', 'restaurent_ethor_store'); define('RESTAURENT_FDBK_AWARD_PTS', 'restaurent_fdbk_award_pts');define('RESTAURENT_RWD_MULTIPLIER', 'restaurent_rwd_multiplier');define('RESTAURENT_GROUP', 'restaurent_group');define('TBL_RESTAURENT_ACTIVE_DATE',  RESTAURENT_START_DATE);define('TBL_RESTAURENT_DEACTIVE_DATE',  RESTAURENT_END_DATE);$tbl_restaurent_active_condition= ' ('.TBL_RESTAURENT_DEACTIVE_DATE.' is NULL OR '.TBL_RESTAURENT_DEACTIVE_DATE.' = 0 OR '.TBL_RESTAURENT_DEACTIVE_DATE.' > CURDATE( )) ';class tbl_restaurent {	private $restaurent_id;	private $restaurent_owner;	private $restaurent_name;	private $restaurent_address;	private $restaurent_country;	private $restaurent_state;	private $restaurent_city;	private $restaurent_zip;	private $restaurent_phone_1;	private $restaurent_phone_2;	private $restaurent_fax;		private $restaurent_email;	private $restaurent_website;	private $restaurent_description;		private $restaurent_is_paypal; 	private $restaurent_paypal_email;	private $restaurent_img;	private $restaurent_lat;	private $restaurent_lng;	private $restaurent_start_date;	private $restaurent_end_date;		private $restaurent_online_ord_start;	private $restaurent_online_ord_end;		private $restaurent_ethor_store;	private $restaurent_fdbk_award_pts;	private $restaurent_rwd_multiplier;	private $restaurent_group;		private $tbl_restaurent_active_date;	private $tbl_restaurent_deactive_date;	public function setrestaurent_id($pArg='0') {$this->restaurent_id=$pArg;}	public function setrestaurent_owner($pArg='0') {$this->restaurent_owner=$pArg;}	public function setrestaurent_name($pArg='0') {$this->restaurent_name=$pArg;}	public function setrestaurent_address($pArg='0') {$this->restaurent_address=$pArg;}	public function setrestaurent_country($pArg='0') {$this->restaurent_country=$pArg;}	public function setrestaurent_state($pArg='0') {$this->restaurent_state=$pArg;}	public function setrestaurent_city($pArg='0') {$this->restaurent_city=$pArg;}	public function setrestaurent_zip($pArg='0') {$this->restaurent_zip=$pArg;}	public function setrestaurent_phone_1($pArg='0') {$this->restaurent_phone_1=$pArg;}	public function setrestaurent_phone_2($pArg='0') {$this->restaurent_phone_2=$pArg;}	public function setrestaurent_fax($pArg='0') {$this->restaurent_fax=$pArg;}		public function setrestaurent_email($pArg='0') {$this->restaurent_email=$pArg;}	public function setrestaurent_website($pArg='0') {$this->restaurent_website=$pArg;}	public function setrestaurent_description($pArg='0') {$this->restaurent_description=$pArg;}		public function setrestaurent_is_paypal($pArg='0') {$this->restaurent_is_paypal=$pArg;}	public function setrestaurent_paypal_email($pArg='0') {$this->restaurent_paypal_email=$pArg;}	public function setrestaurent_img($pArg='0') {$this->restaurent_img=$pArg;}	public function setrestaurent_lat($pArg='0') {$this->restaurent_lat=$pArg;}	public function setrestaurent_lng($pArg='0') {$this->restaurent_lng=$pArg;}		public function setrestaurent_start_date($pArg='0') {$this->restaurent_start_date=$pArg;}	public function setrestaurent_end_date($pArg='0') {$this->restaurent_end_date=$pArg;}		public function setrestaurent_online_ord_start($pArg='0') {$this->restaurent_online_ord_start=$pArg;}	public function setrestaurent_online_ord_end($pArg='0') {$this->restaurent_online_ord_end=$pArg;}		public function setrestaurent_ethor_store($pArg='0') {$this->restaurent_ethor_store=$pArg;}	public function setrestaurent_fdbk_award_pts($pArg='0') {$this->restaurent_fdbk_award_pts=$pArg;}	public function setrestaurent_rwd_multiplier($pArg='0') {$this->restaurent_rwd_multiplier=$pArg;}		public function setrestaurent_group($pArg='0') {$this->restaurent_group=$pArg;}			public function settbl_restaurent_active_date($pArg='0') {$this->tbl_restaurent_active_date=$pArg;}	public function settbl_restaurent_deactive_date($pArg='0') {$this->tbl_restaurent_deactive_date=$pArg;}	public function getrestaurent_id() {return $this->restaurent_id;}	public function getrestaurent_owner() {return $this->restaurent_owner;}	public function getrestaurent_name() {return $this->restaurent_name;}	public function getrestaurent_address() {return $this->restaurent_address;}	public function getrestaurent_country() {return $this->restaurent_country;}	public function getrestaurent_state() {return $this->restaurent_state;}	public function getrestaurent_city() {return $this->restaurent_city;}	public function getrestaurent_zip() {return $this->restaurent_zip;}	public function getrestaurent_phone_1() {return $this->restaurent_phone_1;}	public function getrestaurent_phone_2() {return $this->restaurent_phone_2;}	public function getrestaurent_fax() {return $this->restaurent_fax;}		public function getrestaurent_email() { return $this->restaurent_email;}	public function getrestaurent_website() { return $this->restaurent_website;}	public function getrestaurent_description(){ return $this->restaurent_description;}		public function getrestaurent_is_paypal() {return $this->restaurent_is_paypal;}	public function getrestaurent_paypal_email() {return $this->restaurent_paypal_email;}	public function getrestaurent_img() {return $this->restaurent_img;}	public function getrestaurent_lat() {return $this->restaurent_lat;}	public function getrestaurent_lng() {return $this->restaurent_lng;}	public function getrestaurent_start_date() {return $this->restaurent_start_date;}	public function getrestaurent_end_date() {return $this->restaurent_end_date;}		public function getrestaurent_online_ord_start() {return $this->restaurent_online_ord_start;}	public function getrestaurent_online_ord_end() {return $this->restaurent_online_ord_end;}		public function getrestaurent_ethor_store() {return $this->restaurent_ethor_store;}	public function getrestaurent_fdbk_award_pts() {return $this->restaurent_fdbk_award_pts;}		public function getrestaurent_rwd_multiplier() {return $this->restaurent_rwd_multiplier;}	public function getrestaurent_group() {return $this->restaurent_group;}		public function gettbl_restaurent_active_date() {return $this->tbl_restaurent_active_date;}	public function gettbl_restaurent_deactive_date() {return $this->tbl_restaurent_deactive_date;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_RESTAURENT.RET;		$and = "WHERE".RET;		if($array[RESTAURENT_ETHOR_STORE] != "") {			$qry .= $and.RESTAURENT_ETHOR_STORE." = '".$array[RESTAURENT_ETHOR_STORE]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_ID] != "") {			$qry .= $and.RESTAURENT_ID." = '".$array[RESTAURENT_ID]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_OWNER] != "") {			$qry .= $and.RESTAURENT_OWNER." = '".$array[RESTAURENT_OWNER]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_NAME] != "") {			$qry .= $and.RESTAURENT_NAME." = '".$array[RESTAURENT_NAME]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_ADDRESS] != "") {			$qry .= $and.RESTAURENT_ADDRESS." = '".$array[RESTAURENT_ADDRESS]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_COUNTRY] != "") {			$qry .= $and.RESTAURENT_COUNTRY." = '".$array[RESTAURENT_COUNTRY]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_STATE] != "") {			$qry .= $and.RESTAURENT_STATE." = '".$array[RESTAURENT_STATE]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_CITY] != "") {			$qry .= $and.RESTAURENT_CITY." = '".$array[RESTAURENT_CITY]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_ZIP] != "") {			$qry .= $and.RESTAURENT_ZIP." = '".$array[RESTAURENT_ZIP]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_PHONE_1] != "") {			$qry .= $and.RESTAURENT_PHONE_1." = '".$array[RESTAURENT_PHONE_1]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_PHONE_2] != "") {			$qry .= $and.RESTAURENT_PHONE_2." = '".$array[RESTAURENT_PHONE_2]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_EMAIL] != "") {			$qry .= $and.RESTAURENT_EMAIL." = '".$array[RESTAURENT_EMAIL]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_FAX] != "") {			$qry .= $and.RESTAURENT_FAX." = '".$array[RESTAURENT_FAX]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_WEBSITE] != "") {			$qry .= $and.RESTAURENT_WEBSITE." = '".$array[RESTAURENT_WEBSITE]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_DESCRIPTION] != "") {			$qry .= $and.RESTAURENT_DESCRIPTION." = '".$array[RESTAURENT_DESCRIPTION]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_IS_PAYPAL] != "") {			$qry .= $and.RESTAURENT_IS_PAYPAL." = '".$array[RESTAURENT_IS_PAYPAL]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_PAYPAL_EMAIL] != "") {			$qry .= $and.RESTAURENT_PAYPAL_EMAIL." = '".$array[RESTAURENT_PAYPAL_EMAIL]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_FDBK_AWARD_PTS] != "") {			$qry .= $and.RESTAURENT_FDBK_AWARD_PTS." = '".$array[RESTAURENT_FDBK_AWARD_PTS]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_RWD_MULTIPLIER] != "") {			$qry .= $and.RESTAURENT_RWD_MULTIPLIER." = '".$array[RESTAURENT_RWD_MULTIPLIER]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_GROUP] != "") {			$qry .= $and.RESTAURENT_GROUP." = '".$array[RESTAURENT_GROUP]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_START_DATE] != "") {			$qry .= $and.RESTAURENT_START_DATE." = '".$array[RESTAURENT_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_END_DATE] != "") {			$qry .= $and.RESTAURENT_END_DATE." = '".$array[RESTAURENT_END_DATE]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_ONLINE_ORD_START] != "") {			$qry .= $and.RESTAURENT_ONLINE_ORD_START." = '".$array[RESTAURENT_ONLINE_ORD_START]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_ONLINE_ORD_END] != "") {			$qry .= $and.RESTAURENT_ONLINE_ORD_END." = '".$array[RESTAURENT_ONLINE_ORD_END]."'".RET;			$and = "AND".RET;		} 	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				 				$this->setrestaurent_id($record[RESTAURENT_ID]);				$this->setrestaurent_owner($record[RESTAURENT_OWNER]);				$this->setrestaurent_name($record[RESTAURENT_NAME]);				$this->setrestaurent_address($record[RESTAURENT_ADDRESS]);				$this->setrestaurent_country($record[RESTAURENT_COUNTRY]);				$this->setrestaurent_state($record[RESTAURENT_STATE]);				$this->setrestaurent_city($record[RESTAURENT_CITY]);				$this->setrestaurent_zip($record[RESTAURENT_ZIP]);				$this->setrestaurent_phone_1($record[RESTAURENT_PHONE_1]);				$this->setrestaurent_phone_2($record[RESTAURENT_PHONE_2]);				$this->setrestaurent_fax($record[RESTAURENT_FAX]);								$this->setrestaurent_email($record[RESTAURENT_EMAIL]);				$this->setrestaurent_website($record[RESTAURENT_WEBSITE]);				$this->setrestaurent_description($record[RESTAURENT_DESCRIPTION]);								$this->setrestaurent_is_paypal($record[RESTAURENT_IS_PAYPAL]);				$this->setrestaurent_paypal_email($record[RESTAURENT_PAYPAL_EMAIL]);				$this->setrestaurent_start_date($record[RESTAURENT_START_DATE]);				$this->setrestaurent_end_date($record[RESTAURENT_END_DATE]);								$this->setrestaurent_online_ord_start($record[RESTAURENT_ONLINE_ORD_START]);				$this->setrestaurent_online_ord_end($record[RESTAURENT_ONLINE_ORD_END]);								$this->setrestaurent_img($record[RESTAURENT_IMG]);				$this->setrestaurent_lat($record[RESTAURENT_LAT]);				$this->setrestaurent_lng($record[RESTAURENT_LNG]);								$this->setrestaurent_ethor_store($record[RESTAURENT_ETHOR_STORE]);				$this->setrestaurent_fdbk_award_pts($record[RESTAURENT_FDBK_AWARD_PTS]);								$this->setrestaurent_rwd_multiplier($record[RESTAURENT_RWD_MULTIPLIER]);				$this->setrestaurent_group($record[RESTAURENT_GROUP]);								$this->settbl_restaurent_active_date($record[TBL_RESTAURENT_ACTIVE_DATE]);				$this->settbl_restaurent_deactive_date($record[TBL_RESTAURENT_DEACTIVE_DATE]);				return true;			}		}	}	public static function readArray($array = array(),&$result_found=0,$isArray=1) {		global $tbl_restaurent_active_condition;					$_usr_lat=18.501059;		$_usr_long=73.862686;				if($array['usr_lat'] != "") {			$_usr_lat=$array['usr_lat'];		}		if($array['usr_long'] != "") {			$_usr_long=$array['usr_long'];		}		$qry = "SELECT *, 		if( ((curtime( ) > `restaurent_online_ord_start` ) 		&& ( curtime( ) < `restaurent_online_ord_end` )), 1, 0) `is_online`,		(		      6371 * acos (		      cos ( radians({$_usr_lat}) )		      * cos( radians( `restaurent_lat` ) )		      * cos( radians( `restaurent_lng` ) - radians({$_usr_long}) )		      + sin ( radians({$_usr_lat}) )		      * sin( radians( `restaurent_lat` ) )		    )		) AS `distance` ".RET."FROM ".TBL_RESTAURENT.RET;		$and = "WHERE".RET;						if($array[RESTAURENT_ETHOR_STORE] != "") {			$qry .= $and.RESTAURENT_ETHOR_STORE." = '".$array[RESTAURENT_ETHOR_STORE]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_ID] != "") {			$qry .= $and.RESTAURENT_ID." = '".$array[RESTAURENT_ID]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_OWNER] != "") {			$qry .= $and.RESTAURENT_OWNER." = '".$array[RESTAURENT_OWNER]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_NAME] != "") {			$qry .= $and.RESTAURENT_NAME." = '".$array[RESTAURENT_NAME]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_ADDRESS] != "") {			$qry .= $and.RESTAURENT_ADDRESS." = '".$array[RESTAURENT_ADDRESS]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_COUNTRY] != "") {			$qry .= $and.RESTAURENT_COUNTRY." = '".$array[RESTAURENT_COUNTRY]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_STATE] != "") {			$qry .= $and.RESTAURENT_STATE." = '".$array[RESTAURENT_STATE]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_CITY] != "") {			$qry .= $and.RESTAURENT_CITY." = '".$array[RESTAURENT_CITY]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_ZIP] != "") {			$qry .= $and.RESTAURENT_ZIP." = '".$array[RESTAURENT_ZIP]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_PHONE_1] != "") {			$qry .= $and.RESTAURENT_PHONE_1." = '".$array[RESTAURENT_PHONE_1]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_PHONE_2] != "") {			$qry .= $and.RESTAURENT_PHONE_2." = '".$array[RESTAURENT_PHONE_2]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_EMAIL] != "") {			$qry .= $and.RESTAURENT_EMAIL." = '".$array[RESTAURENT_EMAIL]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_FAX] != "") {			$qry .= $and.RESTAURENT_FAX." LIKE '".$array[RESTAURENT_FAX]."%'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_WEBSITE] != "") {			$qry .= $and.RESTAURENT_WEBSITE." = '".$array[RESTAURENT_WEBSITE]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_DESCRIPTION] != "") {			$qry .= $and.RESTAURENT_DESCRIPTION." = '".$array[RESTAURENT_DESCRIPTION]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_IS_PAYPAL] != "") {			$qry .= $and.RESTAURENT_IS_PAYPAL." = '".$array[RESTAURENT_IS_PAYPAL]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_PAYPAL_EMAIL] != "") {			$qry .= $and.RESTAURENT_PAYPAL_EMAIL." = '".$array[RESTAURENT_PAYPAL_EMAIL]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_FDBK_AWARD_PTS] != "") {			$qry .= $and.RESTAURENT_FDBK_AWARD_PTS." = '".$array[RESTAURENT_FDBK_AWARD_PTS]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_RWD_MULTIPLIER] != "") {			$qry .= $and.RESTAURENT_RWD_MULTIPLIER." = '".$array[RESTAURENT_RWD_MULTIPLIER]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_GROUP] != "") {			$qry .= $and.RESTAURENT_GROUP." = '".$array[RESTAURENT_GROUP]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_START_DATE] != "") {			$qry .= $and.RESTAURENT_START_DATE." = '".$array[RESTAURENT_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_END_DATE] != "") {			$qry .= $and.RESTAURENT_END_DATE." = '".$array[RESTAURENT_END_DATE]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_ONLINE_ORD_START] != "") {			$qry .= $and.RESTAURENT_ONLINE_ORD_START." = '".$array[RESTAURENT_ONLINE_ORD_START]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_ONLINE_ORD_END] != "") {			$qry .= $and.RESTAURENT_ONLINE_ORD_END." = '".$array[RESTAURENT_ONLINE_ORD_END]."'".RET;			$and = "AND".RET;		}				if($array['keyword'] != "") { 			$qry .= $and.RESTAURENT_NAME." LIKE '%".$array['keyword']."%' OR ".RESTAURENT_ADDRESS." LIKE '%".$array['keyword']."%' OR ".RESTAURENT_DESCRIPTION." LIKE '%".$array['keyword']."%' OR ".RESTAURENT_WEBSITE." LIKE '%".$array['keyword']."%'".RET;			$and = "AND".RET;		}		if(is_gt_zero_num($array["isActive"])) {			$qry .= $and.$tbl_restaurent_active_condition;;			$and = "AND".RET;		}				if(is_gt_zero_num($array["isActiveIncRestlgy"])) {			$qry .= $and."((`".RESTAURENT_ID."`=16) OR ({$tbl_restaurent_active_condition}))";			$and = "AND".RET;		}		if(is_not_empty($array[SORT_ON]) && is_not_empty($array[SORT_BY])) {		$qry .=" ORDER BY ".$array[SORT_ON]." ".$array[SORT_BY];		}		if(is_not_empty($array[OFFSET_TITLE]) && is_not_empty($array[LIMIT_TITLE])) {			$qry_with_limit  = $qry." LIMIT ".$array[OFFSET_TITLE].",".$array[LIMIT_TITLE];		}else{			$qry_with_limit  = $qry;		}				//echo $qry_with_limit;				$result = mysql_query ($qry_with_limit);		$r1 = mysql_query($qry);		if($r1){			$result_found = mysql_num_rows($r1);		}		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				$isActive= 0;				//..check deactive date is not set or 0				if((is_not_empty($record[TBL_RESTAURENT_DEACTIVE_DATE])==false) || (is_gt_zero_num(strtotime($record[TBL_RESTAURENT_DEACTIVE_DATE]))== false)){					$isActive = 1; 				}else{					//..check the deactive date is greater than todays date					if(strtotime($record[TBL_RESTAURENT_DEACTIVE_DATE]) > strtotime(date(DATE_FORMAT))){						$isActive = 1;					}				}				if($isArray){					$class_object = array();					$class_object["restaurent_id"]=$record[RESTAURENT_ID];					$class_object["restaurent_owner"]=$record[RESTAURENT_OWNER];					$class_object["restaurent_name"]=$record[RESTAURENT_NAME];					$class_object["restaurent_address"]=$record[RESTAURENT_ADDRESS];					$class_object["restaurent_country"]=$record[RESTAURENT_COUNTRY];					$class_object["restaurent_state"]=$record[RESTAURENT_STATE];					$class_object["restaurent_city"]=$record[RESTAURENT_CITY];										$class_object["restaurent_city_nm"]=getCityName($record[RESTAURENT_CITY]);															$class_object["restaurent_zip"]=$record[RESTAURENT_ZIP];					$class_object["restaurent_phone_1"]=$record[RESTAURENT_PHONE_1];					$class_object["restaurent_phone_2"]=$record[RESTAURENT_PHONE_2];					$class_object["restaurent_fax"]=$record[RESTAURENT_FAX];										$class_object["restaurent_email"]=$record[RESTAURENT_EMAIL];					$class_object["restaurent_website"]=$record[RESTAURENT_WEBSITE];					$class_object["restaurent_description"]=$record[RESTAURENT_DESCRIPTION];										$class_object["restaurent_is_paypal"]=$record[RESTAURENT_IS_PAYPAL];					$class_object["restaurent_paypal_email"]=$record[RESTAURENT_PAYPAL_EMAIL];					$class_object["restaurent_start_date"]=$record[RESTAURENT_START_DATE];					$class_object["restaurent_end_date"]=$record[RESTAURENT_END_DATE];										$class_object["restaurent_online_ord_start"]=$record[RESTAURENT_ONLINE_ORD_START];					$class_object["restaurent_online_ord_end"]=$record[RESTAURENT_ONLINE_ORD_END];					$class_object[RESTAURENT_IMG] = $record[RESTAURENT_IMG];					$class_object[RESTAURENT_LAT] = $record[RESTAURENT_LAT];					$class_object[RESTAURENT_LNG] = $record[RESTAURENT_LNG];										$class_object[RESTAURENT_ETHOR_STORE] = $record[RESTAURENT_ETHOR_STORE];					$class_object[RESTAURENT_FDBK_AWARD_PTS]=$record[RESTAURENT_FDBK_AWARD_PTS];										$class_object[RESTAURENT_RWD_MULTIPLIER]=$record[RESTAURENT_RWD_MULTIPLIER];					$class_object[RESTAURENT_GROUP]=$record[RESTAURENT_GROUP];										$class_object['restaurent_is_online'] = $record['is_online'];					$class_object['restaurent_img_url']= WWWROOT.'images/restaurant/'.$record[RESTAURENT_ID].'.'.$record[RESTAURENT_IMG];										if($array['_get_me_offer'] != "") { 						$class_object['rest_free_offer']=_getRestFreeRwd($record[RESTAURENT_ID]);					}					$class_object['distance'] = $record['distance'];					$class_object["isActive"]=$isActive;				}else{					$class_object = new tbl_restaurent();					$class_object->setrestaurent_id($record[RESTAURENT_ID]);					$class_object->setrestaurent_owner($record[RESTAURENT_OWNER]);					$class_object->setrestaurent_name($record[RESTAURENT_NAME]);					$class_object->setrestaurent_address($record[RESTAURENT_ADDRESS]);					$class_object->setrestaurent_country($record[RESTAURENT_COUNTRY]);					$class_object->setrestaurent_state($record[RESTAURENT_STATE]);					$class_object->setrestaurent_city($record[RESTAURENT_CITY]);					$class_object->setrestaurent_zip($record[RESTAURENT_ZIP]);					$class_object->setrestaurent_phone_1($record[RESTAURENT_PHONE_1]);					$class_object->setrestaurent_phone_2($record[RESTAURENT_PHONE_2]);					$class_object->setrestaurent_fax($record[RESTAURENT_FAX]);										$class_object->setrestaurent_email($record[RESTAURENT_EMAIL]);					$class_object->setrestaurent_website($record[RESTAURENT_WEBSITE]);					$class_object->setrestaurent_description($record[RESTAURENT_DESCRIPTION]);										$class_object->setrestaurent_is_paypal($record[RESTAURENT_IS_PAYPAL]);					$class_object->setrestaurent_paypal_email($record[RESTAURENT_PAYPAL_EMAIL]);					$class_object->setrestaurent_img($record[RESTAURENT_IMG]); 					$class_object->setrestaurent_lat($record[RESTAURENT_LAT]);					$class_object->setrestaurent_lng($record[RESTAURENT_LNG]);										$class_object->setrestaurent_ethor_store($record[RESTAURENT_ETHOR_STORE]);					$class_object->setrestaurent_fdbk_award_pts($record[RESTAURENT_FDBK_AWARD_PTS]);										$class_object->setrestaurent_rwd_multiplier($record[RESTAURENT_RWD_MULTIPLIER]);					$class_object->setrestaurent_group($record[RESTAURENT_GROUP]);										$class_object->setrestaurent_start_date($record[RESTAURENT_START_DATE]);										$class_object->setrestaurent_end_date($record[RESTAURENT_END_DATE]);										$class_object->setrestaurent_online_ord_start($record[RESTAURENT_ONLINE_ORD_START]);					$class_object->setrestaurent_online_ord_end($record[RESTAURENT_ONLINE_ORD_END]);				}				if(is_gt_zero_num($array['_without_ids'])){					$class_objects[] = $class_object;				}else{					$class_objects[$record[RESTAURENT_ID]] = $class_object;				}							}		}		return $class_objects;	}//..End readArray	public function insert() {		if($this->getrestaurent_id() != '') {			$qry  = "UPDATE ".TBL_RESTAURENT.RET."SET".RET."			".RESTAURENT_ID." = '".$this->getrestaurent_id()."',".RET."			".RESTAURENT_OWNER." = '".$this->getrestaurent_owner()."',".RET."			".RESTAURENT_NAME." = '".$this->getrestaurent_name()."',".RET."			".RESTAURENT_ADDRESS." = '".$this->getrestaurent_address()."',".RET."			".RESTAURENT_COUNTRY." = '".$this->getrestaurent_country()."',".RET."			".RESTAURENT_STATE." = '".$this->getrestaurent_state()."',".RET."			".RESTAURENT_CITY." = '".$this->getrestaurent_city()."',".RET."			".RESTAURENT_ZIP." = '".$this->getrestaurent_zip()."',".RET."			".RESTAURENT_FAX." = '".$this->getrestaurent_fax()."',".RET."			".RESTAURENT_PHONE_1." = '".$this->getrestaurent_phone_1()."',".RET."			".RESTAURENT_PHONE_2." = '".$this->getrestaurent_phone_2()."',".RET."				".RESTAURENT_EMAIL." = '".$this->getrestaurent_email()."',".RET."			".RESTAURENT_WEBSITE." = '".$this->getrestaurent_website()."',".RET."			".RESTAURENT_DESCRIPTION." = '".$this->getrestaurent_description()."',".RET."									".RESTAURENT_IS_PAYPAL." = '".$this->getrestaurent_is_paypal()."',".RET."			".RESTAURENT_PAYPAL_EMAIL." = '".$this->getrestaurent_paypal_email()."',".RET."			".RESTAURENT_IMG." = '".$this->getrestaurent_img()."',".RET."			".RESTAURENT_LNG." = '".$this->getrestaurent_lng()."',".RET."			".RESTAURENT_LAT." = '".$this->getrestaurent_lat()."',".RET."						".RESTAURENT_ETHOR_STORE." = '".$this->getrestaurent_ethor_store()."',".RET."			".RESTAURENT_FDBK_AWARD_PTS." = '".$this->getrestaurent_fdbk_award_pts()."',".RET."						".RESTAURENT_RWD_MULTIPLIER." = '".$this->getrestaurent_rwd_multiplier()."',".RET."			".RESTAURENT_GROUP." = '".$this->getrestaurent_group()."',".RET."								".RESTAURENT_START_DATE." = '".$this->getrestaurent_start_date()."',".RET."			".RESTAURENT_END_DATE." = '".$this->getrestaurent_end_date()."',".RET."			".RESTAURENT_ONLINE_ORD_START." = '".$this->getrestaurent_online_ord_start()."',".RET."			".RESTAURENT_ONLINE_ORD_END." = '".$this->getrestaurent_online_ord_end()."'".RET.			"WHERE ".RESTAURENT_ID." = ".$this->getrestaurent_id().RET;		 			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".TBL_RESTAURENT." (".RET.			"".RESTAURENT_OWNER.", ".RESTAURENT_NAME.", ".RESTAURENT_ADDRESS.", ".RESTAURENT_COUNTRY.", ".RESTAURENT_STATE.", ".RESTAURENT_CITY.", ".RESTAURENT_ZIP.", ".RESTAURENT_PHONE_1.", ".RESTAURENT_PHONE_2.",".RESTAURENT_EMAIL.",".RESTAURENT_FAX.",".RESTAURENT_WEBSITE.",".RESTAURENT_DESCRIPTION.",".RESTAURENT_IS_PAYPAL.", ".RESTAURENT_PAYPAL_EMAIL.", ".RESTAURENT_START_DATE.", ".RESTAURENT_END_DATE.",".RESTAURENT_IMG.", ".RESTAURENT_LNG.",".RESTAURENT_LAT.",".RESTAURENT_ETHOR_STORE.",".RESTAURENT_FDBK_AWARD_PTS.",".RESTAURENT_RWD_MULTIPLIER.",".RESTAURENT_GROUP.",".RESTAURENT_ONLINE_ORD_START.", ".RESTAURENT_ONLINE_ORD_END.				") VALUES (".RET.			"'".$this->getrestaurent_owner()."',".RET.			"'".$this->getrestaurent_name()."',".RET.			"'".$this->getrestaurent_address()."',".RET.			"'".$this->getrestaurent_country()."',".RET.			"'".$this->getrestaurent_state()."',".RET.			"'".$this->getrestaurent_city()."',".RET.			"'".$this->getrestaurent_zip()."',".RET.			"'".$this->getrestaurent_phone_1()."',".RET.			"'".$this->getrestaurent_phone_2()."',".RET.						"'".$this->getrestaurent_email()."',".RET.			"'".$this->getrestaurent_fax()."',".RET.			"'".$this->getrestaurent_website()."',".RET.			"'".$this->getrestaurent_description()."',".RET.						"'".$this->getrestaurent_is_paypal()."',".RET.			"'".$this->getrestaurent_paypal_email()."',".RET.			"'".$this->getrestaurent_start_date()."',".RET.			"'".$this->getrestaurent_end_date()."',".RET.			"'".$this->getrestaurent_img()."',".RET.			"'".$this->getrestaurent_lng()."',".RET.			"'".$this->getrestaurent_lat()."',".RET.						"'".$this->getrestaurent_ethor_store()."',".RET.			"'".$this->getrestaurent_fdbk_award_pts()."',".RET.						"'".$this->getrestaurent_rwd_multiplier()."',".RET.			"'".$this->getrestaurent_group()."',".RET.						"'".$this->getrestaurent_online_ord_start()."',".RET.			"'".$this->getrestaurent_online_ord_end()."'".RET.						")".RET;			//echo "$qry";			//exit;			$res = mysql_query($qry);			$this->setrestaurent_id(mysql_insert_id());		}	}//..End Insert	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".TBL_RESTAURENT.RET;		$and = "WHERE".RET;				if($array[RESTAURENT_ETHOR_STORE] != "") {			$qry .= $and.RESTAURENT_ETHOR_STORE." = '".$array[RESTAURENT_ETHOR_STORE]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_ID] != "") {			$qry .= $and.RESTAURENT_ID." = '".$array[RESTAURENT_ID]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_OWNER] != "") {			$qry .= $and.RESTAURENT_OWNER." = '".$array[RESTAURENT_OWNER]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_NAME] != "") {			$qry .= $and.RESTAURENT_NAME." = '".$array[RESTAURENT_NAME]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_ADDRESS] != "") {			$qry .= $and.RESTAURENT_ADDRESS." = '".$array[RESTAURENT_ADDRESS]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_COUNTRY] != "") {			$qry .= $and.RESTAURENT_COUNTRY." = '".$array[RESTAURENT_COUNTRY]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_STATE] != "") {			$qry .= $and.RESTAURENT_STATE." = '".$array[RESTAURENT_STATE]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_CITY] != "") {			$qry .= $and.RESTAURENT_CITY." = '".$array[RESTAURENT_CITY]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_ZIP] != "") {			$qry .= $and.RESTAURENT_ZIP." = '".$array[RESTAURENT_ZIP]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_PHONE_1] != "") {			$qry .= $and.RESTAURENT_PHONE_1." = '".$array[RESTAURENT_PHONE_1]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_PHONE_2] != "") {			$qry .= $and.RESTAURENT_PHONE_2." = '".$array[RESTAURENT_PHONE_2]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_EMAIL] != "") {			$qry .= $and.RESTAURENT_EMAIL." = '".$array[RESTAURENT_EMAIL]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_FDBK_AWARD_PTS] != "") {			$qry .= $and.RESTAURENT_FDBK_AWARD_PTS." = '".$array[RESTAURENT_FDBK_AWARD_PTS]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_WEBSITE] != "") {			$qry .= $and.RESTAURENT_WEBSITE." = '".$array[RESTAURENT_WEBSITE]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_DESCRIPTION] != "") {			$qry .= $and.RESTAURENT_DESCRIPTION." = '".$array[RESTAURENT_DESCRIPTION]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_IS_PAYPAL] != "") {			$qry .= $and.RESTAURENT_IS_PAYPAL." = '".$array[RESTAURENT_IS_PAYPAL]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_PAYPAL_EMAIL] != "") {			$qry .= $and.RESTAURENT_PAYPAL_EMAIL." = '".$array[RESTAURENT_PAYPAL_EMAIL]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_START_DATE] != "") {			$qry .= $and.RESTAURENT_START_DATE." = '".$array[RESTAURENT_START_DATE]."'".RET;			$and = "AND".RET;		}		if($array[RESTAURENT_END_DATE] != "") {			$qry .= $and.RESTAURENT_END_DATE." = '".$array[RESTAURENT_END_DATE]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_ONLINE_ORD_START] != "") {			$qry .= $and.RESTAURENT_ONLINE_ORD_START." = '".$array[RESTAURENT_ONLINE_ORD_START]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_ONLINE_ORD_END] != "") {			$qry .= $and.RESTAURENT_ONLINE_ORD_END." = '".$array[RESTAURENT_ONLINE_ORD_END]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_RWD_MULTIPLIER] != "") {			$qry .= $and.RESTAURENT_RWD_MULTIPLIER." = '".$array[RESTAURENT_RWD_MULTIPLIER]."'".RET;			$and = "AND".RET;		}				if($array[RESTAURENT_GROUP] != "") {			$qry .= $and.RESTAURENT_GROUP." = '".$array[RESTAURENT_GROUP]."'".RET;			$and = "AND".RET;		}		$res = mysql_query($qry);		if($res){			return OPERATION_SUCCESS;		};		return OPERATION_FAIL;	}//..End Delete	public function isAlreadyThere($restaurent_owner ,$restaurent_name ,$restaurent_address ,$restaurent_country ,$restaurent_state ,$restaurent_city ,$restaurent_zip ,$restaurent_phone_1 ,$restaurent_phone_2 ,$restaurent_email,$restaurent_website,$restaurent_description,$restaurent_is_paypal ,$restaurent_paypal_email  ) {		$unique_arr = array();			//$unique_arr[RESTAURENT_ID]=$restaurent_id;			//$unique_arr[RESTAURENT_OWNER]=$restaurent_owner;			//$unique_arr[RESTAURENT_NAME]=$restaurent_name;			//$unique_arr[RESTAURENT_ADDRESS]=$restaurent_address;			//$unique_arr[RESTAURENT_COUNTRY]=$restaurent_country;			//$unique_arr[RESTAURENT_STATE]=$restaurent_state;			//$unique_arr[RESTAURENT_CITY]=$restaurent_city;			//$unique_arr[RESTAURENT_ZIP]=$restaurent_zip;			//$unique_arr[RESTAURENT_PHONE_1]=$restaurent_phone_1;			//$unique_arr[RESTAURENT_PHONE_2]=$restaurent_phone_2;			  $unique_arr[RESTAURENT_EMAIL]=$restaurent_email;			//  $unique_arr[RESTAURENT_WEBSITE]=$restaurent_website;			//  $unique_arr[RESTAURENT_DESCRIPTION]=$restaurent_description;			//$unique_arr[RESTAURENT_IS_PAYPAL]=$restaurent_is_paypal;			//$unique_arr[RESTAURENT_PAYPAL_EMAIL]=$restaurent_paypal_email;			//$unique_arr[RESTAURENT_START_DATE]=$restaurent_start_date;			//$unique_arr[RESTAURENT_END_DATE]=$restaurent_end_date;		if(is_not_empty($unique_arr)){			return $this->readObject($unique_arr);		}		return false;	}//..isAlreadyThere	public function create($restaurent_owner ,$restaurent_name ,$restaurent_address ,$restaurent_country ,$restaurent_state ,$restaurent_city ,$restaurent_zip ,$restaurent_phone_1 ,$restaurent_phone_2,$restaurent_email,$restaurent_website,$restaurent_description,$restaurent_is_paypal ,$restaurent_paypal_email ,$restaurent_online_ord_start,$restaurent_online_ord_end,$restaurent_img=NULL,$restaurent_ethor_store='',$restaurent_fdbk_award_pts=0,$restaurent_rwd_multiplier=0.1,$restaurent_group=1,$restaurent_fax='') {		/*if(is_not_empty($restaurent_owner)){*/			if($this->isAlreadyThere($restaurent_owner ,$restaurent_name ,$restaurent_address ,$restaurent_country ,$restaurent_state ,$restaurent_city ,$restaurent_zip ,$restaurent_phone_1 ,$restaurent_phone_2 ,$restaurent_email,$restaurent_website,$restaurent_description,$restaurent_is_paypal ,$restaurent_paypal_email )){				return OPERATION_DUPLICATE;			}else{								$password = generate_encrypted_password('sample');				$key = getGuid();								$join = date('d M Y'); 								//echo $restaurent_description,'<br/>', $restaurent_city,'<br/>',$restaurent_state,$restaurent_country,'<br/>',$restaurent_phone_2,$restaurent_website;exit;								$this->setrestaurent_id('');				$this->setrestaurent_owner($restaurent_owner);				$this->setrestaurent_name($restaurent_name);				$this->setrestaurent_address($restaurent_address);				//$this->setrestaurent_country($restaurent_country);				$this->setrestaurent_country('IN');				$this->setrestaurent_state($restaurent_state);				$this->setrestaurent_city($restaurent_city);				$this->setrestaurent_zip($restaurent_zip);				$this->setrestaurent_phone_1($restaurent_phone_1);				$this->setrestaurent_phone_2($restaurent_phone_2);								$this->setrestaurent_email($restaurent_email);				$this->setrestaurent_fax($restaurent_fax);				$this->setrestaurent_website($restaurent_website);				$this->setrestaurent_description($restaurent_description);								$this->setrestaurent_is_paypal($restaurent_is_paypal);				$this->setrestaurent_paypal_email($restaurent_paypal_email);				$this->setrestaurent_start_date(date(DATE_FORMAT));								$this->setrestaurent_online_ord_start($restaurent_online_ord_start);				$this->setrestaurent_online_ord_end($restaurent_online_ord_end);				$state_name  = getStateName($restaurent_state);				$city_name  = getCityName($restaurent_city);				/*$info['city_state'] = implode(", ",array_filter(array($info['state_name'], $info['city_name'])));*/				$str_address = str_replace(" " ,"+", implode(",+",array_filter(array($restaurent_address, $city_name, $state_name, $restaurent_country, $restaurent_zip ))));								/*$arr = Biz_getlatlang($str_address,0); 				$this->setrestaurent_lng($arr['lat']);				$this->setrestaurent_lat($arr['long']);*/								$this->setrestaurent_ethor_store($restaurent_ethor_store);				$this->setrestaurent_fdbk_award_pts($restaurent_fdbk_award_pts);									$this->setrestaurent_rwd_multiplier($restaurent_rwd_multiplier);								$this->setrestaurent_group($restaurent_group);															$this->insert();						 	 //we need to create the new owner account for that			  $restarant_id = $this->getrestaurent_id();								//update the image 				$this->saveRestaurantImg($restaurent_img,$restaurent_id);								$obj = new members();				$restaurent_state = getStateIdByAbv($restaurent_state);				//$email = 'owner_'.biz_zerofill($restarant_id,3).'@restaurants.com'; 				$w = $obj->create($restaurent_email,$password,'Owner','Owner',$key,1,$join,ROLE_OWNER,$restaurent_zip,$restaurent_phone_1,$restaurent_address,'Owner','','',$restaurent_description, $restaurent_city,'',$restaurent_state,$restaurent_country,$restaurent_phone_2,$restaurent_website,$restarant_id);				 				if(is_gt_zero_num($w)){ 					//..now update the restaurent owner user id										$objrestaurent= new tbl_restaurent();					if($objrestaurent->readObject(array(RESTAURENT_ID=>$restarant_id))){ 						$objrestaurent->setrestaurent_owner($w);						$objrestaurent->insert();					}					unset($objrestaurent);				}									return $restarant_id;			}		/*}*/		return OPERATION_FAIL;	}//..create	public function update($restaurent_id, $restaurent_owner, $restaurent_name, $restaurent_address, $restaurent_country, $restaurent_state, $restaurent_city, $restaurent_zip, $restaurent_phone_1, $restaurent_phone_2,$restaurent_email,$restaurent_website,$restaurent_description, $restaurent_is_paypal, $restaurent_paypal_email,$restaurent_online_ord_start,$restaurent_online_ord_end,$restaurent_img=NULL,$restaurent_ethor_store='',$restaurent_fdbk_award_pts=0,$restaurent_rwd_multiplier=0.1,$restaurent_group=1,$restaurent_fax='') {		if(is_gt_zero_num($restaurent_id)){			if ($this->readObject(array(RESTAURENT_ID=>$restaurent_id))){			$this->setrestaurent_owner($restaurent_owner);			$this->setrestaurent_name($restaurent_name);			$this->setrestaurent_address($restaurent_address);			$this->setrestaurent_country($restaurent_country);			$this->setrestaurent_state($restaurent_state);			$this->setrestaurent_city($restaurent_city);			$this->setrestaurent_zip($restaurent_zip);			$this->setrestaurent_phone_1($restaurent_phone_1);			$this->setrestaurent_phone_2($restaurent_phone_2); 			$this->setrestaurent_email($restaurent_email);			$this->setrestaurent_fax($restaurent_fax);			$this->setrestaurent_website($restaurent_website);			$this->setrestaurent_description($restaurent_description); 			$this->setrestaurent_is_paypal($restaurent_is_paypal);			$this->setrestaurent_paypal_email($restaurent_paypal_email); 			/*$this->setrestaurent_lng($restaurent_lng);		  	$this->setrestaurent_lat($restaurent_lat);*/			$this->setrestaurent_online_ord_start($restaurent_online_ord_start);			$this->setrestaurent_online_ord_end($restaurent_online_ord_end);			$state_name  	= getStateName($restaurent_state);			$city_name  	= getCityName($restaurent_city);			$str_address 	= str_replace(" " ,"+", implode(",+",array_filter(array($restaurent_address, $city_name, $state_name, $restaurent_country, $restaurent_zip ))));				//echo "str_address=$restaurent_address";				/*$arr = Biz_getlatlang($restaurent_address,0); 				$this->setrestaurent_lng($arr['long']);				$this->setrestaurent_lat($arr['lat']);*/				//print_r($arr);				//exit;			if(is_not_empty($restaurent_ethor_store))					$this->setrestaurent_ethor_store($restaurent_ethor_store);								$this->setrestaurent_fdbk_award_pts($restaurent_fdbk_award_pts);			$this->setrestaurent_rwd_multiplier($restaurent_rwd_multiplier);			$this->setrestaurent_group($restaurent_group);					$this->insert();						$this->saveRestaurantImg($restaurent_img,$restaurent_id);				return OPERATION_SUCCESS;			}		}		return OPERATION_FAIL;	}//..update	public function activate($restaurent_id){		if(is_gt_zero_num($restaurent_id)){			if ($this->readObject(array(RESTAURENT_ID=>$restaurent_id))){				$qry  = "UPDATE ".TBL_RESTAURENT.RET."SET".RET."			".TBL_RESTAURENT_DEACTIVE_DATE." = '".date(EMPTY_DATE_FORMAT)."' WHERE ".RESTAURENT_ID."={$restaurent_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end activate	public function deactivate($restaurent_id){		if(is_gt_zero_num($restaurent_id)){			if ($this->readObject(array(RESTAURENT_ID=>$restaurent_id))){				$qry  = "UPDATE ".TBL_RESTAURENT.RET."SET".RET."			".TBL_RESTAURENT_DEACTIVE_DATE." = '".date(DATE_FORMAT)."' WHERE ".RESTAURENT_ID."={$restaurent_id}";				$res = mysql_query($qry);				if($res){					return 1;				}			}		}		return 0;	}//..end deactivate	public static function GetInfo($restaurent_id) { 		$info = array();		if($restaurent_id != ""){ 			$obj_tbl_restaurent = new tbl_restaurent();			if($obj_tbl_restaurent->readObject(array("restaurent_id"=>$restaurent_id))){				$info["restaurent_id"]=$obj_tbl_restaurent->getrestaurent_id();				$info["restaurent_owner"]=$obj_tbl_restaurent->getrestaurent_owner();				$info["restaurent_name"]=$obj_tbl_restaurent->getrestaurent_name();				$info["restaurent_address"]=$obj_tbl_restaurent->getrestaurent_address();				$info["restaurent_country"]=$obj_tbl_restaurent->getrestaurent_country();				if($info["restaurent_country"]=='US'){					$info["restaurent_currency"]='$';				}else{					$info["restaurent_currency"]='Rs.';				}				$info["restaurent_state"]=$obj_tbl_restaurent->getrestaurent_state();				$info["restaurent_city"]=$obj_tbl_restaurent->getrestaurent_city();				$city_nme=getCityName($obj_tbl_restaurent->getrestaurent_city());				$info["restaurent_city_nm"]=$city_nme;								$info["restaurent_zip"]=$obj_tbl_restaurent->getrestaurent_zip();								$info["restaurent_email"]=$obj_tbl_restaurent->getrestaurent_email();				$info["restaurent_website"]=$obj_tbl_restaurent->getrestaurent_website();				$info["restaurent_description"]=$obj_tbl_restaurent->getrestaurent_description();				$info["restaurent_img"]=$obj_tbl_restaurent->getrestaurent_img();				$info["restaurent_img_url"]= WWWROOT.'images/restaurant/'.$obj_tbl_restaurent->getrestaurent_id().'.'.$obj_tbl_restaurent->getrestaurent_img();				//echo $info["restaurent_img_url"];				$info["restaurent_lat"]=$obj_tbl_restaurent->getrestaurent_lat();				$info["restaurent_lng"]=$obj_tbl_restaurent->getrestaurent_lng();								$info["restaurent_ethor_store"]=$obj_tbl_restaurent->getrestaurent_ethor_store();				$info["restaurent_fdbk_award_pts"]=$obj_tbl_restaurent->getrestaurent_fdbk_award_pts();								$info["restaurent_rwd_multiplier"]=$obj_tbl_restaurent->getrestaurent_rwd_multiplier();				$info["restaurent_group"]=$obj_tbl_restaurent->getrestaurent_group();				$info["rest_group_det"]=tbl_rest_groups::GetInfo($info["restaurent_group"]);								$info["restaurent_phone_1"]=$obj_tbl_restaurent->getrestaurent_phone_1();				$info["restaurent_phone_2"]=$obj_tbl_restaurent->getrestaurent_phone_2();				$info["restaurent_fax"]=$obj_tbl_restaurent->getrestaurent_fax();				$info["restaurent_is_paypal"]=$obj_tbl_restaurent->getrestaurent_is_paypal();				$info["restaurent_paypal_email"]=$obj_tbl_restaurent->getrestaurent_paypal_email();				$info["restaurent_start_date"]=$obj_tbl_restaurent->getrestaurent_start_date();				$info["restaurent_end_date"]=$obj_tbl_restaurent->getrestaurent_end_date();								$info["restaurent_online_ord_start"]=$obj_tbl_restaurent->getrestaurent_online_ord_start();				$info["restaurent_online_ord_end"]=$obj_tbl_restaurent->getrestaurent_online_ord_end();												$info["isActive"] = 0;								$info['id'] = $obj_tbl_restaurent->getrestaurent_id();				$info['owner'] = $obj_tbl_restaurent->getrestaurent_owner();								$info['name'] = $obj_tbl_restaurent->getrestaurent_name();								$info['address'] = $obj_tbl_restaurent->getrestaurent_address();				$info['country'] = $obj_tbl_restaurent->getrestaurent_country();				$info['state'] = $obj_tbl_restaurent->getrestaurent_state();				$info['city'] = $obj_tbl_restaurent->getrestaurent_city();				$info["city_nm"]=$city_nme;				$info['zip'] = $obj_tbl_restaurent->getrestaurent_zip();				$info['phone_1'] = $obj_tbl_restaurent->getrestaurent_phone_1();				$info['phone_2'] = $obj_tbl_restaurent->getrestaurent_phone_2();  								$info['email']=$obj_tbl_restaurent->getrestaurent_email();				$info['fax']=$obj_tbl_restaurent->getrestaurent_fax();				$info['website']=$obj_tbl_restaurent->getrestaurent_website();				$info['description']=$obj_tbl_restaurent->getrestaurent_description();									$info['start_date'] = $obj_tbl_restaurent->getrestaurent_start_date();				$info['end_date'] = $obj_tbl_restaurent->getrestaurent_end_date();  				$info["online_ord_start"]=$obj_tbl_restaurent->getrestaurent_online_ord_start();				$info["online_ord_end"]=$obj_tbl_restaurent->getrestaurent_online_ord_end();																$member = new members();				$owner  = $member->GetInfo($obj_tbl_restaurent->getrestaurent_owner());				$info['owner_name'] = $owner['full_name']; 				unset($member); 				$info['state_name'] = getStateName($obj_tbl_restaurent->getrestaurent_state());				$info['city_name'] = getCityName($obj_tbl_restaurent->getrestaurent_city());				/*$info['city_state'] = implode(", ",array_filter(array($info['state_name'], $info['city_name'])));*/				$info['city_state'] = implode(", ",array_filter(array($info['state_name'], $info['city_name'], $info['country'], $info['zip'] )));								$info['phone_nos'] = implode(", ",array_filter(array($info['phone_1'], $info['phone_2'])));								//..Get review systems				$tbl_review_systems_deatil= tbl_review_systems::GetInfo($restaurent_id);				if(is_not_empty($tbl_review_systems_deatil)){					$info['rest_review_systems']=$tbl_review_systems_deatil;				}				//..Get social media connects				$_lst_social_media = tbl_rest_connect::GetInfo($restaurent_id);				if(is_not_empty($_lst_social_media)){					$info['lst_social_media']=$_lst_social_media;				}										//..check deactive date is not set or 0				if((is_not_empty($obj_tbl_restaurent->gettbl_restaurent_deactive_date())==false)  || (is_gt_zero_num(strtotime($obj_tbl_restaurent->gettbl_restaurent_deactive_date()))== false)){					$info["isActive"] = 1;				}else{					//..check the deactive date is greater than todays date					if(strtotime($obj_tbl_restaurent->gettbl_restaurent_deactive_date()) > strtotime(date(DATE_FORMAT))){						$info["isActive"] = 1;					}				}			}		unset($obj_tbl_restaurent);		return $info;		}	}//..End GetInfo		public static function GetInfoNew($restaurent_id) { 		$info = array();		if($restaurent_id != ""){ 			$obj_tbl_restaurent = new tbl_restaurent();			if($obj_tbl_restaurent->readObject(array("restaurent_id"=>$restaurent_id))){				$info["restaurent_id"]=$obj_tbl_restaurent->getrestaurent_id();				$info["restaurent_owner"]=$obj_tbl_restaurent->getrestaurent_owner();				$info["restaurent_name"]=$obj_tbl_restaurent->getrestaurent_name();				$info["restaurent_address"]=$obj_tbl_restaurent->getrestaurent_address();				$info["restaurent_country"]=$obj_tbl_restaurent->getrestaurent_country();				if($info["restaurent_country"]=='US'){					$info["restaurent_currency"]='$';				}else{					$info["restaurent_currency"]='Rs.';				}				$info["restaurent_state"]=$obj_tbl_restaurent->getrestaurent_state();				$info["restaurent_city"]=$obj_tbl_restaurent->getrestaurent_city();				$city_nme=getCityName($obj_tbl_restaurent->getrestaurent_city());				$info["restaurent_city_nm"]=$city_nme;								$info["restaurent_zip"]=$obj_tbl_restaurent->getrestaurent_zip();								$info["restaurent_email"]=$obj_tbl_restaurent->getrestaurent_email();								$info["restaurent_website"]=$obj_tbl_restaurent->getrestaurent_website();				$info["restaurent_description"]=$obj_tbl_restaurent->getrestaurent_description();				$info["restaurent_img"]=$obj_tbl_restaurent->getrestaurent_img();				$info["restaurent_img_url"]= WWWROOT.'images/restaurant/'.$obj_tbl_restaurent->getrestaurent_id().'.'.$obj_tbl_restaurent->getrestaurent_img();				//echo $info["restaurent_img_url"];				$info["restaurent_lat"]=$obj_tbl_restaurent->getrestaurent_lat();				$info["restaurent_lng"]=$obj_tbl_restaurent->getrestaurent_lng();								$info["restaurent_ethor_store"]=$obj_tbl_restaurent->getrestaurent_ethor_store();				$info["restaurent_fdbk_award_pts"]=$obj_tbl_restaurent->getrestaurent_fdbk_award_pts();				$info["restaurent_rwd_multiplier"]=$obj_tbl_restaurent->getrestaurent_rwd_multiplier();				$info["restaurent_group"]=$obj_tbl_restaurent->getrestaurent_group();								$info["rest_group_det"]=tbl_rest_groups::GetInfo($info["restaurent_group"]);								$info["restaurent_phone_1"]=$obj_tbl_restaurent->getrestaurent_phone_1();				$info["restaurent_phone_2"]=$obj_tbl_restaurent->getrestaurent_phone_2();				$info["restaurent_fax"]=$obj_tbl_restaurent->getrestaurent_fax();				$info["restaurent_is_paypal"]=$obj_tbl_restaurent->getrestaurent_is_paypal();				$info["restaurent_paypal_email"]=$obj_tbl_restaurent->getrestaurent_paypal_email();				$info["restaurent_start_date"]=$obj_tbl_restaurent->getrestaurent_start_date();				$info["restaurent_end_date"]=$obj_tbl_restaurent->getrestaurent_end_date();								$info["restaurent_online_ord_start"]=$obj_tbl_restaurent->getrestaurent_online_ord_start();				$info["restaurent_online_ord_end"]=$obj_tbl_restaurent->getrestaurent_online_ord_end();												$info["isActive"] = 0;												$member = new members();				$owner  = $member->GetInfo($obj_tbl_restaurent->getrestaurent_owner());				$info['owner_name'] = $owner['full_name']; 				unset($member); 				/*$info['state_name'] = getStateName($obj_tbl_restaurent->getrestaurent_state());				$info['city_name'] = getCityName($obj_tbl_restaurent->getrestaurent_city());				/*$info['city_state'] = implode(", ",array_filter(array($info['state_name'], $info['city_name'])));*/				/*$info['city_state'] = implode(", ",array_filter(array($info['state_name'], $info['city_name'], $info['country'], $info['zip'] )));								$info['phone_nos'] = implode(", ",array_filter(array($info['phone_1'], $info['phone_2'])));*/								//..Get Weekday details				$tbl_review_systems_deatil= tbl_review_systems::GetInfo($restaurent_id);				if(is_not_empty($tbl_review_systems_deatil)){					$info['rest_review_systems']=$tbl_review_systems_deatil;				}					//..Get social media connects				$_lst_social_media = tbl_rest_connect::GetInfo($restaurent_id);				if(is_not_empty($_lst_social_media)){					$info['lst_social_media']=$_lst_social_media;				}					//..check deactive date is not set or 0				if((is_not_empty($obj_tbl_restaurent->gettbl_restaurent_deactive_date())==false)  || (is_gt_zero_num(strtotime($obj_tbl_restaurent->gettbl_restaurent_deactive_date()))== false)){					$info["isActive"] = 1;				}else{					//..check the deactive date is greater than todays date					if(strtotime($obj_tbl_restaurent->gettbl_restaurent_deactive_date()) > strtotime(date(DATE_FORMAT))){						$info["isActive"] = 1;					}				}			}		unset($obj_tbl_restaurent);		return $info;		}	}//..End GetInfo	public static function GetFields($data){		global $tbl_restaurent_active_condition;		$arr = array();		if(is_not_empty($data)){			$qry ="SELECT ".$data['key_field'].",".$data['value_field']." FROM ".TBL_RESTAURENT."";			if(is_gt_zero_num($data['isActive'])){				$qry .= " WHERE ".$tbl_restaurent_active_condition;			}			$res = mysql_query($qry); 			if($res){				while($row=mysql_fetch_assoc($res)){					$arr[$row[$data['key_field']]] = $row[$data['value_field']];				}			}		}		return $arr;	}//.. End of GetFields			public function saveRestaurantImg($img_file,$rest_id){		global $file_error_types;  		if($img_file) { 		$filesize = $img_file['size']/1024; 			if ($img_file['error'] > 0){			   $_SESSION[SES_FLASH_MSG]  = '<div class="error">'.$file_error_types[$img_file['error']].'</div>';	    }elseif( $filesize > 1500){	       $_SESSION[SES_FLASH_MSG]  = '<div class="error">Please, Upload Image File Less Than 1.5 MB.</div>';			}else{	        $file_info = getimagesize($img_file['tmp_name']);               	    switch ($file_info[2]){        		case 1:        			$file_ext = 'gif';        			break;        		case 2:        			$file_ext = 'jpg';        			break;        		case 3:        			$file_ext = 'png';        			break;        		case 4:        			$file_ext = 'swf';        			break;        		default:        			$file_ext = '';    		}			$image_file_path =  PATHROOT.'/images/restaurant/'.$rest_id.'.'.$file_ext; 		 	 		  	if(move_uploaded_file($img_file['tmp_name'], $image_file_path)){					$objrestuarent = new tbl_restaurent();					if($objrestuarent->readObject(array(RESTAURENT_ID=>$rest_id))){						$prev_file_ext = $objrestuarent->getrestaurent_img();						$objrestuarent->setrestaurent_img($file_ext);												//check if previous file_extension is not matched the current file_extention then						if($prev_file_ext != $file_ext){							$prev_img_path =  PATHROOT.'/images/restaurant/'.$rest_id.'.'.$prev_file_ext;							// delete the previous file 							@unlink($prev_img_path);						}						$objrestuarent->insert(); 					}			 	  return true; 				}	 			}		} 		return false; 	}	//..get locations	public static function GetLocations($data){		global $tbl_restaurent_active_condition;		$arr = array();		if(is_not_empty($data)){			$qry ="SELECT DISTINCT `".$data['key_field']."` FROM ".TBL_RESTAURENT." WHERE 1 ";			if(is_gt_zero_num($data['isActive'])){				$qry .= " AND ".$tbl_restaurent_active_condition;						}			//echo $qry;			$arr=DB::ExecQry($qry);		} 		return $arr;	}	/*public static function GetLocations($data){		global $tbl_restaurent_active_condition;		$arr = array();		if(is_not_empty($data)){			$qry ="SELECT DISTINCT `".$data['key_field']."` FROM ".TBL_RESTAURENT." WHERE `".$data['filt_field']."` LIKE '".$data['keyword']."%' ";			if(is_gt_zero_num($data['isActive'])){				$qry .= " AND ".$tbl_restaurent_active_condition;						}			//echo $qry;			$arr=DB::ExecQry($qry);		}		return $arr;	}//.. End of GetFields*/}//..End tbl_restaurent?>