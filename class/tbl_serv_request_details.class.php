<?php/**********************************************************************tbl_serv_request_details.class.phpGenerated by STRUCTY 2013.03.14 07:51:46.Copyright 2011 Structy, Frdric Aebi. All rights reserved.**********************************************************************/define("TBL_SERV_REQUEST_DETAILS", "tbl_serv_request_details"); define('SRVC_REQST_DTL_ID', 'srvc_reqst_dtl_id'); define('SRVC_REQST_REQUEST', 'srvc_reqst_request'); define('SRVC_REQST_SUBCODE_ID', 'srvc_reqst_subcode_id'); define('SRVC_REQST_SUBCODE_VALUE', 'srvc_reqst_subcode_value');  class tbl_serv_request_details {	private $srvc_reqst_dtl_id;	private $srvc_reqst_request;	private $srvc_reqst_subcode_id;	private $srvc_reqst_subcode_value;	public function setsrvc_reqst_dtl_id($pArg="0") {$this->srvc_reqst_dtl_id=$pArg;}	public function setsrvc_reqst_request($pArg="0") {$this->srvc_reqst_request=$pArg;}	public function setsrvc_reqst_subcode_id($pArg="0") {$this->srvc_reqst_subcode_id=$pArg;}	public function setsrvc_reqst_subcode_value($pArg="0") {$this->srvc_reqst_subcode_value=$pArg;}	public function getsrvc_reqst_dtl_id() {return $this->srvc_reqst_dtl_id;}	public function getsrvc_reqst_request() {return $this->srvc_reqst_request;}	public function getsrvc_reqst_subcode_id() {return $this->srvc_reqst_subcode_id;}	public function getsrvc_reqst_subcode_value() {return $this->srvc_reqst_subcode_value;}	public function readObject($array = array()) {		$qry = "SELECT *".RET."FROM ".TBL_SERV_REQUEST_DETAILS.RET;		$and = "WHERE".RET;		if($array[SRVC_REQST_DTL_ID] != "") {			$qry .= $and.SRVC_REQST_DTL_ID." = '".$array[SRVC_REQST_DTL_ID]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_REQST_REQUEST] != "") {			$qry .= $and.SRVC_REQST_REQUEST." = '".$array[SRVC_REQST_REQUEST]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_REQST_SUBCODE_ID] != "") {			$qry .= $and.SRVC_REQST_SUBCODE_ID." = '".$array[SRVC_REQST_SUBCODE_ID]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_REQST_SUBCODE_VALUE] != "") {			$qry .= $and.SRVC_REQST_SUBCODE_VALUE." = '".$array[SRVC_REQST_SUBCODE_VALUE]."'".RET;			$and = "AND".RET;		}	$result = mysql_query($qry);		if($result) {			while ($row = mysql_fetch_array($result)) {				$record = $row;				break;//end after first record			}			if(count($record[0]) == 0) {				return array();			} else {				$this->setsrvc_reqst_dtl_id($record[SRVC_REQST_DTL_ID]);				$this->setsrvc_reqst_request($record[SRVC_REQST_REQUEST]);				$this->setsrvc_reqst_subcode_id($record[SRVC_REQST_SUBCODE_ID]);				$this->setsrvc_reqst_subcode_value($record[SRVC_REQST_SUBCODE_VALUE]);				return true;			}		}	}	public static function readArray($array = array(),&$result_found=0,$isArray=1) {		$qry = "SELECT *".RET."FROM ".TBL_SERV_REQUEST_DETAILS.RET;		$and = "WHERE".RET;		if($array[SRVC_REQST_DTL_ID] != "") {			$qry .= $and.SRVC_REQST_DTL_ID." = '".$array[SRVC_REQST_DTL_ID]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_REQST_REQUEST] != "") {			$qry .= $and.SRVC_REQST_REQUEST." = '".$array[SRVC_REQST_REQUEST]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_REQST_SUBCODE_ID] != "") {			$qry .= $and.SRVC_REQST_SUBCODE_ID." = '".$array[SRVC_REQST_SUBCODE_ID]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_REQST_SUBCODE_VALUE] != "") {			$qry .= $and.SRVC_REQST_SUBCODE_VALUE." = '".$array[SRVC_REQST_SUBCODE_VALUE]."'".RET;			$and = "AND".RET;		}		if($array["offset"] != "" && $array["limit"] != "" ) {			$qry_with_limit  = $qry." LIMIT ".$array["offset"].",".$array["limit"];		}else{			$qry_with_limit  = $qry;		}		$result = mysql_query ($qry_with_limit);		$r1 = mysql_query($qry);		$result_found = mysql_num_rows($r1);		$class_objects = array();		if($result) {			while ($record = mysql_fetch_assoc($result)) {				if($isArray){					$class_object = array();					$class_object["id"]=$record[SRVC_REQST_DTL_ID];					$class_object["request"]=$record[SRVC_REQST_REQUEST];					$class_object["subcode_id"]=$record[SRVC_REQST_SUBCODE_ID];					$class_object["subcode_value"]=$record[SRVC_REQST_SUBCODE_VALUE];				}else{					$class_object = new tbl_serv_request_details();					$class_object->setsrvc_reqst_dtl_id($record[SRVC_REQST_DTL_ID]);					$class_object->setsrvc_reqst_request($record[SRVC_REQST_REQUEST]);					$class_object->setsrvc_reqst_subcode_id($record[SRVC_REQST_SUBCODE_ID]);					$class_object->setsrvc_reqst_subcode_value($record[SRVC_REQST_SUBCODE_VALUE]);				}				$class_objects[$record[SRVC_REQST_DTL_ID]] = $class_object;			}		}		return $class_objects;	}//..End readArray	public function insert() {		if($this->getsrvc_reqst_dtl_id() != '') {			$qry  = "UPDATE ".TBL_SERV_REQUEST_DETAILS.RET."SET".RET."			".SRVC_REQST_DTL_ID." = '".$this->getsrvc_reqst_dtl_id()."',".RET."			".SRVC_REQST_REQUEST." = '".$this->getsrvc_reqst_request()."',".RET."			".SRVC_REQST_SUBCODE_ID." = '".$this->getsrvc_reqst_subcode_id()."',".RET."			".SRVC_REQST_SUBCODE_VALUE." = '".$this->getsrvc_reqst_subcode_value()."'".RET.			"WHERE ".SRVC_REQST_DTL_ID." = ".$this->getsrvc_reqst_dtl_id().RET;			mysql_query($qry);		} else {			$qry  = "INSERT INTO ".TBL_SERV_REQUEST_DETAILS." (".RET.			"".SRVC_REQST_REQUEST.", ".SRVC_REQST_SUBCODE_ID.", ".SRVC_REQST_SUBCODE_VALUE.RET.				") VALUES (".RET.			"'".$this->getsrvc_reqst_request()."',".RET.			"'".$this->getsrvc_reqst_subcode_id()."',".RET.			"'".$this->getsrvc_reqst_subcode_value()."'".RET.			")".RET;			$res = mysql_query($qry);			$this->setsrvc_reqst_dtl_id(mysql_insert_id());		}	}//..End Insert	public static function delete($array = array()) {		$qry = "DELETE".RET."FROM ".TBL_SERV_REQUEST_DETAILS.RET;		$and = "WHERE".RET;		if($array[SRVC_REQST_DTL_ID] != "") {			$qry .= $and.SRVC_REQST_DTL_ID." = '".$array[SRVC_REQST_DTL_ID]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_REQST_REQUEST] != "") {			$qry .= $and.SRVC_REQST_REQUEST." = '".$array[SRVC_REQST_REQUEST]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_REQST_SUBCODE_ID] != "") {			$qry .= $and.SRVC_REQST_SUBCODE_ID." = '".$array[SRVC_REQST_SUBCODE_ID]."'".RET;			$and = "AND".RET;		}		if($array[SRVC_REQST_SUBCODE_VALUE] != "") {			$qry .= $and.SRVC_REQST_SUBCODE_VALUE." = '".$array[SRVC_REQST_SUBCODE_VALUE]."'".RET;			$and = "AND".RET;		}		mysql_query($qry);	}//..End Delete	public function GetInfo($srvc_reqst_request) {		$info = array();		if($srvc_reqst_request != ""){			if($this->readObject(array("srvc_reqst_request"=>$srvc_reqst_request))){				$info["id"]=$this->getsrvc_reqst_dtl_id();				$info["request"]=$this->getsrvc_reqst_request();				$info["subcode_id"]=$this->getsrvc_reqst_subcode_id();								$info["subcode_value"]=$this->getsrvc_reqst_subcode_value();					}		return $info;		}	}//..End GetInfo	 	public static function createBulkServices($request_id,$checked_services){	  if(is_gt_zero_num($request_id) && is_not_empty($checked_services)){		   $bulk_values = array();		   $x = 0;		   if($checked_services){			   	foreach($checked_services as $srvc_id=>$srvc_val){					 if(is_gt_zero_num($srvc_id)){					 	$bulk_values[$x] ="({$request_id},{$srvc_id},'{$srvc_val}')"; 						$x++;					 }		 				}		   } 		   if(is_gt_zero_num($x) && is_not_empty($bulk_values)){				$qry = "INSERT INTO ".TBL_SERV_REQUEST_DETAILS." (".RET.SRVC_REQST_REQUEST.", ".SRVC_REQST_SUBCODE_ID.", ".SRVC_REQST_SUBCODE_VALUE.RET.") VALUES ".RET.implode(",",$bulk_values).";".RET;			} 			$res = mysql_query($qry);			if($res){				return 1;			}			return 0; 	  } 	} 	  }//..End tbl_serv_request_details?>